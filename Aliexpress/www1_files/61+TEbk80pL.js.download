'use strict';mix_d("SBVideoCards__multi-brand-video-desktop:multi-brand-video-desktop__lIO2QoCq","require exports tslib @p/A @c/metrics @c/pagemarker @c/scoped-dom @c/dom @p/a-ajax @c/logger @p/a-carousel-constants @p/a-carousel-framework @p/a-carousel-strategies @c/aui-carousel @c/aui-utils @c/aui-truncate @c/browser-operations @c/aui-modal @c/aui-untrusted-ajax".split(" "),function(Rb,Da,p,Sb,B,Tb,Ub,Ea,Vb,Ua,Wb,Xb,Yb,Zb,$b,ac,bc,cc,dc){function I(c){return c&&"object"===typeof c&&"default"in c?
c:{"default":c}}function ec(c){if(c&&c.__esModule)return c;var f=Object.create(null);c&&Object.keys(c).forEach(function(h){if("default"!==h){var e=Object.getOwnPropertyDescriptor(c,h);Object.defineProperty(f,h,e.get?e:{enumerable:!0,get:function(){return c[h]}})}});f["default"]=c;return f}var y=I(Sb),da=I(Tb),u=I(Ub),aa=I(Ea),fc=I(Vb),Fa=I(Ua),w=I(Wb),ka=I(Xb),la=I(Yb),Va=I(Zb),Wa=I(bc),gc=I(cc),hc=I(dc),Xa={},Ga=function(c,f,h){void 0===f&&(f="");void 0===h&&(h=1);f=c+f;Xa.hasOwnProperty(f)||(Xa[f]=
!0,B.count(c,(B.count(c)||0)+h))},ic=function(c){Ga(y["default"].capabilities.mobile?"Card:EERU:SharedLib:mobile:render":"Card:EERU:SharedLib:desktop:render");var f=function(e,a){e={$event:{preventDefault:y["default"].$.noop,stopPropagation:y["default"].$.noop},$target:e.getContent().find('[data-a-tab-name="'+a+'"]'),data:{name:"energyEfficiencyTabSet"}};y["default"].trigger("a:declarative:a-tabs:click",e)},h=function(e,a){var b=e&&e.$event,d=e&&e.data||{},g=d.activeTabName,k=d.modalHeight,l=d.name;
b&&b.preventDefault&&b.preventDefault();b&&b.stopPropagation&&b.stopPropagation();b=a.get(l);b||(y["default"].on("a:popover:beforeShow:"+l,function(n){n.popover&&n.popover.getContent&&(n=n.popover.getContent(),n.find(".a-manually-loaded").parent().css("min-height",k),y["default"].loadDescendantImagesManually(n))}),b=a.create(e.$target,d));b.show();f(b,g)};c.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",function(e){y["default"].declarative("card-energy-efficiency-secondary-view",
"click",function(a){Ga("Card:EERU:SharedLib:mobile:click",a&&a.data&&a.data.name||"");h(a,e)})});c.when("a-modal").execute("RegisterEnergyEfficiencyEventDesktop",function(e){y["default"].declarative("card-energy-efficiency-modal","click",function(a){Ga("Card:EERU:SharedLib:desktop:click",a&&a.data&&a.data.name||"");h(a,e)})})},jc=function(c){c.when("ready").execute("EEBadgeProductFicheResize",function(f){var h=y["default"].$;h(".energyEfficiencyContainer").each(function(e,a){e=h(a).find(".energyEfficiencyProductFicheLabel").first();
a=h(a).find("svg").first();e.parent().outerHeight()>a.outerHeight()&&(e.removeClass("a-size-small"),e.addClass("a-size-micro"),e.parent().outerHeight()>a.outerHeight()&&e.parent().css("line-height","10px"))})})},Ya=function(){var c=window.P;ic(c);jc(c)},L;(function(c){c.VIDEO_SINGLE_PRODUCT="video-single-product";c.MULTI_BRAND_VIDEO="multi-brand-video";c.VIDEO_SINGLE_BRAND="video-single-brand";c.VIDEO_STORE="video-store";c.VIDEO_STORE_PRODUCT_FEATURE="video-store-product-feature";c.VIDEO_PRODUCT_COLLECTION=
"video-product-collection";c.SHORT_FORM_VIDEO="short-form-video";c.THEMATIC_VIDEO="thematic-video";c.VIDEO_SPLIT="video-split"})(L||(L={}));var Za;(function(c){c.SPARKLE_MOBILE="loom-mobile-top-slot";c.SPARKLE_DESKTOP="loom-desktop-top-slot";c.INLINE_MOBILE="loom-mobile-inline-slot";c.INLINE_DESKTOP="loom-desktop-inline-slot";c.BOTTOM_MOBILE="loom-mobile-bottom-slot";c.BOTTOM_DESKTOP="loom-desktop-bottom-slot";c.MOBILE_HQP="mobile-hero-quick-promo";c.BRAND_DISCOVERY_FEEDS_MOBILE="brand-discovery-feeds-mobile"})(Za||
(Za={}));var ma=function(c,f){f=f||u["default"].cardRoot;return!c||f.matches(c)?f:f.querySelector(c)},Ha=function(c,f){return(f=ma("["+c+"]",f))?f.getAttribute(c):null},J=function(){return aa["default"].cardRoot.ownerDocument},kc=function(c){var f,h;return null===(h=null===(f=J().defaultView)||void 0===f?void 0:f.matchMedia)||void 0===h?void 0:h.call(f,c)},lc=function(c,f){c.forEach(function(h){h.classList.remove(f)})},$a=function(){},mc=function(c){var f=c.url,h=c.onSuccess,e=c.onError;f?fc["default"].get(f,
{success:function(a){a&&"ok"===a.status?h(a):e()},error:e,abort:e}):e()},nc=function(c){var f=c.url,h=c.payload,e=c.onSuccess,a=void 0===e?$a:e;c=c.onError;c=void 0===c?$a:c;f?fetch(f,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:h}).then(function(b){if(!b.ok&&0!==b.status)throw Error(b.status+" "+b.statusText);a(b)}).catch(c):c()},oc=function(c){try{var f=encodeURIComponent,h=JSON,e=h.stringify,a=JSON.parse(c);var b={adCreativeMetaData:{adId:a.feedbackRequestAdId,
advertiserId:a.feedbackRequestAdvertiserId,adNetwork:"aax",adProgramId:1010,adCreativeDetails:[{advertiserIdNS:a.feedbackRequestAdvertiserIdNS,campaignId:a.feedbackRequestCampaignId,selectionSignals:ab(a.feedbackRequestSelectionSignals)}]},adPlacementMetaData:{adElementId:a.adElementId,pageType:a.pageType,slotName:a.slotName}};return"/af/feedback-link?pl="+f(e.call(h,b))}catch(d){return null}},Ia=function(){var c=ma('[data-id="afb-sponsored"]');c&&(c.style.display="block")},bb=function(c,f){return p.__awaiter(void 0,
void 0,void 0,function(){var h,e,a,b;return p.__generator(this,function(d){switch(d.label){case 0:h=f.cardName;e=f.isAdFeedbackForCards;if(!e)return[3,1];pc(f).then(function(){c.reportAdFeedbackLoadSucceeded()}).catch(function(g){c.reportAdFeedbackLoadFailedFromErr(g.message||"")});return[3,4];case 1:return d.trys.push([1,3,,4]),[4,qc()];case 2:return d.sent(),c.reportAdFeedbackLoadSucceeded(),(a=u["default"].cardRoot.querySelector('[data-id="afb-content"]'))?a.querySelectorAll("a").forEach(function(g){g.addEventListener("click",
c.reportAdFeedbackPopoverOpened)}):B.count(h+"-AdfeedbackElementNotFound"),[3,4];case 3:return b=d.sent(),c.reportAdFeedbackLoadFailedFromErr(b.message||""),[3,4];case 4:return[2]}})})},pc=function(c){return p.__awaiter(void 0,void 0,void 0,function(){var f,h,e,a,b;return p.__generator(this,function(d){switch(d.label){case 0:f=Ha("data-ad-feedback");h=Ha("data-ad-feedback-label-id");e=c.enableAdFeedback;if(!f||!h)return[2,Promise.reject(Error("data-ad-feedback attributes not found"))];a=JSON.parse(f);
b=function(){return{adFeedbackLabelId:h,adCreativeMetaData:{adCreativeDetails:a.creativeDetails.map(function(g,k){var l=g.adId,n=g.advertiserId,r=g.advertiserIdNS,t=g.campaignId,v=ab(g.selectionSignals),x=g.title;(g=g.imageUrl)?(g={url:g,width:0,height:0},g={lowResolutionImage:g,highResolutionImages:[g]}):g=void 0;return{adId:l,advertiserId:n,adCreativeIndex:k,adNetwork:"aax",advertiserIdNS:r,campaignId:t,selectionSignals:v,title:x,adCreativeImage:g}})}}};d.label=1;case 1:return d.trys.push([1,3,
,4]),[4,e(b)];case 2:return d.sent(),[3,4];case 3:return d.sent(),[2,Promise.reject(Error("enableAdFeedbackClient call failed"))];case 4:return[2,Promise.resolve("success")]}})})},qc=function(){var c=Ha("data-ad-feedback");if(c){var f=oc(c);return new Promise(function(h,e){mc({url:f,onSuccess:function(a){try{var b=a.html,d=ma('[data-id="afb-content"]');if(d&&b){var g=ma('[data-id="afb-sponsored"]');g&&(g.style.display="none");d.innerHTML=b}var k=a.script;if(k){var l=J().createElement("script");l.type=
"text/javascript";l.innerHTML=k;ma().appendChild(l)}}catch(n){Ia(),e(Error("setHtml or setScript failed"))}h("success")},onError:function(){Ia();e(Error("get ad feedback request failed"))}})})}return Promise.reject(Error("data-ad-feedback attributes not found"))},ab=function(c){var f;if(c){switch(null===(f=c.pastActivity)||void 0===f?void 0:f.toUpperCase()){case "STORE_ONLY":f=1;break;case "AMAZON_AND_OTHER":f=3;break;case "AMAZON_ONLY":f=2;break;default:f=0}return p.__assign(p.__assign({},c),{pastActivity:f})}},
ea;(function(c){c.BETA="beta";c.GAMMA="gamma";c.PROD="prod"})(ea||(ea={}));var Ja=function(){function c(){}c.getStage=function(){var f=J().defaultView;return(f=f&&f.location&&f.location.hostname)?"localhost"===f||"mix.corp.amazon.com"===f||"development.amazon.com"===f||/^[a-z]{2}-development\.amazon\.com$/.test(f)?ea.BETA:/^pre-prod\.amazon\.(com|[a-z]{2})$/.test(f)||/^pre-prod\.amazon\.com?\.[a-z]{2}$/.test(f)||/^[a-z]{2}-pre-prod\.amazon\.com$/.test(f)?ea.GAMMA:ea.PROD:ea.PROD};return c}(),D=function(){function c(){}
c.eventListeners={};c.addEventListener=function(f,h,e,a){c.setupListenerIfItDoesntExist(f,h);c.addCallbackWithPriority(f,h,e,a)};c.removeEventListener=function(f,h,e,a){c.removeCallbackWithPriority(f,h,e,a)&&c.removeListenerIfNoLongerNeeded(f,h)};c.removeListenerIfNoLongerNeeded=function(f,h){0===c.eventListeners[f][h].listeners.length&&(f.removeEventListener(h,c.eventListeners[f][h].generatedCallback),delete c.eventListeners[f][h],Object.keys(c.eventListeners[f]).length&&delete c.eventListeners[f])};
c.removeCallbackWithPriority=function(f,h,e,a){if(!c.eventListeners[f]||!c.eventListeners[f][h])return!1;c.eventListeners[f][h].listeners=c.eventListeners[f][h].listeners.filter(function(b){return b.priority!==e||b.callback!==a});return!0};c.setupListenerIfItDoesntExist=function(f,h){c.eventListeners[f]||(c.eventListeners[f]={});c.eventListeners[f][h]||(c.eventListeners[f][h]={generatedCallback:c.generateCallback(f,h),listeners:[]},f.addEventListener(h,c.eventListeners[f][h].generatedCallback))};
c.addCallbackWithPriority=function(f,h,e,a){c.eventListeners[f][h].listeners.push({callback:a,priority:e});c.eventListeners[f][h].listeners.sort(function(b,d){return b.priority-d.priority})};c.generateCallback=function(f,h){return function(e){c.eventListeners[f][h].listeners.forEach(function(a){a.callback&&a.callback(e)})}};return c}(),rc=["messageId","timestamp"],sc=function(c){var f=function(){},h=function(){var a=function(){if(c.XDomainRequest){var b=new c.XDomainRequest;b.onerror=f;b.ontimeout=
f;b.onprogress=f;b.onload=f;b.timeout=0;return b}if(c.XMLHttpRequest){b=new c.XMLHttpRequest;if(!("withCredentials"in b))throw"";return b}return null};return{isSupported:!0,send:function(b,d){if(d&&b){var g=a();if(!g)throw"";g.open("POST",b,!0);g.setRequestHeader&&g.setRequestHeader("Content-type","text/plain");g.send(d)}}}}(),e=function(){return{isSupported:!!c.navigator.sendBeacon,send:function(a,b){if(a&&b&&!c.navigator.sendBeacon(a,b))throw"";}}}();return{ajaxClient:h,beaconClient:e}},tc=function(){return function(c,
f){var h=this;this.flush=function(a){void 0===a&&(a=!1);h.eventsQueue.length&&(a||!1!==h.browserWindow.navigator.onLine)&&(a=h.eventsQueue.length,h.sendWithPriority(h.transportationClient.beaconClient,h.transportationClient.ajaxClient),h.resetBatch(),h.ueCount("EventsSent",a))};this.processEvent=function(a,b){void 0===b&&(b={n:1});var d=h.unloadHandlerCalled=!1;h.isValidAPICall(a)&&(d=h.addEvent(a,b));d?h.ueCount("ClientEventsSuccess"):h.ueCount("ClientEventsFailed");return d};this.getEventQueueCount=
function(){return h.eventsQueue.length};this.buildCompressor=function(){var a=function(k){return k.length>("#"+h.dictionaryIndex).length||"#"===k.charAt(0)},b=function(k){if(k)switch(typeof k){case "number":return!(isNaN(k)||Infinity===k)&&a(k.toString());case "boolean":break;case "string":return a(k);default:return!0}return!1},d=function(k){h.eventsDictionary[k]="#"+h.dictionaryIndex++;h.reverseEventsDictionary[h.eventsDictionary[k]]=k;return h.eventsDictionary[k]},g=function(k){if(b(k)){var l=0;
k instanceof Array?l=2:k instanceof Function?l=null:k instanceof Object&&(l=1);switch(l){case 0:return h.eventsDictionary[k]?h.eventsDictionary[k]:d(k);case 2:var n=[];for(l=0;l<k.length;l++)n[l]=g(k[l]);return n;case 1:l={};for(n in k)Object.prototype.hasOwnProperty.call(k,n)&&(l[h.eventsDictionary[n]?h.eventsDictionary[n]:d(n)]=-1===rc.indexOf(n)?g(k[n]):k[n]);return l}}return k};return{buildPOSTObject:function(){return h.stringify({cs:{dct:h.reverseEventsDictionary},events:h.eventsQueue})},compressData:g}};
this.onBeforeUnload=function(){!0!==h.unloadHandlerCalled&&(h.flush(),h.unloadHandlerCalled=!0)};this.stringify=function(a){try{return JSON.stringify(a)}catch(b){return null}};this.resetBatch=function(){h.eventsQueue=[];h.eventsDictionary={};h.reverseEventsDictionary={};h.dictionaryIndex=0;h.batchSize=0;h.lowPriorityTimer=0;h.highPriorityTimer=0};this.sendWithClient=function(a){if(null==h.endpoint||""===h.endpoint)h.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var b=h.compressor.buildPOSTObject();
return a.send(h.endpoint,b)}throw"";}};this.sendWithPriority=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(b=0;b<a.length;b++){var d=a[b];try{return h.sendWithClient(d)}catch(g){}}return null};this.startHighPriorityQueueTimer=function(){0===h.highPriorityFlushInterval?h.flush():h.highPriorityTimer||(h.highPriorityTimer=setTimeout(h.flush,h.highPriorityFlushInterval,h,!1))};this.startLowPriorityQueueTimer=function(){h.lowPriorityTimer||(h.lowPriorityTimer=setTimeout(h.flush,
h.lowPriorityFlushInterval,h,!1))};this.generateMessageId=function(a,b){return a+"-"+b+"-"+h.eventSequence};this.getCurrentISODate=function(){var a=new Date,b=function(d){return 10>d?"0"+d:d};return"function"===typeof Date.prototype.toISOString?a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"};this.decorateEvent=function(a){a.timestamp=
h.getCurrentISODate();a.sequence=h.eventSequence;a.messageId=h.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())};this.startTimers=function(a){a.n?h.startHighPriorityQueueTimer():h.startLowPriorityQueueTimer()};this.encodeEvent=function(a,b,d){b=b.length;(499===h.eventsQueue.length||524288<h.batchSize+b)&&h.flush(!0);h.batchSize+=b;a={data:h.compressor.compressData(a)};h.eventsQueue.push(a);h.startTimers(d)};this.addEvent=function(a,b){h.decorateEvent(a);var d=h.stringify(a);
return d?(h.encodeEvent(a,d,b),!0):!1};this.isValidAPIParam=function(a,b){return a&&-1<a.constructor.toString().indexOf(b)};this.isMaxCallsReached=function(){h.eventSequence++;1E3<h.eventSequence&&h.ueCount("SushiClientMaxCallsReached");return 1E3<h.eventSequence};this.isValidAPICall=function(a){return!h.isMaxCallsReached()&&h.isValidAPIParam(a,"Object")};this.ueCount=function(a,b){try{var d=0===b?0:b||(B.count(h.metricsTag+":"+a)||0)+1;B.count(h.metricsTag+":"+a,d);return d}catch(g){return Ua.log("SushiClient.ueCount error: "+
g,"ERROR"),0}};this.browserWindow=J().defaultView;this.endpoint=c;this.metricsTag=f;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=sc(this.browserWindow);this.compressor=this.buildCompressor();D.addEventListener(this.browserWindow,"beforeunload",
100,this.onBeforeUnload);D.addEventListener(J(),"visibilitychange",100,this.onBeforeUnload);D.addEventListener(this.browserWindow,"blur",100,this.onBeforeUnload);D.addEventListener(this.browserWindow,"pagehide",100,this.onBeforeUnload);this.browserWindow.app||(this.browserWindow.app={});var e=this.browserWindow.app.willDisappear;this.browserWindow.app.willDisappear=function(){e&&e();h.onBeforeUnload()}}}(),R;(function(c){c.VIEWED="VIEWED";c.PROGRESS_FIVE_SECONDS="PROGRESS_5_SEC";c.FIRST_QUARTILE=
"FIRST_QUARTILE";c.MIDPOINT="MIDPOINT";c.THIRD_QUARTILE="THIRD_QUARTILE";c.COMPLETE="COMPLETE";c.UNMUTE="UNMUTE"})(R||(R={}));var S;(function(c){c.ICON_TAP="IconTap";c.VIDEO_OFF_SCREEN="VideoOffScreen";c.INHERIT="Inherit";c.WEBKIT_MUTED="WebkitMuted"})(S||(S={}));var fa;(function(c){c.ICON_TAP="IconTap";c.VIDEO_OFF_SCREEN="VideoOffScreen";c.INHERIT="Inherit";c.DEFAULT_ON="DefaultOn"})(fa||(fa={}));var cb;(function(c){c.SINGLE_PAGE="SINGLE_PAGE";c.CROSS_PAGE="CROSS_PAGE"})(cb||(cb={}));var db;(function(c){c.CONTENT_HASH=
"CONTENT_HASH";c.CAMPAIGN_AND_ADV_ID="CAMPAIGN_AND_ADV_ID"})(db||(db={}));var q;(function(c){c.ACE_VIDEO_RESPONSE_RECEIVED="AceVideoResponseReceived";c.AD_FEEDBACK_LOAD_FAILED_FROM_ERR="AdFeedbackLoadFailedFromErr";c.AD_FEEDBACK_LOAD_SUCCEEDED="AdFeedbackLoadSucceeded";c.AD_FEEDBACK_LOAD_POPOVER_OPENED="AdFeedbackPopoverOpened";c.AUDIO_TOGGLE_ICON_DISPLAYED="AudioToggleIconDisplayed";c.BACKGROUND_CLICKED="BackgroundClicked";c.PAUSE_ICON_DISPLAYED="PauseIconDisplayed";c.PROGRESS_BAR_DISPLAYED="ProgressBarDisplayed";
c.BRAND_LOGO_CLICKED="BrandLogoClicked";c.BRAND_CTA_LINK_CLICKED="BrandCtaLinkClicked";c.BRAND_NAME_CLICKED="BrandNameClicked";c.CREATOR_LOGO_CLICKED="CreatorLogoClicked";c.CREATOR_CTA_LINK_CLICKED="CreatorCtaLinkClicked";c.CARD_ITEM_RECEIVED="CardItemReceived";c.CAROUSEL_PAGE_CHANGED="CarouselPageChanged";c.CAPTIONS_ENABLED="CaptionsEnabled";c.CAPTIONS_DISABLED="CaptionsDisabled";c.CAPTIONS_LOAD_FAILURE="CaptionsLoadFailure";c.CTA_BANNER_CLICKED="CtaBannerClicked";c.DUPE="Dupe";c.DUPE_BY_ADVID_CAMPAIGNID=
"DupeByAdvIdCampaignId";c.DUPE_BY_CONTENT_HASH="DupeByContentHash";c.EVENT_BANNER_DISPLAYED="EventBannerDisplayed";c.EVENT_BANNER_CLICKED="EventBannerClicked";c.HEADLINE_CLICKED="HeadlineClicked";c.IMMERSIVE_VIDEO_FAILED="ImmersiveVideoFailed";c.IMMERSIVE_VIDEO_LOADED="ImmersiveVideoLoaded";c.MISSING_BACKGROUND_ELEMENT="MissingBackgroundElement";c.MISSING_BRAND_ELEMENT="MissingBrandElement";c.MISSING_PRODUCT_ELEMENT="MissingProductElement";c.MISSING_PRODUCT_ELEMENTS="MissingProductElements";c.MISSING_VIDEO_ELEMENT=
"MissingVideoElement";c.MISSING_CREATOR_ELEMENT="MissingCreatorElement";c.NO_AD_ERROR="NoAdError";c.NO_VIDEO_SRC_ON_ELEMENT="NoVideoSrcOnElement";c.NUMBER_OF_ADS_LESS_THAN_MIN_ERR="NumberOfAdsLessThanMin";c.PLAYBACK_COMPLETED="PlaybackCompleted";c.PROGRESS_BAR_RESET="ProgressBarReset";c.PLAYBACK_FAILED_TO_START_AFTER_PLAY="PlaybackFailedToStartAfterPlay";c.PRODUCT_CLICKED="ProductClicked";c.PRODUCT_RECEIVED="ProductReceived";c.PRODUCT_TWISTER_VARIATION="ProductTwisterVariation";c.MULTI_PRODUCT_COLLECTION=
"MultiProductCollection";c.REMOTE_OPERATIONS_AJAX_STARTED="RemoteOperationsAjaxStarted";c.REMOTE_OPERATIONS_AJAX_SUCCESSFUL="RemoteOperationsAjaxSuccessful";c.REMOTE_OPERATIONS_ELEMENTS_UPDATED="RemoteOperationsElementsUpdated";c.REMOTE_OPERATIONS_ELEMENTS_NOT_UPDATED="RemoteOperationsElementsNotUpdated";c.REMOTE_OPERATIONS_FAILED="RemoteOperationsFailed";c.TIME_TO_FIRST_FRAME="TimeToFirstFrame";c.VIDEO_ABORTED="VideoAborted";c.VIDEO_BUFFERING_ENDED="VideoBufferingEnded";c.VIDEO_BUFFERING_STARTED=
"VideoBufferingStarted";c.VIDEO_CLEARED_ON_HIDDEN_BROWSER="VideoClearedOnHiddenBrowser";c.VIDEO_CLICKED="VideoClicked";c.VIDEO_DURATION_PLAYED="VideoDurationPlayed";c.VIDEO_LOADED_ON_VISIBLE_BROWSER="VideoLoadedOnVisibleBrowser";c.VIDEO_OFF_SCREEN="VideoOffScreen";c.VIDEO_ON_SCREEN="VideoOnScreen";c.VIDEO_PAUSED="VideoPaused";c.VIDEO_PAUSED_INITIATED="VideoPausedInitiated";c.VIDEO_PAUSE_BUTTON_TRIGGERED="VideoPauseButtonTriggered";c.VIDEO_PLAY_BUTTON_TRIGGERED="VideoPlayButtonTriggered";c.VIDEO_PLAY_FROM_PAUSE=
"VideoPlayFromPause";c.VIDEO_PAUSED_ON_AUTOPLAY_DISABLED="VideoPausedOnAutoplayDisabled";c.VIDEO_PLAYBACK_FAILURE="VideoPlaybackFailure";c.VIDEO_PLAYBACK_INITIATED="VideoPlaybackInitiated";c.VIDEO_PLAYBACK_STARTED="VideoPlaybackStarted";c.VIDEO_PLAY_PROMISE_NOT_SUPPORTED="VideoPlayPromiseNotSupported";c.VIDEO_PREVIEW_IMAGE_NOT_MEDIA_AMAZON="VideoPreviewImageNotMediaAmazon";c.VIDEO_PLAY_PROMISE_REJECTED="VideoPlayPromiseRejected";c.VIDEO_READY_FOR_PLAYBACK="VideoReadyForPlayback";c.VIDEO_SOUND_OFF=
"VideoSoundOff";c.VIDEO_SOUND_ON="VideoSoundOn";c.VIDEO_SUSPENDED="VideoSuspended";c.VIDEO_VIEW="VideoView";c.VM_AD_UNIT_VIEWED="ViewMetricsAdUnitViewed";c.VM_VIDEO_VIEWED="ViewMetricsVideoViewed";c.VM_VIDEO_PROGRESS_FIVE_SECONDS="ViewMetricsVideoProgressFiveSeconds";c.VM_VIDEO_FIRST_QUARTILE="ViewMetricsVideoFirstQuartile";c.VM_VIDEO_MIDPOINT="ViewMetricsVideoMidpoint";c.VM_VIDEO_THIRD_QUARTILE="ViewMetricsVideoThirdQuartile";c.VM_VIDEO_COMPLETE="ViewMetricsVideoComplete";c.VM_VIDEO_UNMUTE="ViewMetricsVideoUnmute";
c.VM_POST_FAILURE="ViewMetricsPostFailure";c.WIDGET_ON_SCREEN="WidgetOnScreen";c.MULTI_ASIN_ADS_RECEIVED="MultiAsinAdsReceived";c.PDP_RENDERED_AS_PC="PDPRenderedAsPC";c.HLS_VIDEO_RENDERED="HLSVideoRendered"})(q||(q={}));var m;(function(c){c.APP_VERSION="appVersion";c.ADVERTISER_ID="advertiserId";c.AUTO_SCROLLED="autoScrolled";c.CAMPAIGN_ID="campaignId";c.CAROUSEL_ITEM_INDEX="carouselItemIndex";c.CAROUSEL_PAGE_NUMBER="carouselPageNumber";c.CC_TOGGLE_CAUSE="ccToggleCause";c.CC_MANDATORY="ccMandatory";
c.CC_SRC="ccSrc";c.CLIENT_ID="clientId";c.CONTINUOUS_PLAYBACK_DURATION_MS="continuousPlaybackDurationMs";c.CURRENT_PAGE_URL="currentPageUrl";c.DEVICE_ENV="deviceEnv";c.DEVICE_MAKE="deviceMake";c.DEVICE_MODEL="deviceModel";c.DEVICE_OS="deviceOs";c.DEVICE_PLATFORM_VERSION="devicePlatformVersion";c.DEVICE_TYPE="deviceType";c.DROPPED_FRAMES="droppedFrames";c.ERROR_CODE="errorCode";c.ERROR_MESSAGE="errorMessage";c.EVENT_TYPE="eventType";c.LAYOUT="layout";c.EXPERIENCE="experience";c.EXPERIENCE_VARIATION=
"experienceVariation";c.HEADLINE="headline";c.IMAGE_URL="imageUrl";c.LANGUAGE="language";c.LINK_URL="linkUrl";c.LOAD_TIME_MS="loadTimeMs";c.LOGIC="logic";c.MARKETPLACE_ID="marketplaceId";c.METRICS_IDENTIFIER="metricsIdentifier";c.METRICS_SEQUENCE_NUMBER="metricsSequenceNumber";c.NETWORK_TYPE="networkType";c.NUMBER_OF_ADS="numberOfAds";c.PAGE_NUMBER="pageNumber";c.PAGE_TYPE="pageType";c.PERCENT_DOWNLOADED="percentDownloaded";c.PREV_CAROUSEL_PAGE_NUMBER="prevCarouselPageNumber";c.PRODUCT_COMPONENTS=
"productComponents";c.PRODUCT_INDEX="productIndex";c.PRODUCT_ASIN="asin";c.TWISTER_VARIATIONS_REQUESTED="twisterVariationsRequested";c.TWISTER_VARIATIONS_REQUEST_SUCCEEDED="twisterVariationsRequestSuceeded";c.TWISTER_VARIATIONS_DETAIL_REQUESTED="twisterVariationsDetailRequested";c.TWISTER_VARIATIONS_CHOSEN="twisterVariationsChosen";c.NUMBER_OF_TWISTER_VARIATIONS_RECEIVED="numberOfTwisterVariationsReceived";c.REASON="reason";c.RETRY_COUNT="retryCount";c.SEARCH_QUERY="searchQuery";c.SOUND_TOGGLE_METHOD=
"soundToggleMethod";c.STAGE="stage";c.STATUS_CODE="statusCode";c.STORE_CTA="storeCta";c.STORE_NAME="storeName";c.STORE_URL="storeUrl";c.TIME_ON_SCREEN_MS="timeOnScreenMs";c.USER_AGENT="userAgent";c.VIDEO_BOUNDARY_CROSSED_TIME_MS="videoBoundaryCrossedTimeMs";c.VIDEO_CURRENT_TIME_MS="videoCurrentTimeMs";c.VIDEO_ORIENTATION="videoOrientation";c.VIDEO_PREVIEW_IMAGE_SRC="videoPreviewImageSrc";c.VIDEO_SRC="videoSrc";c.VIDEO_TOTAL_LENGTH_MS="videoTotalLengthMs";c.VIDEO_TYPE="videoType";c.WAS_BUFFERING="wasBuffering";
c.WEBLABS="weblabs";c.WIDGET_GROUP_ID="widgetGroupId";c.WIDGET_INDEX="widgetIndex";c.WIDGET_TYPE="widgetType";c.VIEW_METRICS_FAILURE="viewMetricsFailure";c.MULTI_ASIN_ADS_COUNT="MultiAsinAdsCount";c.HLS_VIDEO_SRC="hlsVideoSrc"})(m||(m={}));var eb={shouldLogViewMetrics:!1,shouldBillViewMetrics:!0,shouldLogAdUnitViewMetrics:!1},fb=function(){return function(c,f,h){var e=this;void 0===h&&(h=eb);this.reportPDPRenderedAsPC=function(a){a=e.newEvent(q.PDP_RENDERED_AS_PC,a);e.recordEvent(a)};this.reportHLSVideoRendered=
function(a){a=e.newEvent(q.HLS_VIDEO_RENDERED,a);e.recordEvent(a)};this.setClientMetricsContext=function(a){e.clientMetricsContext=a};this.reportWidgetOnScreen=function(){var a=e.newEvent(q.WIDGET_ON_SCREEN,e.resetVideoAdAttributes());e.recordEvent(a)};this.reportResponseReceived=function(a){var b=e.newEvent(q.ACE_VIDEO_RESPONSE_RECEIVED,e.resetVideoAdAttributes());b[m.NUMBER_OF_ADS]=null!==a&&void 0!==a?a:1;e.recordEvent(b)};this.reportNumAsins=function(a){var b=e.newEvent(q.MULTI_ASIN_ADS_RECEIVED);
b[m.MULTI_ASIN_ADS_COUNT]=a;e.recordEvent(b)};this.reportNoAdError=function(){var a=e.newEvent(q.NO_AD_ERROR,e.resetVideoAdAttributes());e.recordEvent(a)};this.reportNumOfAdsLessThanMinRequirement=function(){var a=e.newEvent(q.NUMBER_OF_ADS_LESS_THAN_MIN_ERR,e.resetVideoAdAttributes());e.recordEvent(a)};this.reportAdFeedbackLoadFailedFromErr=function(a){var b=e.newEvent(q.AD_FEEDBACK_LOAD_FAILED_FROM_ERR,e.resetVideoAdAttributes());b[m.ERROR_MESSAGE]=a;e.recordEvent(b)};this.reportAdFeedbackLoadSucceeded=
function(){var a=e.newEvent(q.AD_FEEDBACK_LOAD_SUCCEEDED,e.resetVideoAdAttributes());e.recordEvent(a)};this.reportAdFeedbackPopoverOpened=function(){var a=e.newEvent(q.AD_FEEDBACK_LOAD_POPOVER_OPENED,e.resetVideoAdAttributes());e.recordEvent(a)};this.reportImmersiveVideoLoaded=function(a){a=e.newEvent(q.IMMERSIVE_VIDEO_LOADED,a);e.recordEvent(a)};this.reportImmersiveVideoFailed=function(a,b){b=e.newEvent(q.IMMERSIVE_VIDEO_FAILED,b);b[m.ERROR_MESSAGE]=a;e.recordEvent(b)};this.reportVideoReadyForPlayback=
function(a,b,d,g,k){var l=e.newEvent(q.VIDEO_READY_FOR_PLAYBACK,g);l[m.LOAD_TIME_MS]=a;l[m.RETRY_COUNT]=b;l[m.PERCENT_DOWNLOADED]=d;l[m.VIDEO_TOTAL_LENGTH_MS]=k;l[m.VIDEO_ORIENTATION]=g.videoOrientation;e.recordEvent(l)};this.reportVideoPlaybackInitiated=function(a,b){b=e.newEvent(q.VIDEO_PLAYBACK_INITIATED,b);b[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(b)};this.reportVideoPlaybackStarted=function(a,b,d,g){g=e.newEvent(q.VIDEO_PLAYBACK_STARTED,g);g[m.VIDEO_CURRENT_TIME_MS]=a;g[m.PERCENT_DOWNLOADED]=
b;g[m.DROPPED_FRAMES]=d;e.recordEvent(g)};this.reportTimeToFirstFrame=function(a,b,d,g){g=e.newEvent(q.TIME_TO_FIRST_FRAME,g);g[m.LOAD_TIME_MS]=a;g[m.PERCENT_DOWNLOADED]=b;g[m.DROPPED_FRAMES]=d;e.recordEvent(g)};this.reportVideoBufferingStarted=function(a,b,d,g){g=e.newEvent(q.VIDEO_BUFFERING_STARTED,g);g[m.VIDEO_CURRENT_TIME_MS]=a;g[m.PERCENT_DOWNLOADED]=b;g[m.DROPPED_FRAMES]=d;e.recordEvent(g)};this.reportVideoBufferingEnded=function(a,b,d,g){g=e.newEvent(q.VIDEO_BUFFERING_ENDED,g);g[m.VIDEO_CURRENT_TIME_MS]=
a;g[m.PERCENT_DOWNLOADED]=b;g[m.DROPPED_FRAMES]=d;e.recordEvent(g)};this.reportVideoPlaybackFailure=function(a,b,d,g){g=e.newEvent(q.VIDEO_PLAYBACK_FAILURE,g);g[m.VIDEO_CURRENT_TIME_MS]=a;g[m.ERROR_MESSAGE]=b;g[m.ERROR_CODE]=d;e.recordEvent(g)};this.reportVideoDurationPlayed=function(a,b,d,g){g=e.newEvent(q.VIDEO_DURATION_PLAYED,g);g[m.VIDEO_BOUNDARY_CROSSED_TIME_MS]=a;g[m.PERCENT_DOWNLOADED]=b;g[m.DROPPED_FRAMES]=d;e.recordEvent(g)};this.reportPlaybackCompleted=function(a,b,d){d=e.newEvent(q.PLAYBACK_COMPLETED,
d);d[m.VIDEO_CURRENT_TIME_MS]=a;d[m.DROPPED_FRAMES]=b;e.recordEvent(d)};this.reportVideoOnScreen=function(a,b){b=e.newEvent(q.VIDEO_ON_SCREEN,b);b[m.PERCENT_DOWNLOADED]=a;e.recordEvent(b)};this.reportVideoClearedOnHiddenBrowser=function(a){a=e.newEvent(q.VIDEO_CLEARED_ON_HIDDEN_BROWSER,a);e.recordEvent(a)};this.reportVideoLoadedOnVisibleBrowser=function(a){a=e.newEvent(q.VIDEO_LOADED_ON_VISIBLE_BROWSER,a);e.recordEvent(a)};this.reportVideoOffScreen=function(a,b,d,g){g=e.newEvent(q.VIDEO_OFF_SCREEN,
g);g[m.TIME_ON_SCREEN_MS]=a;g[m.WAS_BUFFERING]=b;g[m.VIDEO_CURRENT_TIME_MS]=d;e.recordEvent(g)};this.reportVideoView=function(a,b,d){void 0===b&&(b=!1);d=e.newEvent(q.VIDEO_VIEW,d);d[m.CONTINUOUS_PLAYBACK_DURATION_MS]=a;e.recordEvent(d);b&&e.sushiClient.flush(!0)};this.reportVideoPauseInitiated=function(a,b){b=e.newEvent(q.VIDEO_PAUSED_INITIATED,b);b[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(b)};this.reportVideoPlayFromPause=function(a,b){b=e.newEvent(q.VIDEO_PLAY_FROM_PAUSE,b);b[m.VIDEO_CURRENT_TIME_MS]=
a;e.recordEvent(b)};this.reportVideoPaused=function(a,b,d,g){g=e.newEvent(q.VIDEO_PAUSED,g);g[m.VIDEO_CURRENT_TIME_MS]=a;g[m.PERCENT_DOWNLOADED]=b;g[m.DROPPED_FRAMES]=d;e.recordEvent(g)};this.reportVideoSoundOn=function(a,b,d){d=e.newEvent(q.VIDEO_SOUND_ON,d);d[m.VIDEO_CURRENT_TIME_MS]=a;d[m.SOUND_TOGGLE_METHOD]=b;e.recordEvent(d)};this.reportVideoSoundOff=function(a,b,d){d=e.newEvent(q.VIDEO_SOUND_OFF,d);d[m.VIDEO_CURRENT_TIME_MS]=a;d[m.SOUND_TOGGLE_METHOD]=b;e.recordEvent(d)};this.reportCaptionsOn=
function(a,b,d,g){b=e.newEvent(q.CAPTIONS_ENABLED,b);b[m.LANGUAGE]=d;b[m.CC_MANDATORY]=g;b[m.CC_TOGGLE_CAUSE]=a;e.recordEvent(b)};this.reportCaptionsOff=function(a,b,d,g){b=e.newEvent(q.CAPTIONS_DISABLED,b);b[m.LANGUAGE]=d;b[m.CC_MANDATORY]=g;b[m.CC_TOGGLE_CAUSE]=a;e.recordEvent(b)};this.reportCaptionsLoadFailure=function(a){var b=e.newEvent(q.CAPTIONS_LOAD_FAILURE,a);b[m.CC_SRC]=a.ccSrc;e.recordEvent(b)};this.reportDupe=function(a,b,d){a=e.newEvent(q.DUPE,a);a[m.LOGIC]=b;a[m.REASON]=d;e.recordEvent(a)};
this.reportDupeByCampaignAndAdvertiserId=function(a){a=e.newEvent(q.DUPE_BY_ADVID_CAMPAIGNID,a);e.recordEvent(a)};this.reportDupeByContentHash=function(a){a=e.newEvent(q.DUPE_BY_CONTENT_HASH,a);e.recordEvent(a)};this.reportVideoClicked=function(a,b){b=e.newEvent(q.VIDEO_CLICKED,b,e.getDynamicMetricsAttributes());b[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(b)};this.reportProductClicked=function(a,b,d){b=e.newEvent(q.PRODUCT_CLICKED,b,e.getDynamicMetricsAttributes());b[m.VIDEO_CURRENT_TIME_MS]=a;if(d){a=
d.productComponents;var g=d.productIndex;b[m.PRODUCT_ASIN]=d.asin;b[m.PRODUCT_INDEX]=g;b[m.PRODUCT_COMPONENTS]=a}e.recordEvent(b)};this.reportBackgroundClicked=function(a,b){b=e.newEvent(q.BACKGROUND_CLICKED,b,e.getDynamicMetricsAttributes());b[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(b)};this.reportProductReceived=function(a,b,d){b=e.newEvent(q.PRODUCT_RECEIVED,b,e.getDynamicMetricsAttributes());b[m.VIDEO_CURRENT_TIME_MS]=a;if(d){a=d.productComponents;var g=d.productIndex;b[m.PRODUCT_ASIN]=d.asin;
b[m.PRODUCT_COMPONENTS]=a;b[m.PRODUCT_INDEX]=g}e.recordEvent(b)};this.reportProductTwisterVariations=function(a,b){a=e.newEvent(q.PRODUCT_TWISTER_VARIATION,a);if(b&&b.twisterVariationProperties){var d=b.twisterVariationProperties;b=d.twisterVariationsRequested;var g=d.twisterVariationsRequestSucceeded,k=d.twisterVariationDetailsRequested,l=d.numberOfTwisterVariationsAvailable;d=d.asinForTwisterChosen;a[m.TWISTER_VARIATIONS_REQUESTED]=null!==b&&void 0!==b?b:!1;a[m.TWISTER_VARIATIONS_REQUEST_SUCCEEDED]=
null!==g&&void 0!==g?g:!1;a[m.NUMBER_OF_TWISTER_VARIATIONS_RECEIVED]=l;a[m.TWISTER_VARIATIONS_DETAIL_REQUESTED]=null!==k&&void 0!==k?k:!1;a[m.TWISTER_VARIATIONS_CHOSEN]=d}e.recordEvent(a)};this.reportProductAttributes=function(a,b){a=e.newEvent(q.MULTI_PRODUCT_COLLECTION,a);if(b){var d=b.productUrl;a[m.PRODUCT_ASIN]=b.asin;a[m.LINK_URL]=d}e.recordEvent(a)};this.reportPlaybackFailedToStartAfterPlay=function(a){a=e.newEvent(q.PLAYBACK_FAILED_TO_START_AFTER_PLAY,a);e.recordEvent(a)};this.reportAudioToggleIconDisplayed=
function(a){a=e.newEvent(q.AUDIO_TOGGLE_ICON_DISPLAYED,a);e.recordEvent(a)};this.reportProgressBarDisplayed=function(a){a=e.newEvent(q.PROGRESS_BAR_DISPLAYED,a);e.recordEvent(a)};this.reportProgressBarReset=function(a){a=e.newEvent(q.PROGRESS_BAR_RESET,a);e.recordEvent(a)};this.reportPauseIconDisplayed=function(a){a=e.newEvent(q.PAUSE_ICON_DISPLAYED,a);e.recordEvent(a)};this.reportVideoPauseButtonTriggered=function(a,b){b=e.newEvent(q.VIDEO_PAUSE_BUTTON_TRIGGERED,b);b[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(b)};
this.reportVideoPausedOnAutoplayDisabled=function(a){a=e.newEvent(q.VIDEO_PAUSED_ON_AUTOPLAY_DISABLED,a);e.recordEvent(a)};this.reportVideoAborted=function(a,b){b=e.newEvent(q.VIDEO_ABORTED,b);b[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(b)};this.reportVideoSuspended=function(a,b){b=e.newEvent(q.VIDEO_SUSPENDED,b);b[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(b)};this.reportVideoPlayPromiseRejected=function(a,b){b=e.newEvent(q.VIDEO_PLAY_PROMISE_REJECTED,b);b[m.ERROR_MESSAGE]=a;e.recordEvent(b)};this.reportVideoPreviewImageNotMediaAmazon=
function(a){a=e.newEvent(q.VIDEO_PREVIEW_IMAGE_NOT_MEDIA_AMAZON,a);e.recordEvent(a)};this.reportVideoPlayPromiseNotSupported=function(a){a=e.newEvent(q.VIDEO_PLAY_PROMISE_NOT_SUPPORTED,a);e.recordEvent(a)};this.reportMissingVideoElement=function(a){a=e.newEvent(q.MISSING_VIDEO_ELEMENT,a);e.recordEvent(a)};this.reportMissingProductElement=function(a){a=e.newEvent(q.MISSING_PRODUCT_ELEMENT,a);e.recordEvent(a)};this.reportMissingProductElements=function(a){a=e.newEvent(q.MISSING_PRODUCT_ELEMENTS,a);
e.recordEvent(a)};this.reportMissingBackgroundElement=function(a){a=e.newEvent(q.MISSING_BACKGROUND_ELEMENT,a);e.recordEvent(a)};this.reportMissingBrandElement=function(a,b){var d,g,k;a=e.newEvent(q.MISSING_BRAND_ELEMENT,a);a[m.STORE_NAME]=null!==(d=null===b||void 0===b?void 0:b.storeName)&&void 0!==d?d:void 0;a[m.STORE_URL]=null!==(g=null===b||void 0===b?void 0:b.storeUrl)&&void 0!==g?g:void 0;a[m.STORE_CTA]=null!==(k=null===b||void 0===b?void 0:b.storeCta)&&void 0!==k?k:void 0;e.recordEvent(a)};
this.reportBrandCtaLinkClicked=function(a,b){b=e.newEvent(q.BRAND_CTA_LINK_CLICKED,b);b[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(b)};this.reportBrandLogoClicked=function(a,b){b=e.newEvent(q.BRAND_LOGO_CLICKED,b);b[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(b)};this.reportBrandNameClicked=function(a,b){b=e.newEvent(q.BRAND_NAME_CLICKED,b);b[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(b)};this.reportCreatorLogoClicked=function(a,b){b=e.newEvent(q.CREATOR_LOGO_CLICKED,b);b[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(b)};
this.reportCreatorCtaClicked=function(a,b){b=e.newEvent(q.CREATOR_CTA_LINK_CLICKED,b);b[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(b)};this.reportCtaBannerClicked=function(a,b){b=e.newEvent(q.CTA_BANNER_CLICKED,b);b[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(b)};this.reportHeadlineClicked=function(a,b){b=e.newEvent(q.HEADLINE_CLICKED,b);b[m.VIDEO_CURRENT_TIME_MS]=a;e.recordEvent(b)};this.reportEventBannerDisplayed=function(a,b){b=e.newEvent(q.EVENT_BANNER_DISPLAYED,b);b[m.LAYOUT]=a;e.recordEvent(b)};
this.reportEventBannerClicked=function(a,b){b=e.newEvent(q.EVENT_BANNER_CLICKED,b);b[m.LAYOUT]=a;e.recordEvent(b)};this.reportMissingCreatorElement=function(a){a=e.newEvent(q.MISSING_CREATOR_ELEMENT,a);e.recordEvent(a)};this.reportCarouselPageChanged=function(a,b,d){void 0===d&&(d=!1);var g=e.newEvent(q.CAROUSEL_PAGE_CHANGED);g[m.CAROUSEL_PAGE_NUMBER]=a;g[m.PREV_CAROUSEL_PAGE_NUMBER]=b;g[m.AUTO_SCROLLED]=d;e.recordEvent(g)};this.reportCardItemReceived=function(a,b){b=e.newEvent(q.CARD_ITEM_RECEIVED,
b);b[m.CAROUSEL_PAGE_NUMBER]=a;e.recordEvent(b)};this.reportVideoPlayButtonTriggered=function(a,b){b=e.newEvent(q.VIDEO_PLAY_BUTTON_TRIGGERED,b);b[m.CAROUSEL_ITEM_INDEX]=a;e.recordEvent(b)};this.reportRemoteOperationsAjaxStarted=function(){var a=e.newEvent(q.REMOTE_OPERATIONS_AJAX_STARTED);e.recordEvent(a)};this.reportRemoteOperationsAjaxSuccessful=function(a){var b=e.newEvent(q.REMOTE_OPERATIONS_AJAX_SUCCESSFUL);b[m.LOAD_TIME_MS]=a;e.recordEvent(b)};this.reportRemoteOperationsElementsUpdated=function(){var a=
e.newEvent(q.REMOTE_OPERATIONS_ELEMENTS_UPDATED);e.recordEvent(a)};this.reportRemoteOperationsElementsNotUpdated=function(){var a=e.newEvent(q.REMOTE_OPERATIONS_ELEMENTS_NOT_UPDATED);e.recordEvent(a)};this.reportRemoteOperationsFailed=function(){var a=e.newEvent(q.REMOTE_OPERATIONS_FAILED);e.recordEvent(a)};this.reportViewMetricsAdUnitViewed=function(a,b,d){if(e.getShouldLogViewMetrics()&&e.getShouldLogAdUnitViewMetrics()){var g=e.newEvent(q.VM_AD_UNIT_VIEWED,a);e.recordEvent(g);b={p:Math.round(100*
d),t:parseFloat((b/1E3).toFixed(3))};e.emitViewMetrics(R.VIEWED,a,b)}};this.reportViewMetricsVideoViewed=function(a,b,d){if(e.getShouldLogViewMetrics()){var g=e.newEvent(q.VM_VIDEO_VIEWED,a);e.recordEvent(g);e.getShouldLogAdUnitViewMetrics()||(b={p:Math.round(100*d),t:parseFloat((b/1E3).toFixed(3))},e.emitViewMetrics(R.VIEWED,a,b))}};this.reportViewMetricsVideoProgressFiveSeconds=function(a){if(e.getShouldLogViewMetrics()){var b=e.newEvent(q.VM_VIDEO_PROGRESS_FIVE_SECONDS,a);e.recordEvent(b);e.emitViewMetrics(R.PROGRESS_FIVE_SECONDS,
a)}};this.reportViewMetricsVideoFirstQuartile=function(a){if(e.getShouldLogViewMetrics()){var b=e.newEvent(q.VM_VIDEO_FIRST_QUARTILE,a);e.recordEvent(b);e.emitViewMetrics(R.FIRST_QUARTILE,a)}};this.reportViewMetricsVideoMidpoint=function(a){if(e.getShouldLogViewMetrics()){var b=e.newEvent(q.VM_VIDEO_MIDPOINT,a);e.recordEvent(b);e.emitViewMetrics(R.MIDPOINT,a)}};this.reportViewMetricsVideoThirdQuartile=function(a){if(e.getShouldLogViewMetrics()){var b=e.newEvent(q.VM_VIDEO_THIRD_QUARTILE,a);e.recordEvent(b);
e.emitViewMetrics(R.THIRD_QUARTILE,a)}};this.reportViewMetricsVideoComplete=function(a){if(e.getShouldLogViewMetrics()){var b=e.newEvent(q.VM_VIDEO_COMPLETE,a);e.recordEvent(b);e.emitViewMetrics(R.COMPLETE,a)}};this.reportViewMetricsVideoUnmute=function(a){if(e.getShouldLogViewMetrics()){var b=e.newEvent(q.VM_VIDEO_UNMUTE,a);e.recordEvent(b);e.emitViewMetrics(R.UNMUTE,a)}};this.reportViewMetricsPostRequestFailure=function(a,b,d){d=e.newEvent(q.VM_POST_FAILURE,d);d[m.VIEW_METRICS_FAILURE]=a;d[m.ERROR_MESSAGE]=
b;e.recordEvent(d)};this.emitViewMetrics=function(a,b,d){void 0===d&&(d={});if(e.getShouldBillViewMetrics()){var g=b.instrumentationPixelUrl;void 0===g||""===g?e.reportViewMetricsPostRequestFailure(a,"instrumentationPixelUrl is empty or undefined",b):(d=JSON.stringify({v:p.__assign(p.__assign({},d),{def:"iab",event:a}),programType:"SBV"}),g="/"===g.substr(-1)?g+"v/":g+"/v/",nc({onError:function(k){e.reportViewMetricsPostRequestFailure(a,k.message,b)},payload:d,url:g+encodeURI(d)}))}};this.getShouldLogViewMetrics=
function(){return e.viewMetricOptions.shouldLogViewMetrics};this.getShouldLogAdUnitViewMetrics=function(){return e.viewMetricOptions.shouldLogAdUnitViewMetrics};this.getShouldBillViewMetrics=function(){return e.viewMetricOptions.shouldLogViewMetrics&&e.viewMetricOptions.shouldBillViewMetrics};this.recordEvent=function(a){e.sushiClient.processEvent(a)};this.resetVideoAdAttributes=function(){return{advertiserId:void 0,campaignId:void 0,contentHash:void 0,headline:void 0,storeCta:void 0,imageUrl:void 0,
instrumentationPixelUrl:void 0,linkUrl:void 0,metricsIdentifier:void 0,videoPreviewImageSrc:void 0,videoSrc:void 0,hlsVideoSrc:void 0}};this.getDynamicMetricsAttributes=function(){var a,b;return null===(b=null===(a=e.clientMetricsContext)||void 0===a?void 0:a.getDynamicMetricsAttributes)||void 0===b?void 0:b.call(a)};this.newEvent=function(a,b,d){var g=e.getDynamicMetricsAttributes();b=p.__assign(p.__assign(p.__assign({},e.defaultAttributes),b),d||g);b[m.EVENT_TYPE]=a;b[m.METRICS_SEQUENCE_NUMBER]=
e.metricsSequenceNumber++;b[m.NETWORK_TYPE]=navigator&&navigator.connection&&navigator.connection.type;return b};this.browserWindow=J().defaultView;this.metricsSequenceNumber=0;this.sushiClient=new tc(f,"SBVClientMetrics");this.defaultAttributes=p.__assign({},c);this.defaultAttributes[m.USER_AGENT]=navigator.userAgent;this.viewMetricOptions=p.__assign(p.__assign({},eb),h);(f=this.browserWindow&&this.browserWindow.location&&this.browserWindow.location.href)&&(this.defaultAttributes[m.CURRENT_PAGE_URL]=
f);c.pageNumber&&(c=parseInt(c.pageNumber,10),isNaN(c)||(this.defaultAttributes[m.PAGE_NUMBER]=c))}}(),gb=function(c){var f=Ja.getStage();switch(c){default:return"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client."+f+".events";case "A1F83G8C2ARO7P":case "A1PA6795UKMFR9":case "A13V1IB3VIYZZH":case "APJ6JRA9NG5V4":case "A3HOBANJMCMD83":case "A1RKKUPIHCS9HS":case "AJZF8LZ1EJVJN":case "A21TJRUUN4KGV":case "A2XZLSVIQ0F4JT":return"https://unagi-eu.amazon.com/1/events/com.amazon.eel.sbv.client."+
f+".eu";case "A1VC38T7YXB528":return"https://unagi-fe.amazon.com/1/events/com.amazon.eel.sbv.client."+f+".fe"}},uc=["motorola edge","Moto"],hb=function(){return y["default"].capabilities.isAmazonApp?"app":"web"},ib=function(){var c=y["default"].capabilities.android?"android":y["default"].capabilities.ios?"ios":"unrecognized";"unrecognized"===c&&uc.forEach(function(f){navigator.userAgent.includes(f)&&(c="android")});return"desktop"===Ka()?"unrecognized":c},Ka=function(){return y["default"].capabilities.mobile?
"mobile":y["default"].capabilities.tablet?"tablet":"desktop"},ha;(ha||(ha={})).SEARCH_GRID="sbv-transition-search-grid";var O;(function(c){c.SEARCH_GRID="sbv-search-grid";c.SINGLE_ELEMENT="single-element"})(O||(O={}));var vc=y["default"].$,yc=function(){function c(){this.strategy={init:this.init,repaint:this.repaint,resize:this.resize}}c.prototype.register=function(){la["default"].display[O.SEARCH_GRID]||ka["default"].registerStrategy("display",O.SEARCH_GRID,this.strategy)};c.prototype.init=function(f){var h=
f.getAttr(w["default"].FIRST_VISIBLE_ITEM);f.setAttr(w["default"].MIN_GUTTER,0);f.setAttr("currentGutter",0);this.repaint(f);1<h&&(h=Math.ceil(h/f.getAttr(w["default"].PAGE_SIZE)),f.gotoPage(h));wc(f)};c.prototype.repaint=function(f){var h=f.getDimensions().viewport.width,e=f.dom.$carousel.children("li").get(0).getBoundingClientRect();e=e.width?e.width:e.right-e.left;var a=xc(f,h,e);var b=f.dom.$carousel;var d=b.children("li"),g=d.length,k=f.getAttr(w["default"].PAGE_SIZE),l=f.getAttr(w["default"].SET_SIZE);
d=d.first().outerWidth(!0);h=k>=l?h:g*d;b.css("width",h+"px");h={carousel:{outerWidth:b.outerWidth(),width:h},items:[]};for(b=0;b<g;b++)h.items.push({outerWidth:d,width:e});f.updateDimensionsCache(h);f.gotoIndex(a,{animationDuration:0,ignorePause:!0});f.triggerEvent("repaint")};c.prototype.resize=function(f,h){h.viewport&&void 0!==h.viewport.width&&this.repaint(f)};c.prototype.getStrategy=function(){return this.strategy};return c}(),wc=function(c){c.onChange(w["default"].PAGE_NUMBER,function(){c.getAttr(w["default"].HIDE_OFF_SCREEN)&&
c.dom.$carousel.children("li").css("visibility","")});c.onChange(w["default"].ANIMATING,function(f){if(!f&&c.getAttr(w["default"].HIDE_OFF_SCREEN)){var h=c.getAttr(w["default"].FIRST_VISIBLE_ITEM)-1;var e=h+c.getAttr(w["default"].PAGE_SIZE)-1;c.dom.$carousel.children("li").each(function(a,b){a=a>=h&&a<=e;vc(b).css("visibility",a?"":"hidden")})}})},xc=function(c,f,h){var e=c.getAttr(w["default"].TOTAL_PAGES),a=c.getAttr(w["default"].PAGE_NUMBER),b=c.getAttr(w["default"].FIRST_VISIBLE_ITEM),d=c.getAttr(w["default"].HIDE_OFF_SCREEN),
g=c.dom.$carousel.children("li");f=zc(c,f,h);var k=(a-1)*f+1;c.setAttr(w["default"].PAGE_SIZE,f);a>e?(b=(e-1)*f+1,c.setAttr(w["default"].PAGE_NUMBER,e),c.setAttr(w["default"].FIRST_VISIBLE_ITEM,b)):b!==k&&(e=Math.ceil(b/f),b=(e-1)*f+1,c.setAttr(w["default"].PAGE_NUMBER,e),c.setAttr(w["default"].FIRST_VISIBLE_ITEM,b));var l=b-1;var n=l+f-1;g.each(function(r,t){t.style.visibility=!d||r>=l&&r<=n?"":"hidden";t.style.width=h+"px"});return b},zc=function(c,f,h){c=0;if(0<h)for(;-.5<f;)c++,f-=h;0>f&&c--;
return y["default"].isFiniteNumber(c)&&0<c?c:1},Ac=function(){return function(){var c=this;this.updateRepaint=function(f){f.repaint=function(h){var e=h.getAttr("minimum_gutter_width"),a=h.getAttr("set_size"),b=h.dom.$carousel.children("li"),d=b.width();d-=2*e;b.css({width:d+"px",margin:"0 "+e+"px"});e=d+2*e;b=e*a;h.dom.$carousel.width(b);for(b={carousel:{width:b},items:[]};a--;)b.items[a]={width:d,outerWidth:e};h.updateDimensionsCache(b);h.gotoIndex(h.getAttr("firstVisibleItem"),{animationDuration:0,
ignorePause:!0});h.triggerEvent("repaint")}};this.getStrategy=function(){return c.strategy};this.register=function(){la["default"].display[O.SINGLE_ELEMENT]||ka["default"].registerStrategy("display",O.SINGLE_ELEMENT,c.strategy)};this.strategy=y["default"].copy(la["default"].display.single);this.updateRepaint(this.strategy)}}(),Bc=function(){function c(){}c.registerStrategy=function(f){switch(f){case O.SEARCH_GRID:(new yc).register();break;case O.SINGLE_ELEMENT:(new Ac).register();break;default:throw Error("Invalid carousel Strategy type");
}};return c}(),Ec=function(){return function(){var c=this;this.register=function(){la["default"].transition[ha.SEARCH_GRID]||ka["default"].registerStrategy("transition",ha.SEARCH_GRID,c.strategy)};this.gotoPage=function(f,h,e){var a=f.getAttr(w["default"].TOTAL_PAGES),b=f.getAttr(w["default"].CIRCULAR),d=f.getAttr(w["default"].PAGE_SIZE),g=f.getAttr(w["default"].SET_SIZE),k=d*(h-1)+1;e=e||{};jb(f,e);0<h&&h<=a&&f.setAttr(w["default"].PAGE_NUMBER,h);!b&&1>h?(h=1,e.animationDuration=NaN):!b&&h>a&&(h=
a,e.animationDuration=Math.pow(f.getAttr(w["default"].ANIMATION_SPEED),f.getAttr(w["default"].SPRINGINESS)));h===a&&(k=Math.min(k,g-d+1));c.gotoIndex(f,k,e)};this.gotoIndex=function(f,h,e){e=e||{};jb(f,e);var a=f.getAttr(w["default"].CIRCULAR)&&!f.getAttr(w["default"].CURRENTLY_WRAPPING);var b=e.callback;var d=null;var g=f.getViewportWidth();Cc(f,h);f.setAttr(w["default"].FIRST_VISIBLE_ITEM,h);if(1>h){if(a){d=-g;var k=function(){b&&b();c.wrapToLast(f)}}}else h>f.getAttr(w["default"].SET_SIZE)?a&&
(d=f.getAttr(w["default"].CURRENT_PIXEL)+g,k=function(){b&&b();c.wrapToFirst(f)}):d=f.getItemOffset(h);Dc(f,e,k,b);null!==d&&c.strategy.gotoPixel(f,d,e)};this.getStrategy=function(){return c.strategy};this.strategy=y["default"].copy(la["default"].transition.slideHorizontal);this.strategy.gotoPage=this.gotoPage;this.strategy.gotoIndex=this.gotoIndex}}(),Cc=function(c,f){var h=c.getAttr(w["default"].TOTAL_PAGES),e=c.getAttr(w["default"].PAGE_NUMBER),a=c.getAttr(w["default"].PAGE_SIZE),b=c.getAttr(w["default"].SET_SIZE),
d=Math.ceil(f/a);f===b-a+1&&d!==e&&(d=h);d!==e&&0<d&&d<=h&&c.setAttr(w["default"].PAGE_NUMBER,d)},jb=function(c,f){(void 0===f.animationDuration||0<f.animationDuration)&&!f.silent&&c.setAttr(w["default"].ANIMATING,!0)},Dc=function(c,f,h,e){h?(c.setAttr(w["default"].CURRENTLY_WRAPPING,!0),f.callback=h,f.easingFunction=f.easingFunction||c.getAttr(w["default"].WRAP_EASING),f.animationSpeed=1.3*(y["default"].isFiniteNumber(f.animationSpeed)?f.animationSpeed:c.getAttr(w["default"].ANIMATION_SPEED))):f.callback=
e},Fc=function(){function c(){}c.registerStrategy=function(f){switch(f){case ha.SEARCH_GRID:(new Ec).register();break;default:throw Error("Invalid carousel Strategy type");}};return c}(),T;(function(c){c.CARD_ITEM='[data-type="mbvItem"]';c.BRAND_CONTAINER='[data-type="brandContainer"]';c.BRAND_LOGO_HEADER_CONTAINER='[data-type="brandedLogoHeaderContainer"]'})(T||(T={}));var ba;(ba||(ba={})).SEARCH_GRID="searchGrid";var na;(function(c){c.BrandVideoProduct="BrandVideoProduct";c.BrandVideoStore="BrandVideoStore";
c.ProductWithTintedCta="ProductWithTintedCta"})(na||(na={}));var V=function(){function c(){}c.navigatorInternal=navigator;c.isIOS=function(){return y["default"].capabilities.ios};c.isIOSWebView=function(){return y["default"].capabilities.isAmazonApp&&y["default"].capabilities.ios};c.isWebView=function(){return y["default"].capabilities.isAmazonApp};c.isSafari=function(){return!(!c.navigatorInternal.vendor||!c.navigatorInternal.vendor.match(/apple/i))};return c}(),kb=function(){return function(c,f,
h,e){var a=this;this.viewMetricsHistoryMap={isViewedLogged:!1,isAdUnitViewedLogged:!1,isProgressFiveSecondsLogged:!1,isFirstQuartileLogged:!1,isMidpointLogged:!1,isThirdQuartileLogged:!1,isCompleteLogged:!1,isUnmuteLogged:!1};this.onVideoTimeUpdated=function(b,d,g,k){var l=a.adUnitManager?g:b,n=0;a.adUnitManager&&(n=a.adUnitManager.calculateVideoDurationTotalMsRelativeToAdUnit(g));!a.viewMetricsHistoryMap.isAdUnitViewedLogged&&2E3<=n&&(a.viewMetricsHistoryMap.isAdUnitViewedLogged=!0,g=a.adUnitManager.getAdUnitPercentInView(),
a.metricsManager.reportViewMetricsAdUnitViewed(a.videoAdAttributes,n,g));!a.viewMetricsHistoryMap.isViewedLogged&&2E3<=l&&(a.viewMetricsHistoryMap.isViewedLogged=!0,a.metricsManager.reportViewMetricsVideoViewed(a.videoAdAttributes,l,k));!a.viewMetricsHistoryMap.isProgressFiveSecondsLogged&&5E3<=b&&(a.viewMetricsHistoryMap.isProgressFiveSecondsLogged=!0,a.metricsManager.reportViewMetricsVideoProgressFiveSeconds(a.videoAdAttributes));!a.viewMetricsHistoryMap.isFirstQuartileLogged&&b>=.25*d&&(a.viewMetricsHistoryMap.isFirstQuartileLogged=
!0,a.metricsManager.reportViewMetricsVideoFirstQuartile(a.videoAdAttributes));!a.viewMetricsHistoryMap.isMidpointLogged&&b>=.5*d&&(a.viewMetricsHistoryMap.isMidpointLogged=!0,a.metricsManager.reportViewMetricsVideoMidpoint(a.videoAdAttributes));!a.viewMetricsHistoryMap.isThirdQuartileLogged&&b>=.75*d&&(a.viewMetricsHistoryMap.isThirdQuartileLogged=!0,a.metricsManager.reportViewMetricsVideoThirdQuartile(a.videoAdAttributes))};this.onVideoReadyForPlayback=function(b,d,g,k){a.metricsManager.reportVideoReadyForPlayback(b,
d,g,a.videoAdAttributes,k)};this.onTimeToFirstFrame=function(b,d,g){a.metricsManager.reportTimeToFirstFrame(b,d,g,a.videoAdAttributes)};this.onVideoPlaybackFailure=function(b,d,g){a.metricsManager.reportVideoPlaybackFailure(b,g,d,a.videoAdAttributes)};this.onVideoPlaying=function(b,d,g){a.metricsManager.reportVideoPlaybackStarted(b,d,g,a.videoAdAttributes)};this.onVideoPlaybackPaused=function(b,d,g){a.metricsManager.reportVideoPaused(b,d,g,a.videoAdAttributes)};this.onPlaybackCompleted=function(b,
d){a.viewMetricsHistoryMap.isCompleteLogged||(a.viewMetricsHistoryMap.isCompleteLogged=!0,a.metricsManager.reportViewMetricsVideoComplete(a.videoAdAttributes));a.metricsManager.reportPlaybackCompleted(b,d,a.videoAdAttributes);if(a.eventHandlerOptions&&a.eventHandlerOptions.onPlaybackCompletedCallback)a.eventHandlerOptions.onPlaybackCompletedCallback()};this.onVideoBufferingStarted=function(b,d,g){a.bufferStartTimeMs=b;a.metricsManager.reportVideoBufferingStarted(b,d,g,a.videoAdAttributes)};this.onVideoBufferingEnded=
function(b,d,g){a.bufferStartTimeMs=0;a.metricsManager.reportVideoBufferingEnded(b,d,g,a.videoAdAttributes)};this.onVideoPlaybackFailedAfterPlayError=function(){a.metricsManager.reportPlaybackFailedToStartAfterPlay(a.videoAdAttributes)};this.onVideoAborted=function(b){a.metricsManager.reportVideoAborted(b,a.videoAdAttributes)};this.onVideoSuspended=function(b){a.metricsManager.reportVideoSuspended(b,a.videoAdAttributes)};this.onVideoPlayPromiseRejected=function(b){a.metricsManager.reportVideoPlayPromiseRejected(b,
a.videoAdAttributes)};this.onVideoPlayPromiseNotSupported=function(){a.metricsManager.reportVideoPlayPromiseNotSupported(a.videoAdAttributes)};this.onVideoMuted=function(b,d){a.metricsManager.reportVideoSoundOff(b,d,a.videoAdAttributes)};this.onVideoUnmuted=function(b,d){a.viewMetricsHistoryMap.isUnmuteLogged||(a.viewMetricsHistoryMap.isUnmuteLogged=!0,a.metricsManager.reportViewMetricsVideoUnmute(a.videoAdAttributes));a.metricsManager.reportVideoSoundOn(b,d,a.videoAdAttributes)};this.onCcOn=function(b,
d,g){a.metricsManager.reportCaptionsOn(b,a.videoAdAttributes,d,g)};this.onCcOff=function(b,d,g){a.metricsManager.reportCaptionsOff(b,a.videoAdAttributes,d,g)};this.onCcLoadFailure=function(){a.metricsManager.reportCaptionsLoadFailure(a.videoAdAttributes)};this.onVideoDurationPlayed=function(b,d,g){a.metricsManager.reportVideoDurationPlayed(b,d,g,a.videoAdAttributes)};this.onVideoClicked=function(b){var d;a.metricsManager.reportVideoClicked(b,a.videoAdAttributes);if(null===(d=a.eventHandlerOptions)||
void 0===d?0:d.onImmersiveVideoCallback)a.eventHandlerOptions.onImmersiveVideoCallback(a.videoAdAttributes)};this.onVideoOnScreen=function(b){a.metricsManager.reportVideoOnScreen(b,a.videoAdAttributes)};this.onVideoOffScreen=function(b,d){a.metricsManager.reportVideoOffScreen(b,0!==a.bufferStartTimeMs,d,a.videoAdAttributes)};this.onVideoPlaybackInitiated=function(b){a.metricsManager.reportVideoPlaybackInitiated(b,a.videoAdAttributes)};this.onVideoPlayFromPause=function(b){a.metricsManager.reportVideoPlayFromPause(b,
a.videoAdAttributes)};this.onVideoPauseInitiated=function(b){a.metricsManager.reportVideoPauseInitiated(b,a.videoAdAttributes)};this.onProgressBarReset=function(){a.metricsManager.reportProgressBarReset(a.videoAdAttributes)};this.onVideoPreviewImageNotMediaAmazon=function(){a.metricsManager.reportVideoPreviewImageNotMediaAmazon(a.videoAdAttributes)};this.onVideoPauseButtonTriggered=function(b){a.metricsManager.reportVideoPauseButtonTriggered(b,a.videoAdAttributes)};this.onVideoViewed=function(b){a.metricsManager.reportVideoView(b,
V.isIOSWebView(),a.videoAdAttributes)};this.onVideoClearedOnHiddenBrowser=function(){a.metricsManager.reportVideoClearedOnHiddenBrowser(a.videoAdAttributes)};this.onVideoLoadedOnVisibleBrowser=function(){a.metricsManager.reportVideoLoadedOnVisibleBrowser(a.videoAdAttributes)};this.onAudioToggleIconDisplayed=function(){a.metricsManager.reportAudioToggleIconDisplayed(a.videoAdAttributes)};this.onPauseIconDisplayed=function(){a.metricsManager.reportPauseIconDisplayed(a.videoAdAttributes)};this.onVideoPausedDueToAutoplayDisabled=
function(){a.metricsManager.reportVideoPausedOnAutoplayDisabled(a.videoAdAttributes)};this.onProgressBarDisplayed=function(){a.metricsManager.reportProgressBarDisplayed(a.videoAdAttributes)};this.metricsManager=c;this.videoAdAttributes=f;this.bufferStartTimeMs=0;this.eventHandlerOptions=h;this.adUnitManager=e}}(),lb=function(){return function(c,f){var h=this;this.reportIfBoundaryCrossed=function(e,a,b,d,g){h.isValidBoundaryTime(b)&&(e<=a?h.insideInterval(e,a)&&h.callback(h.boundaryTime,d,g):(h.insideInterval(0,
a)||h.insideInterval(e,b))&&h.callback(h.boundaryTime,d,g))};this.insideInterval=function(e,a){return h.boundaryTime>e&&h.boundaryTime<=a};this.isValidBoundaryTime=function(e){return 0<=h.boundaryTime&&h.boundaryTime<=e};this.boundaryTime=c;this.callback=f}}(),La=function(){function c(){}c.getPercentInView=function(f,h){var e=J().defaultView;try{var a=e.innerWidth||e.clientWidth||0,b=e.innerHeight||e.clientHeight||0,d=c.getNormalizedBoundingRect(f),g=c.getViewableSegment(d.top,d.bottom,b),k=c.getViewableSegment(d.left,
d.right,a);f=void 0;f=(null===h||void 0===h?0:h.shouldAreaOnlyUseElementWidth)?d.width:Math.min(d.width,a);return g*k/(d.height*f)}catch(l){return 0}};c.getViewableSegment=function(f,h,e){return f>e&&h>e?0:Math.min(0<f?e-f:0<h?Math.min(h,e):0,h-f)};c.getNormalizedBoundingRect=function(f){f=f.getBoundingClientRect();f.height=f.height||f.bottom-f.top;f.width=f.width||f.right-f.left;return f};return c}(),G;(function(c){c.PLAYING="playing";c.PAUSED="paused";c.BUFFERING="buffering";c.INITIATED="initiated";
c.END="ended"})(G||(G={}));var Gc=function(){return function(c,f,h,e,a){var b=this;void 0===h&&(h=[]);void 0===e&&(e=[]);void 0===a&&(a=u["default"].cardRoot);this.play=function(d){b.initiatedPlayTime||(b.initiatedPlayTime=d);return b.playbackState!==G.PLAYING&&b.videoElement.paused?(d=b.playInternal())?d:Promise.reject("NotSupported"):Promise.resolve()};this.pause=function(){b.playbackState!==G.PAUSED&&b.playbackState===G.PLAYING&&(b.playbackState=G.PAUSED,b.videoElement.pause())};this.seekToStart=
function(){b.accrueContinuousPlaybackDuration(b.getCurrentTimeMs());b.lastOnTimeUpdateCurrentTimeMs=0;b.videoElement.currentTime=0};this.mute=function(){b.videoElement.muted=!0};this.unmute=function(){b.videoElement.muted=!1};this.isMuted=function(){return b.videoElement.muted};this.toggleCaptions=function(d){b.videoElement.textTracks[0].mode=d?"showing":"hidden"};this.getCaptionLang=function(){return null!=b.videoElement.textTracks[0].language?b.videoElement.textTracks[0].language:"No Language Given"};
this.getCurrentTimeMs=function(){return Math.round(1E3*b.videoElement.currentTime)};this.getDurationMs=function(){return Math.round(1E3*b.videoElement.duration)};this.getDroppedFrames=function(){return b.videoElement.getVideoPlaybackQuality?b.videoElement.getVideoPlaybackQuality().droppedVideoFrames:void 0!==b.videoElement.webkitDroppedFrameCount?b.videoElement.webkitDroppedFrameCount:-1};this.getContinuousPlaybackDurationMs=function(){return b.continuousDurationAccruedPlayTimeMs+(b.getCurrentTimeMs()-
b.continuousDurationStartTimeMs)};this.resetContinuousPlaybackDurationMs=function(){var d=b.getCurrentTimeMs();b.continuousDurationAccruedPlayTimeMs=0;d===b.getDurationMs()?b.continuousDurationStartTimeMs=0:b.continuousDurationStartTimeMs=d;b.continuousDurationBoundaryChecks.forEach(function(g){g.resetReported()})};this.getPercentDownloaded=function(){var d=b.videoElement.buffered;if(!d)return 0;for(var g=0,k=0;k<d.length;k++)g+=d.end(k)-d.start(k);return g/b.videoElement.duration};this.load=function(){b.videoElement.load()};
this.loadVideoOnBrowserVisible=function(){var d=b.videoElement.dataset.videoSource;!b.videoElement.src&&d&&(b.videoElement.src=d,b.load(),b.eventHandler.onVideoLoadedOnVisibleBrowser())};this.clear=function(){b.videoElement.dataset.videoSource=b.videoElement.src;b.videoElement.removeAttribute("src");b.load();b.eventHandler.onVideoClearedOnHiddenBrowser()};this.getDateTime=function(){return Date.now()};this.playInternal=function(){return b.videoElement.play()};this.videoOnCanPlayEvent=function(){b.stopVideoLoadingAnimation();
if(!b.assetLoaded){var d=b.getDateTime()-b.loadStartTime;b.eventHandler.onVideoReadyForPlayback(d,b.retryLoadCount,b.getPercentDownloaded(),b.getDurationMs());b.assetLoaded=!0}};this.stopVideoLoadingAnimation=function(){if(b.isVideoLoadingAnimationVisible){var d=b.videoContainer.querySelector("[data-type=loadingAnimation]");d&&(d.style.visibility="hidden",b.isVideoLoadingAnimationVisible=!1)}};this.videoOnErrorEvent=function(){!b.assetLoaded&&3>b.retryLoadCount?(b.retryLoadCount++,setTimeout(b.videoElement.load.bind(b.videoElement),
2E3)):(b.stopVideoLoadingAnimation(),b.handleVideoPlaybackFailureEvent())};this.videoOnPlayingEvent=function(){b.handleFirstFramePlayedEvent();if(b.playbackState===G.BUFFERING)b.eventHandler.onVideoBufferingEnded(b.getCurrentTimeMs(),b.getPercentDownloaded(),b.getDroppedFrames());if(b.playbackState!==G.END)b.eventHandler.onVideoPlaying(b.getCurrentTimeMs(),b.getPercentDownloaded(),b.getDroppedFrames());b.playbackState=G.PLAYING};this.videoOnPauseEvent=function(){b.videoElement.currentTime!==b.videoElement.duration&&
(b.playbackState=G.PAUSED,b.eventHandler.onVideoPlaybackPaused(b.getCurrentTimeMs(),b.getPercentDownloaded(),b.getDroppedFrames()))};this.videoOnEndedEvent=function(){return p.__awaiter(b,void 0,void 0,function(){return p.__generator(this,function(d){switch(d.label){case 0:return this.playbackState=G.END,this.accrueContinuousPlaybackDuration(this.getDurationMs()),this.eventHandler.onPlaybackCompleted(this.getDurationMs(),this.getDroppedFrames()),this.videoElement.dataset.disableLooping&&"false"!==
this.videoElement.dataset.disableLooping?[3,2]:[4,this.playInternal()];case 1:d.sent(),d.label=2;case 2:return[2]}})})};this.videoOnWaitingEvent=function(){b.playbackState=G.BUFFERING;b.eventHandler.onVideoBufferingStarted(b.getCurrentTimeMs(),b.getPercentDownloaded(),b.getDroppedFrames())};this.videoOnTimeUpdateEvent=function(){var d=b.getCurrentTimeMs(),g=b.getContinuousPlaybackDurationMs();b.continuousDurationBoundaryChecks.forEach(function(l){l.reportIfBoundaryCrossed(g)});b.boundaryChecks.forEach(function(l){l.reportIfBoundaryCrossed(b.lastOnTimeUpdateCurrentTimeMs,
d,b.getDurationMs(),b.getPercentDownloaded(),b.getDroppedFrames())});b.lastOnTimeUpdateCurrentTimeMs=d;var k=La.getPercentInView(b.videoElement);b.eventHandler.onVideoTimeUpdated(d,b.getDurationMs(),g,k)};this.videoOnAbortEvent=function(){b.stopVideoLoadingAnimation();b.eventHandler.onVideoAborted(b.getCurrentTimeMs())};this.videoOnSuspendEvent=function(){b.eventHandler.onVideoSuspended(b.getCurrentTimeMs())};this.handleFirstFramePlayedEvent=function(){if(!b.firstFramePlayed){var d=b.getDateTime()-
b.initiatedPlayTime;b.eventHandler.onTimeToFirstFrame(d,b.getPercentDownloaded(),b.getDroppedFrames());b.firstFramePlayed=!0}};this.handleVideoPlaybackFailureEvent=function(){if(b.videoElement.error){var d=b.translateVideoErrorCode(b.videoElement.error.code);b.eventHandler.onVideoPlaybackFailure(b.getCurrentTimeMs(),d,b.videoElement.error.message)}};this.translateVideoErrorCode=function(d){switch(d){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";
case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"UNKNOWN"}};this.accrueContinuousPlaybackDuration=function(d){b.continuousDurationAccruedPlayTimeMs+=d-b.continuousDurationStartTimeMs;b.continuousDurationStartTimeMs=0};this.videoElement=c;this.eventHandler=f;this.lastOnTimeUpdateCurrentTimeMs=this.continuousDurationAccruedPlayTimeMs=this.continuousDurationStartTimeMs=0;this.boundaryChecks=h;this.continuousDurationBoundaryChecks=e;this.playbackState=G.INITIATED;this.loadStartTime=this.getDateTime();
this.assetLoaded=!1;this.retryLoadCount=0;this.firstFramePlayed=!1;this.isVideoLoadingAnimationVisible=!0;this.videoContainer=a;this.videoElement.oncanplay=this.videoOnCanPlayEvent;this.videoElement.onerror=this.videoOnErrorEvent;this.videoElement.onplaying=this.videoOnPlayingEvent;this.videoElement.onpause=this.videoOnPauseEvent;this.videoElement.onended=this.videoOnEndedEvent;this.videoElement.onwaiting=this.videoOnWaitingEvent;this.videoElement.ontimeupdate=this.videoOnTimeUpdateEvent;this.videoElement.onabort=
this.videoOnAbortEvent;this.videoElement.onsuspend=this.videoOnSuspendEvent;4===this.videoElement.readyState&&(this.eventHandler.onVideoReadyForPlayback(0,0,this.getPercentDownloaded(),this.getDurationMs()),this.assetLoaded=!0,this.stopVideoLoadingAnimation());if(this.videoElement.error&&this.videoElement.error.code)this.videoElement.onerror("TriggeredBeforeInit");c=this.videoElement.dataset.poster;this.videoElement.poster!==c&&(this.videoElement.poster=c)}}(),ca=function(){function c(){}c.registeredElements=
[];c.attachedToViewWillDisappear=!1;c.registerElement=function(f,h,e,a,b,d,g,k){f={callback:d,dispatchOnElementInView:e,dispatchOnElementOutOfView:a,element:f,isInView:void 0,ratioInView:h,recurring:b,eventData:g,options:k};0===c.registeredElements.length&&c.attachListeners();c.registeredElements.push(f);c.handleViewChange(f)};c.deregisterElement=function(f,h,e,a,b){c.registeredElements=c.registeredElements.filter(function(d){return!(d.element===f&&d.ratioInView===h&&d.dispatchOnElementInView===e&&
d.dispatchOnElementOutOfView===a&&d.recurring===b)});0===c.registeredElements.length&&c.detachListeners()};c.emitViewabilityChange=function(f,h){f.isInView=h;f.callback(f.ratioInView,h,f.eventData);f.recurring||c.deregisterElement(f.element,f.ratioInView,f.dispatchOnElementInView,f.dispatchOnElementOutOfView,f.recurring)};c.handleRatioInViewChange=function(f,h){f.dispatchOnElementInView&&h>=f.ratioInView&&!f.isInView&&c.emitViewabilityChange(f,!0);f.dispatchOnElementOutOfView&&h<f.ratioInView&&f.isInView&&
c.emitViewabilityChange(f,!1)};c.handleBrowserHidden=function(f){c.handleRatioInViewChange(f,0)};c.handleViewChange=function(f){c.handleRatioInViewChange(f,La.getPercentInView(f.element,f.options))};c.onBrowserHidden=function(){c.registeredElements.forEach(c.handleBrowserHidden)};c.onBrowserShown=function(){c.registeredElements.forEach(c.handleViewChange)};c.onBrowserVisibilityChange=function(){var f=J().hidden;if(f)c.onBrowserHidden();else setTimeout(c.onBrowserShown,50);c.registeredElements.forEach(function(h){var e,
a;null===(a=null===(e=h.options)||void 0===e?void 0:e.onBrowserVisibilityChange)||void 0===a?void 0:a.call(e,!f)})};c.toggleBrowserVisibility=function(){c.onBrowserHidden();c.onBrowserShown()};c.attachListeners=function(){c.throttledOnBrowserViewChange||(c.throttledOnBrowserViewChange=y["default"].throttle(function(){c.registeredElements.forEach(c.handleViewChange)},50));y["default"].on("afterReady",c.throttledOnBrowserViewChange);y["default"].on(y["default"].constants.BROWSER_EVENTS.SCROLL,c.throttledOnBrowserViewChange);
y["default"].on(y["default"].constants.BROWSER_EVENTS.RESIZE,c.throttledOnBrowserViewChange);y["default"].on(y["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,c.throttledOnBrowserViewChange);var f=J().defaultView;D.addEventListener(f,"beforeunload",1,c.onBrowserHidden);D.addEventListener(J(),"visibilitychange",1,c.onBrowserVisibilityChange);V.isWebView()||(D.addEventListener(f,"focus",1,c.onBrowserShown),D.addEventListener(f,"blur",1,c.onBrowserHidden));V.isSafari()&&!V.isWebView()&&(D.addEventListener(f,
"pagehide",1,c.onBrowserHidden),D.addEventListener(f,"pageshow",1,c.onBrowserShown),D.addEventListener(f,"popstate",1,c.toggleBrowserVisibility));c.attachToViewWillDisappear()};c.detachListeners=function(){y["default"].off("afterReady",c.throttledOnBrowserViewChange);y["default"].off(y["default"].constants.BROWSER_EVENTS.SCROLL,c.throttledOnBrowserViewChange);y["default"].off(y["default"].constants.BROWSER_EVENTS.RESIZE,c.throttledOnBrowserViewChange);y["default"].off(y["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,
c.throttledOnBrowserViewChange);var f=J().defaultView;D.removeEventListener(J(),"visibilitychange",1,c.onBrowserVisibilityChange);D.removeEventListener(f,"beforeunload",1,c.onBrowserHidden);V.isWebView()||(D.removeEventListener(f,"focus",1,c.onBrowserShown),D.removeEventListener(f,"blur",1,c.onBrowserHidden));V.isSafari()&&!V.isWebView()&&(D.removeEventListener(f,"pagehide",1,c.onBrowserHidden),D.removeEventListener(f,"pageshow",1,c.onBrowserShown),D.removeEventListener(f,"popstate",1,c.toggleBrowserVisibility))};
c.attachToViewWillDisappear=function(){if(!c.attachedToViewWillDisappear){var f=J().defaultView;c.attachedToViewWillDisappear=!0;f.app||(f.app={});c.previousViewWillDisappear=f.app.willDisappear;f.app.willDisappear=function(){c.onBrowserHidden();c.previousViewWillDisappear&&c.previousViewWillDisappear()}}};return c}(),U;(function(c){c.WAITING="waiting";c.TIME_UPDATE="timeupdate";c.PAUSE="pause"})(U||(U={}));var Ma;(function(c){c.PORTRAIT="PORTRAIT";c.LANDSCAPE="LANDSCAPE";c.SQUARE="SQUARE"})(Ma||
(Ma={}));var mb=function(){return function(c,f,h,e,a,b){var d=this;void 0===e&&(e=!1);void 0===a&&(a=!1);void 0===b&&(b={});this.getVideoCurrentTimeMs=function(){return d.videoPlayer.getCurrentTimeMs()};this.getTotalVideoDuration=function(){return d.videoPlayer.getDurationMs()};this.loadVideo=function(){d.videoPlayer.load()};this.setMuteStatus=function(l,n){d.isMuted=l;d.setMuteButtonStatus(l);d.muteClickRegion&&(l?(d.videoPlayer.mute(),d.videoEventHandler.onVideoMuted(d.getVideoCurrentTimeMs(),n)):
(d.videoPlayer.unmute(),d.videoEventHandler.onVideoUnmuted(d.getVideoCurrentTimeMs(),n)))};this.displayProgressBar=function(l){if(d.progressBarContainer&&(d.progressBarContainer.style.visibility=l?"inherit":"hidden",l))d.videoEventHandler.onProgressBarDisplayed()};this.play=function(){if(d.isPlaying())return Promise.resolve();d.videoPlayer.resetContinuousPlaybackDurationMs();d.videoEventHandler.onVideoPlaybackInitiated(d.getVideoCurrentTimeMs());d.showPlayButton(!1);d.showPauseButton(!0);d.displayProgressBar(!0);
d.muteClickRegion&&(d.muteClickRegion.style.display="block",d.videoEventHandler.onAudioToggleIconDisplayed(),d.muteClickRegion.style.visibility="visible");if(d.ccTrack){d.ccTrack.onerror=d.ccLoadFailure;d.ccShowing=!1;if(d.ccTrackFail)d.ccLoadFailure();else if(d.ccClickRegion)d.ccClickRegion.style.display="block",d.ccClickRegion.style.visibility="visible",d.videoEventHandler.onCcOn(fa.DEFAULT_ON,d.videoPlayer.getCaptionLang(),!1);else d.videoEventHandler.onCcOn(fa.DEFAULT_ON,d.videoPlayer.getCaptionLang(),
!0);d.toggleCC()}return d.videoPlayer.play(Date.now()).then().catch(function(l){var n="string"===typeof l?l:"";l instanceof DOMException&&(n=l.name+": "+l.message);d.showPlayButton(!0);d.muteClickRegion&&(d.muteClickRegion.style.visibility="hidden");d.ccClickRegion&&(d.ccClickRegion.style.visibility="hidden");if(n.startsWith("NotSupported"))d.videoEventHandler.onVideoPlayPromiseNotSupported();d.videoEventHandler.onVideoPlayPromiseRejected(n)})};this.pause=function(l){d.isPaused()||(d.videoEventHandler.onVideoPauseInitiated(d.getVideoCurrentTimeMs()),
d.videoEventHandler.onVideoViewed(d.videoPlayer.getContinuousPlaybackDurationMs()),d.videoPlayer.resetContinuousPlaybackDurationMs(),d.showPauseButton(!1),d.videoOptions.shouldEnablePauseButton?d.displayProgressBar(!0):d.displayProgressBar(!1),!l&&d.videoOptions.shouldEnablePlayButton&&d.showPlayButton(!0),d.muteClickRegion&&(d.muteClickRegion.style.visibility="hidden"),d.ccTrack&&(d.ccClickRegion&&(d.ccClickRegion.style.visibility="hidden"),d.toggleCC()),d.videoPlayer.pause())};this.onBrowserVisibilityChange=
function(l){d.videoOptions.shouldEnableVideoCleanup&&(l?d.videoPlayer.loadVideoOnBrowserVisible():d.videoPlayer.clear())};this.onOnePercentViewabilityChange=function(l,n){l=Date.now();n?(d.onScreenStartTime=l,d.videoEventHandler.onVideoOnScreen(d.videoPlayer.getPercentDownloaded())):(d.videoPlayer.isMuted()||d.setMuteStatus(!0,S.VIDEO_OFF_SCREEN),d.videoEventHandler.onVideoOffScreen(l-d.onScreenStartTime,d.getVideoCurrentTimeMs()),d.onScreenStartTime=0,d.videoPlayer.seekToStart(),d.videoPlayer.resetContinuousPlaybackDurationMs())};
this.onFiftyPercentViewabilityChange=function(l,n,r){d.isReducedMotionEnabled&&!d.playButtonClicked||d.pauseButtonClicked||(n?d.play().catch():d.pause(r))};this.setVideoOptions=function(l){d.videoOptions=l};this.handleVideoOrientation=function(){var l=d.videoAdAttributes,n=l.videoPreviewImageSrc;if(l=l.videoOrientation===Ma.PORTRAIT)void 0===n&&(n=""),l=!n.startsWith("https://m.media-amazon.com");if(l)d.videoEventHandler.onVideoPreviewImageNotMediaAmazon()};this.isPlaying=function(){return d.videoPlayer.playbackState===
G.PLAYING};this.isPaused=function(){return d.videoPlayer.playbackState===G.PAUSED};this.buildBoundaryListeners=function(){return[new lb(2E3,d.videoEventHandler.onVideoDurationPlayed),new lb(15E3,d.videoEventHandler.onVideoDurationPlayed)]};this.toggleAudio=function(){d.setMuteStatus(!d.videoPlayer.isMuted(),S.ICON_TAP)};this.toggleCC=function(){d.ccShowing=!d.ccShowing;d.videoPlayer.toggleCaptions(d.ccShowing);d.ccButtonOff&&d.ccButtonOn&&(d.ccShowing?(d.videoEventHandler.onCcOn(fa.ICON_TAP,d.videoPlayer.getCaptionLang(),
!1),d.ccButtonOn.style.opacity="1",d.ccButtonOff.style.opacity="0"):(d.videoEventHandler.onCcOff(fa.ICON_TAP,d.videoPlayer.getCaptionLang(),!1),d.ccButtonOn.style.opacity="0",d.ccButtonOff.style.opacity="1"))};this.showPlayButton=function(l){d.playClickRegion&&(d.playClickRegion.style.visibility=l?"inherit":"hidden")};this.showPauseButton=function(l){if(d.pauseClickRegion&&(d.pauseClickRegion.style.visibility=l?"inherit":"hidden",l))d.videoEventHandler.onPauseIconDisplayed()};this.setUpPlayButtonEvents=
function(){d.playClickRegion&&d.playClickRegion.addEventListener("click",function(){d.play();d.playButtonClicked=!0;if(d.playButtonClicked&&d.pauseButtonClicked)d.videoEventHandler.onVideoPlayFromPause(d.getVideoCurrentTimeMs());d.pauseButtonClicked=!1})};this.setUpPauseButtonEvents=function(){d.pauseClickRegion&&d.pauseClickRegion.addEventListener("click",function(){d.pause();d.pauseButtonClicked=!0;d.videoEventHandler.onVideoPauseButtonTriggered(d.getVideoCurrentTimeMs());d.playButtonClicked=!1})};
this.ccLoadFailure=function(){d.ccTrackFail=!0;d.videoEventHandler.onCcLoadFailure();d.ccClickRegion&&(d.ccClickRegion.style.visibility="hidden")};this.setMuteButtonStatus=function(l){d.muteButton&&d.unmuteButton&&(l?(d.unmuteButton.style.fillOpacity="0",d.muteButton.style.fillOpacity="1"):(d.muteButton.style.fillOpacity="0",d.unmuteButton.style.fillOpacity="1"))};this.logClick=function(){d.videoEventHandler.onVideoClicked(d.getVideoCurrentTimeMs())};this.updateProgressBar=function(l){if(d.progressBar)if(l===
U.WAITING||l===U.PAUSE)d.progressBar.style.transition="none";else{l=d.getVideoCurrentTimeMs();var n=d.getTotalVideoDuration(),r=Math.floor(l/n*100);if(0===r)d.videoEventHandler.onProgressBarReset();else r=Math.floor((l+500)/n*100);l=100<r?100:r;d.progressBar.style.transition=0===l?"none":"width 0.5s linear";d.progressBar.style.width=l+"%"}};this.element=c;this.videoAdAttributes=h;this.videoEventHandler=f;h=this.videoOptions=b;c=h.shouldEnablePlayButton;f=h.shouldEnablePauseButton;b=h.shouldEnableReduceMotionEffects;
h=this.element.querySelector("video");var g=this.buildBoundaryListeners(),k="true"===(null===h||void 0===h?void 0:h.getAttribute("data-videoloadedusinginlinescript"))?!0:!1;this.videoPlayer=new Gc(h,this.videoEventHandler,g,[],this.element);a||k||this.videoPlayer.load();this.element.querySelectorAll("a").forEach(function(l){l.addEventListener("click",d.logClick)});if(this.muteClickRegion=this.element.querySelector('[data-type="audioToggleContainer"]'))this.muteButton=this.muteClickRegion.querySelector('[data-type="audioToggleMute"]'),
this.unmuteButton=this.muteClickRegion.querySelector('[data-type="audioToggleUnmute"]'),this.setMuteButtonStatus(this.videoPlayer.isMuted()),this.muteClickRegion.addEventListener("click",this.toggleAudio),this.isMuted=this.videoPlayer.isMuted();this.ccTrackFail=!1;if(this.ccTrack=this.element.querySelector('[data-type="ccTrack"]'))this.ccTrack.onerror=this.ccLoadFailure;if(this.ccClickRegion=this.element.querySelector('[data-type="ccToggleContainer"]'))this.ccClickRegion.style.visibility="hidden",
this.ccButtonOff=this.ccClickRegion.querySelector('[data-type="ccToggleOff"]'),this.ccButtonOn=this.ccClickRegion.querySelector('[data-type="ccToggleOn"]'),this.ccClickRegion.addEventListener("click",this.toggleCC);this.playClickRegion=this.element.querySelector('[data-type="playIcon"]');f&&(this.videoOptions.shouldEnablePlayButton=!0,this.setUpPlayButtonEvents(),this.pauseClickRegion=this.element.querySelector('[data-type="pauseIcon"]'),this.setUpPauseButtonEvents());b&&(a=kc("(prefers-reduced-motion: reduce)"),
this.isReducedMotionEnabled=!(null===a||void 0===a||!a.matches));this.isReducedMotionEnabled&&(c=!0,this.setUpPlayButtonEvents(),this.videoEventHandler.onVideoPausedDueToAutoplayDisabled());this.showPlayButton(c);this.progressBar=this.element.querySelector('[data-type="progressBar"]');this.progressBarContainer=this.element.querySelector('[data-type="progressBarContainer"]');this.progressBar&&h&&(h.addEventListener(U.TIME_UPDATE,function(){return d.updateProgressBar(U.TIME_UPDATE)}),h.addEventListener(U.WAITING,
function(){return d.updateProgressBar(U.WAITING)}),f&&h.addEventListener(U.PAUSE,function(){return d.updateProgressBar(U.PAUSE)}));this.handleVideoOrientation();e||(ca.registerElement(h,.5,!0,!0,!0,this.onFiftyPercentViewabilityChange),ca.registerElement(h,.01,!0,!0,!0,this.onOnePercentViewabilityChange,void 0,{onBrowserVisibilityChange:this.onBrowserVisibilityChange}))}}(),Hc=function(c){return 9<c?String(c):"0"+c},nb=function(c){if(0>=c)return"00:00";var f=Math.floor(c/36E5);c=[Math.floor(c/6E4%
60),Math.floor(c/1E3%60)];0<f&&c.unshift(f);return c.map(Hc).join(":")},Ic=function(){function c(f){this.timerElement=f;this.msToEvent=parseInt(f.dataset.targetTime,10);this.timerElement.innerText=nb(this.msToEvent)}c.prototype.start=function(){var f=this;isNaN(this.msToEvent)||(this.counterStartTime=Date.now(),this.counterInterval=$b.interval(function(){return f.updateTime()},500))};c.prototype.updateTime=function(){var f=Date.now()-this.counterStartTime;0>=this.msToEvent-f&&clearInterval(this.counterInterval);
this.timerElement.innerText=nb(this.msToEvent-f)};return c}(),ob=function(c){null===c?Fa["default"].log("No element found to initialize badge timer. returning..."):Array.prototype.slice.call(c.getElementsByClassName("badge-countdown-timer")).forEach(function(f){0===(null===f||void 0===f?void 0:f.innerHTML.length)&&(new Ic(f)).start()})},pb=function(){return function(c,f,h){var e=this;this.onBackgroundClicked=function(){e.metricsManager.reportBackgroundClicked(e.videoManager.getVideoCurrentTimeMs(),
e.videoManager.videoAdAttributes)};this.onCtaClicked=function(){e.metricsManager.reportBrandCtaLinkClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onCtaBannerClicked=function(){e.metricsManager.reportCtaBannerClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onHeadlineClicked=function(){e.metricsManager.reportHeadlineClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onBrandCtaLinkClicked=
function(){e.metricsManager.reportBrandCtaLinkClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onBrandLogoClicked=function(){e.metricsManager.reportBrandLogoClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onBrandNameClicked=function(){e.metricsManager.reportBrandNameClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.onCreatorLogoClicked=function(){e.metricsManager.reportCreatorLogoClicked(e.videoManager.getVideoCurrentTimeMs(),
e.videoManager.videoAdAttributes)};this.onCreatorCtaClicked=function(){e.metricsManager.reportCreatorCtaClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes)};this.productReceived=function(a){var b;void 0===a&&(a=0);var d=(null===(b=e.widgetEventAttributes)||void 0===b?0:b.productAttributes)&&0<e.widgetEventAttributes.productAttributes.length?e.widgetEventAttributes.productAttributes[a]:void 0;e.metricsManager.reportProductReceived(e.videoManager.getVideoCurrentTimeMs(),
e.videoManager.videoAdAttributes,d)};this.onProductClicked=function(a){var b;void 0===a&&(a=0);var d=(null===(b=e.widgetEventAttributes)||void 0===b?0:b.productAttributes)&&0<e.widgetEventAttributes.productAttributes.length?e.widgetEventAttributes.productAttributes[a]:void 0;e.metricsManager.reportProductClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes,d)};this.eventBannerDisplayed=function(a){e.metricsManager.reportEventBannerDisplayed(a,e.videoManager.videoAdAttributes)};
this.onEventBannerClicked=function(a){e.metricsManager.reportEventBannerClicked(a,e.videoManager.videoAdAttributes)};this.metricsManager=c;this.videoManager=f;this.widgetEventAttributes=h}}(),qb=function(){function c(f,h){var e=this;this.setupBackgroundEvent=function(){e.widgetElements.backgroundElement&&e.widgetElements.backgroundElement.addEventListener("click",e.widgetEventHandler.onBackgroundClicked)};this.setupBrandLogoEvent=function(){e.widgetElements.brandLogoElement&&e.widgetElements.brandLogoElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",
e.widgetEventHandler.onBrandLogoClicked)});e.widgetElements.brandElement&&e.widgetElements.brandElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",e.widgetEventHandler.onBrandCtaLinkClicked)})};this.setupCallToActionEvent=function(){e.widgetElements.callToActionElement&&e.widgetElements.callToActionElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",e.widgetEventHandler.onCtaClicked)});e.widgetElements.callToActionBannerElement&&e.widgetElements.callToActionBannerElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",
e.widgetEventHandler.onCtaBannerClicked)})};this.setupHeadlineEvent=function(){e.widgetElements.headlineElement&&e.widgetElements.headlineElement.querySelectorAll("*").forEach(function(a){a.addEventListener("click",e.widgetEventHandler.onHeadlineClicked)})};this.setupProductEvents=function(){e.widgetElements.productElements&&e.widgetElements.productElements.forEach(function(a,b){a&&(e.widgetEventHandler.productReceived(b),a.querySelectorAll("a").forEach(function(d){d.addEventListener("click",function(){e.widgetEventHandler.onProductClicked(b)})}))})};
this.setUpCreatorContentEvents=function(){e.setupBrandNameEvent();e.setupCreatorCtaEvent();e.setupCreatorLogoEvent()};this.setupBrandNameEvent=function(){e.widgetElements.brandNameElement&&e.widgetElements.brandNameElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",e.widgetEventHandler.onBrandNameClicked)})};this.setupCreatorCtaEvent=function(){e.widgetElements.creatorNameElement&&e.widgetElements.creatorNameElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",
e.widgetEventHandler.onCreatorCtaClicked)})};this.setupCreatorLogoEvent=function(){e.widgetElements.creatorLogoElement&&e.widgetElements.creatorLogoElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",e.widgetEventHandler.onCreatorLogoClicked)})};this.setupEventBannerEvents=function(){var a=u["default"].cardRoot.querySelector('[data-type="eventBannerContainer"]');if(a&&a.dataset){var b=a.dataset.layout,d=void 0===b?"":b;e.widgetEventHandler.eventBannerDisplayed(d);a.querySelectorAll("a").forEach(function(g){g.addEventListener("click",
function(){return e.widgetEventHandler.onEventBannerClicked(d)})})}};this.widgetElements=f;this.widgetEventHandler=h}c.prototype.setupWidgetEvents=function(){this.setupBackgroundEvent();this.setupBrandLogoEvent();this.setupCallToActionEvent();this.setupHeadlineEvent();this.setupProductEvents();this.setupEventBannerEvents();this.setUpCreatorContentEvents()};return c}(),ta;(function(c){c.DESKTOP="Desktop";c.MOBILE="Mobile"})(ta||(ta={}));var ua,Na,va,wa,xa,Oa,ya,za,M={SBV_468340:"SBV_468340",SBV_672322:"SBV_672322",
SBV_708584:"SBV_708584",SBV_834356:"SBV_834356",SBV_836067:"SBV_836067",SBV_842986:"SBV_842986",ADPT_SBV_880477:"ADPT_SBV_880477"},rb=p.__assign(p.__assign({},M),{SBV_623814:"SBV_623814",SBV_633512:"SBV_633512",SBV_633539:"SBV_633539",SBV_633907:"SBV_633907",SBV_736363:"SBV_736363",SBV_776653:"SBV_776653",SBV_814590:"SBV_814590",ADPT_SBV_948350:"ADPT_SBV_948350",ADPT_SBV_956803:"ADPT_SBV_956803"}),sb=p.__assign(p.__assign({},rb),{MBV_394048:"MBV_394048",SBV_414150:"SBV_414150",SBV_427616:"SBV_427616",
ADPT_SBV_959560:"ADPT_SBV_959560",SBV_620753:"SBV_620753",SBV_642751:"SBV_642751",SBV_656845:"SBV_656845",SBV_668132:"SBV_668132",BUYX_DP_PAPERCUT_EXPERIMENTS_PRICE_COLOR_705983:"BUYX_DP_PAPERCUT_EXPERIMENTS_PRICE_COLOR_705983"}),tb=p.__assign(p.__assign({},rb),{MBV_394383:"MBV_394383",SBV_414153:"SBV_414153",SBV_427647:"SBV_427647",ADPT_SBV_959572:"ADPT_SBV_959572",ADPT_SBV_983988:"ADPT_SBV_983988",SBV_642769:"SBV_642769",SBV_656827:"SBV_656827",SBV_668135:"SBV_668135",SBV_677302:"SBV_677302",SBV_682273:"SBV_682273",
ADPT_SBV_992627:"ADPT_SBV_992627"}),ub=p.__assign(p.__assign({},M),{SBV_649291:"SBV_649291",ADPT_SBV_956803:"ADPT_SBV_956803"}),vb=p.__assign(p.__assign({},M),{SB_DP_THEMATIC_HRB_VIDEO_DESKTOP_598713:"SB_DP_THEMATIC_HRB_VIDEO_DESKTOP_598713"}),wb=p.__assign(p.__assign({},M),{SB_DP_THEMATIC_HRB_VIDEO_MOBILE_598714:"SB_DP_THEMATIC_HRB_VIDEO_MOBILE_598714"}),xb=p.__assign(p.__assign({},M),{SBV_576903:"SBV_576903",SBV_576904:"SBV_576904"}),yb=p.__assign(p.__assign({},M),{SBV_576917:"SBV_576917",SBV_576918:"SBV_576918"}),
zb=p.__assign(p.__assign({},M),{SBV_476799:"SBV_476799",SBV_485007:"SBV_485007",SB_VIDEO_CONTENT_DEDUPE_454175:"SB_VIDEO_CONTENT_DEDUPE_454175",SBV_737682:"SBV_737682",ADPT_SBV_881393:"ADPT_SBV_881393"}),Ab=p.__assign(p.__assign({},zb),{SBV_793878:"SBV_793878"}),Bb=p.__assign(p.__assign({},zb),{ADPT_SBV_SEARCH_912243:"ADPT_SBV_SEARCH_912243",ADPT_SBV_SEARCH_1021874:"ADPT_SBV_SEARCH_1021874"}),Pa=p.__assign(p.__assign({},M),{SBV_476799:"SBV_476799",SBV_485007:"SBV_485007",SBV_635550:"SBV_635550",SB_VIDEO_CONTENT_DEDUPE_454175:"SB_VIDEO_CONTENT_DEDUPE_454175",
SBV_716513:"SBV_716513",SBV_723533:"SBV_723533",SBV_737682:"SBV_737682",ADPT_SBV_881393:"ADPT_SBV_881393"}),Jc=p.__assign(p.__assign({},Pa),{ADPT_SBV_SEARCH_912243:"ADPT_SBV_SEARCH_912243"}),Cb=p.__assign(p.__assign({},M),{SBV_716513:"SBV_716513",SBV_724265:"SBV_724265",SBV_737682:"SBV_737682",SBV_733716:"SBV_733716",SBV_826059:"SBV_826059",SBV_826060:"SBV_826060",SBV_826061:"SBV_826061",SEARCH_637704:"SEARCH_637704",ADPT_SEARCH_821829:"ADPT_SEARCH_821829",ADPT_SEARCH_809719:"ADPT_SEARCH_809719",
ADPT_SEARCH_824668:"ADPT_SEARCH_824668",SEARCH_758318:"SEARCH_758318",SBV_776577:"SBV_776577",SBV_798693:"SBV_798693",SBV_798694:"SBV_798694",SBV_798704:"SBV_798704",ADPT_SBV_881393:"ADPT_SBV_881393",ADPT_SBV_956803:"ADPT_SBV_956803"}),Db=p.__assign(p.__assign(p.__assign({},M),Cb),{SEARCH_737855:"SEARCH_737855",SEARCH_791154:"SEARCH_791154",ADPT_SBV_SEARCH_948552:"ADPT_SBV_SEARCH_948552",ADPT_SBV_890511:"ADPT_SBV_890511",ADPT_SBV_990170:"ADPT_SBV_990170",ADPT_SBV_1021793:"ADPT_SBV_1021793",ADPT_SBV_SEARCH_982209:"ADPT_SBV_SEARCH_982209"}),
Eb=p.__assign(p.__assign(p.__assign({},M),Cb),{SEARCH_737563:"SEARCH_737563",SEARCH_786608:"SEARCH_786608",SEARCH_791155:"SEARCH_791155",ADPT_SBV_877926:"ADPT_SBV_877926",ADPT_SBV_964336:"ADPT_SBV_964336",ADPT_SBV_SEARCH_867911:"ADPT_SBV_SEARCH_867911",ADPT_SBV_SEARCH_912243:"ADPT_SBV_SEARCH_912243",ADPT_SBV_SEARCH_954307:"ADPT_SBV_SEARCH_954307",ADPT_SBV_SEARCH_953287:"ADPT_SBV_SEARCH_953287",ADPT_SBV_SEARCH_963810:"ADPT_SBV_SEARCH_963810",ADPT_SBV_SEARCH_982208:"ADPT_SBV_SEARCH_982208",ADPT_SBV_1001786:"ADPT_SBV_1001786"}),
Kc=p.__assign({},M),H=p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign({},sb),tb),xb),yb),Ab),Bb),Pa),Db),Eb),ub),vb),wb),ia=ta.DESKTOP,Y=ta.MOBILE,Lc=L.MULTI_BRAND_VIDEO,Mc=L.SHORT_FORM_VIDEO,Nc=L.THEMATIC_VIDEO,Oc=L.VIDEO_SINGLE_BRAND,Pc=L.VIDEO_PRODUCT_COLLECTION,Qc=L.VIDEO_SPLIT,Rc=L.VIDEO_STORE,Sc=L.VIDEO_STORE_PRODUCT_FEATURE;var W={};W[Lc]=(ua={},ua[ia]=sb,ua[Y]=tb,ua);W[Mc]=(Na={},Na[Y]=ub,Na);W[Nc]=(va={},
va[ia]=vb,va[Y]=wb,va);W[Oc]=(wa={},wa[ia]=xb,wa[Y]=yb,wa);W[Pc]=(xa={},xa[ia]=Db,xa[Y]=Eb,xa);W[Qc]=(Oa={},Oa[Y]=Kc,Oa);W[Rc]=(ya={},ya[ia]=Ab,ya[Y]=Bb,ya);W[Sc]=(za={},za[ia]=Pa,za[Y]=Jc,za);W;var A;(function(c){c.C="C";c.T1="T1";c.T2="T2";c.T3="T3";c.T4="T4";c.T5="T5";c.T6="T6";c.T7="T7"})(A||(A={}));var Fb=function(c){return V.isIOSWebView()&&c.getTreatment(H.SBV_834356)===A.T1||c.getTreatment(H.SBV_836067)===A.T1},Gb={shouldAreaOnlyUseElementWidth:!0},Hb=function(){return function(c){var f=this;
this.attach=function(){f.setupAdUnitViewability()};this.setupAdUnitViewability=function(){ca.registerElement(f.adUnitElement,.5,!0,!0,!0,f.onFiftyPercentViewabilityChange,void 0,Gb)};this.onFiftyPercentViewabilityChange=function(h,e){f.adUnitInView=e};this.isAdUnitInView=function(){return f.adUnitInView};this.calculateVideoDurationTotalMsRelativeToAdUnit=function(h){f.isAdUnitInView()?f.videoDurationTotalMsWhenAdInViewFirst=h-f.videoDurationStartTimeMsWhenAdInViewFirst:(f.videoDurationTotalMsWhenAdInViewFirst=
0,f.videoDurationStartTimeMsWhenAdInViewFirst=h);return f.videoDurationTotalMsWhenAdInViewFirst};this.getAdUnitPercentInView=function(){return La.getPercentInView(f.adUnitElement,Gb)};this.adUnitElement=c;this.adUnitInView=!1;this.videoDurationTotalMsWhenAdInViewFirst=this.videoDurationStartTimeMsWhenAdInViewFirst=0}}(),oa,Tc=na.BrandVideoProduct,Uc=na.BrandVideoStore,Vc=na.ProductWithTintedCta,Ib=(oa={},oa[Tc]={brand:!0,product:!0,store:!1},oa[Vc]={brand:!1,product:!0,store:!1},oa[Uc]={brand:!0,
product:!1,store:!0},oa),Jb=function(){function c(f,h){var e=this;this.isALink=!1;this.videoManagers=[];this.videoPlayersStatus=[];this.impFired=[];this.mediaSourceSwapCompleted=[];this.getDynamicMetricAttributes=function(){var a;return a={},a[m.CAROUSEL_PAGE_NUMBER]=e.currentCarouselPage,a};this.updateMediaAssetSources=function(a,b){var d=e.controllerOptions.shouldDelayMediaLoading;a&&d&&!e.mediaSourceSwapCompleted[b]&&(d=JSON.parse(a.dataset.videoAdAttributesProps),0<b&&e.videoManagers[b].loadVideo(),
e.updatePreviewImageSource(a,d),e.updateProductImageSource(a,d),e.mediaSourceSwapCompleted[b]=!0)};this.updateProductImageSource=function(a,b){var d,g=b.videoAdType;g=(null!==(d=Ib[void 0===g?"":g])&&void 0!==d?d:{}).product;if(void 0===g?0:g)b=b.imageUrl,void 0===b&&(b=""),a&&b&&(a=a.querySelector('[data-type="productImage"]'))&&a.getAttribute("src")!==b&&a.setAttribute("src",b)};this.updatePreviewImageSource=function(a,b){b=b.videoPreviewImageSrc;var d;if(a){var g=a.querySelector("video");if(g){var k=
g.getAttribute("poster");k&&k!==b&&(g.setAttribute("poster",b),a=a.querySelector('[data-show-background-image="true"]'),b=null===(d=null===a||void 0===a?void 0:a.getAttribute)||void 0===d?void 0:d.call(a,"data-background-image-url"),(null===a||void 0===a?0:a.style)&&b&&(a.style.backgroundImage="url('"+b+"')"))}}};this.carouselItemsPerPage=function(){var a=e.controllerOptions.minimumGutterWidth;a=void 0===a?0:a;var b=e.carouselViewport.getBoundingClientRect().width,d=u["default"].cardRoot.getElementsByClassName("a-carousel-card")[0].getBoundingClientRect().width;
return Math.floor(b/(d+a))};this.logImpression=function(a,b){if(!e.impFired[b]&&(a=a.querySelector('[data-type="ip"]'))){var d=a.getAttribute("data-src");d&&(a.setAttribute("src",d),e.impFired[b]=!0)}};this.pauseVideo=function(a){e.videoManagers[a].pause()};this.playVideo=function(a){e.videoManagers[a].play().then(function(){e.currentPlayingIndex=a}).catch()};this.setupPlayButtonEventHandlers=function(a,b,d){(a=a.querySelector('[data-type="playIcon"]'))&&a.addEventListener("click",function(g){return e.onPlayBtnEventTriggered(g,
b,d)})};this.updateClientMetricsContext=function(){e.metricsManager.setClientMetricsContext({getDynamicMetricsAttributes:e.getDynamicMetricAttributes})};this.setupViewabilityEvents=function(a,b){ca.registerElement(a,.5,!0,!0,!0,e.onFiftyPercentViewabilityChange,b);ca.registerElement(a,.01,!0,!0,!0,e.onOnePercentViewabilityChange,b)};this.onPlayBtnEventTriggered=function(a,b,d){a=e.videoManagers[b].videoAdAttributes;e.metricsManager.reportVideoPlayButtonTriggered(b,a);if(null===d||void 0===d?0:d.onImmersiveVideoCallback)d.onImmersiveVideoCallback(a);
else e.toggleVideosByPlayButton(b)};this.toggleVideosByPlayButton=function(a){e.pauseVideo(e.currentPlayingIndex);e.videoManagers[a].setMuteStatus(e.videoManagers[e.currentPlayingIndex].isMuted,S.INHERIT);e.playVideo(a)};this.isVideoPlaying=function(){return e.videoPlayersStatus.some(function(a){return a})};this.setConfigStyles=function(a,b){Object.assign(b.style,a)};this.carousel=Va["default"].getCarousel(u["default"].cardRoot.getElementsByClassName("a-carousel-container")[0]);this.metricsManager=
f;this.controllerOptions=h;this.currentCarouselPage=this.currentPlayingIndex=0;this.prevPlayingIndex=-1;this.updateClientMetricsContext()}c.prototype.setupEventHandlers=function(f,h,e,a){var b=this,d,g,k,l,n,r,t;void 0===a&&(a={});var v=h.videoAdType;v=null!==(d=Ib[void 0===v?"":v])&&void 0!==d?d:{};d=v.brand;var x=v.product;v=v.store;var C=a.isItemOnFirstPage,z=(a=a.selectors)?a.brandElementSelector:void 0,E=this.controllerOptions,Z=E.shouldDelayMediaLoading;a=E.enableAutoScroll;var K=void 0===a?
!1:a;a=E.enableImmersiveVideo;var N=void 0===a?!1:a;a=E.showDealBadge;a=void 0===a?!1:a;var X=E.shouldEnableVideoCleanup;X=void 0===X?!1:X;var F=E.shouldEnableReduceMotionEffects;F=void 0===F?!1:F;E=E.shouldLogAdUnitViewMetrics;var pa=void 0===E?!1:E;E=f.querySelector('[data-type="videoContainer"]');var qa=f.querySelectorAll("a");qa&&qa.forEach(function(Wc){Wc.addEventListener("click",function(){b.isALink=!0})});if(!E)return this.metricsManager.reportMissingVideoElement(h),!1;if(pa){var Q=new Hb(f);
Q.attach()}Q=new kb(this.metricsManager,h,{onPlaybackCompletedCallback:K?this.onPlaybackCompletedCallback:void 0,onImmersiveVideoCallback:N?this.onImmersiveVideoCallback:void 0},Q);Q=new mb(E,Q,h,!0,Z&&C?!1:Z,{shouldEnablePlayButton:!0,shouldEnableVideoCleanup:X,shouldEnableReduceMotionEffects:F});this.videoManagers.push(Q);this.setupViewabilityEvents(E,e);this.setupPlayButtonEventHandlers(f,e,{onImmersiveVideoCallback:N?this.onImmersiveVideoCallback:void 0});e=f.querySelector('[data-type="storeContainer"]');
C=f.querySelector('[data-type="productContainer"]');Z=f.querySelector('[id="ctaContainer"]');N=f.querySelector(null!==z&&void 0!==z?z:T.BRAND_LOGO_HEADER_CONTAINER);z=f.querySelector(null!==z&&void 0!==z?z:T.BRAND_CONTAINER);K=null!==(g=null===z||void 0===z?void 0:z.classList.contains("aok-hidden"))&&void 0!==g?g:!1;if(x){if(!C)return this.metricsManager.reportMissingProductElement(h),!1;if(g=f.querySelectorAll('[data-type="productTitle"]')[0])g.style.display="-webkit-box"}if(d&&null===N&&null===
z)return this.metricsManager.reportMissingBrandElement(h),!1;d&&K&&(g=null!==(l=null===(k=null===z||void 0===z?void 0:z.querySelector('[class*="nameContainer"] span'))||void 0===k?void 0:k.textContent)&&void 0!==l?l:"",k=null!==(n=null===z||void 0===z?void 0:z.querySelector('a[class*="storeLink"]'))&&void 0!==n?n:null,this.metricsManager.reportMissingBrandElement(h,{storeName:g,storeUrl:null!==(r=null===k||void 0===k?void 0:k.getAttribute("href"))&&void 0!==r?r:void 0,storeCta:null!==(t=null===k||
void 0===k?void 0:k.text)&&void 0!==t?t:void 0}));if(v&&!e)return!1;h=new pb(this.metricsManager,Q);(new qb({headlineElement:e,brandElement:z,brandLogoElement:N,callToActionElement:Z,productElements:[C]},h)).setupWidgetEvents();a&&ob(f);return!0};return c}(),Xc=function(c){function f(h,e){var a=c.call(this,h,e)||this;a.start=function(){return p.__awaiter(a,void 0,void 0,function(){var b,d,g,k,l,n,r=this;return p.__generator(this,function(t){switch(t.label){case 0:return b=this.controllerOptions,d=
b.viewportConfig,g=b.selectors,this.carouselViewport=u["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0],d&&this.setConfigStyles(d,this.carouselViewport),k=u["default"].cardRoot.querySelectorAll(T.CARD_ITEM),k.forEach(function(v,x){var C=x<r.carouselItemsPerPage();C?r.logImpression(v,x):r.impFired[x]=!1;r.videoPlayersStatus[x]=!1;var z=p.__assign(p.__assign({},JSON.parse(v.dataset.videoAdAttributesProps)),{carouselItemIndex:x});v.style.visibility="inherit";r.setupEventHandlers(v,
z,x,{isItemOnFirstPage:C,selectors:g})&&C&&r.updateMediaAssetSources(v,x)}),[4,this.carousel.initialized];case 1:return t.sent(),this.displayOrHideCarouselButtons(),this.carousel.on("change:pageNumber",this.onCarouselPageChange),l=ka["default"].getCarousel(Ea.unscope(this.carouselViewport)),n=l.getAttr("name"),y["default"].on("a:carousel:"+n+":change:pageSize",this.onPageSizeChange),l.strategies.display.repaint(l),[2]}})})};a.onPageSizeChange=function(){a.displayOrHideCarouselButtons();a.updateResidualMediaAssetsOnPage(a.currentPlayingIndex)};
a.displayOrHideCarouselButtons=function(){var b=a.controllerOptions,d=b.isOptionalNavButton;if(b.shouldHideNavButtonOnPageChange){b=d?"a-carousel-goto-nextpage":"a-carousel-right";d=u["default"].cardRoot.getElementsByClassName(d?"a-carousel-goto-prevpage":"a-carousel-left")[0];b=u["default"].cardRoot.getElementsByClassName(b)[0];var g=u["default"].cardRoot.getElementsByClassName("a-carousel-page-max")[0];g=parseInt(g.innerHTML,10);d&&d.classList.toggle("aok-hidden",0===a.currentCarouselPage);b&&b.classList.toggle("aok-hidden",
a.currentCarouselPage+1===g)}};a.getNewIndicesOnPageChange=function(b,d,g){var k=a.impFired.length,l=b*g,n=d*g;if(a.controllerOptions.transitionStrategy===ba.SEARCH_GRID){var r=Math.floor(k/g);g=k-g;b===r&&(l=g);d===r&&(n=g)}return{oldFirstIndex:n,newFirstIndex:l}};a.onCarouselPageChange=function(b){if(void 0===b)a.metricsManager.reportCarouselPageChanged(-1,-1);else{var d=b.newPageNumber-1,g=b.oldPageNumber-1;a.metricsManager.reportCarouselPageChanged(d,g);b=a.carouselItemsPerPage();var k=a.getNewIndicesOnPageChange(d,
g,b);g=k.oldFirstIndex;k=k.newFirstIndex;a.logImpressionsForCarouselItems(d,k,b);a.videoManagers[k].setMuteStatus(a.videoManagers[a.currentPlayingIndex].isMuted,S.INHERIT);a.setVideosOnPreviousPageOutOfView(g,k,b);a.setNewPageAndCurrentPlayingVideo(d,k);a.setVideosOnNewPageInView(k,b);a.displayOrHideCarouselButtons()}};a.logImpressionsForCarouselItems=function(b,d,g){b=g*(b+1);g=a.impFired.length;for(b=b<=g?b:g;d<b;d++)g=u["default"].cardRoot.querySelector('[data-index="'+d+'"]'),a.updateMediaAssetSources(g,
d),a.logImpression(g,d)};a.setNewPageAndCurrentPlayingVideo=function(b,d){a.currentCarouselPage=b;a.isVideoOnCurrentCarouselPage(a.currentPlayingIndex,b)&&a.controllerOptions.transitionStrategy!==ba.SEARCH_GRID||(a.currentPlayingIndex=d)};a.setVideosOnPreviousPageOutOfView=function(b,d,g){a.onFiftyPercentViewabilityChange(0,!1,a.currentPlayingIndex);g=b+g;for(a.controllerOptions.transitionStrategy===ba.SEARCH_GRID&&b<d&&(g=d);b<g&&b<a.videoManagers.length;b++)a.onOnePercentViewabilityChange(0,!1,
b)};a.setVideosOnNewPageInView=function(b,d){for(var g=b;g<b+d&&g<a.videoManagers.length;g++)if(a.onOnePercentViewabilityChange(1,!0,g),a.isVideoPlaying())a.onFiftyPercentViewabilityChange(1,!0,g)};a.onFiftyPercentViewabilityChange=function(b,d,g){a.isVideoOnCurrentCarouselPage(g,a.currentCarouselPage)&&(a.isALink?(a.isALink=!1,a.videoManagers[a.currentPlayingIndex].onFiftyPercentViewabilityChange(b,d,!0)):(a.videoPlayersStatus[g]=d,a.videoManagers[a.currentPlayingIndex].onFiftyPercentViewabilityChange(b,
d)))};a.onOnePercentViewabilityChange=function(b,d,g){if(a.isVideoOnCurrentCarouselPage(g,a.currentCarouselPage))a.videoManagers[g].onOnePercentViewabilityChange(b,d)};a.isVideoOnCurrentCarouselPage=function(b,d){var g=a.carouselItemsPerPage(),k=(d+1)*g,l=k-g;if(a.controllerOptions.transitionStrategy===ba.SEARCH_GRID){var n=a.impFired.length;d===Math.floor(n/g)&&(k=n,l=n-g)}return b>=l&&b<k};a.updateResidualMediaAssetsOnPage=function(b){if(a.controllerOptions.shouldDelayMediaLoading)for(var d=a.carouselItemsPerPage();b<
(a.currentCarouselPage+1)*d&&b<a.videoManagers.length;b++){var g=u["default"].cardRoot.querySelector('[data-index="'+b+'"]');a.updateMediaAssetSources(g,b)}};a.carouselViewport=u["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0];return a}p.__extends(f,c);f.prototype.handlePageLoad=function(){var h=this,e=u["default"].cardRoot.querySelectorAll(T.CARD_ITEM);e.length&&e.forEach(function(a,b){a&&b<h.carouselItemsPerPage()&&h.logImpression(a,b)})};return f}(Jb),Yc=function(){return function(){var c=
this;this.update=function(f){c.dots&&c.dots[f]&&(lc(c.dots,"a-selected"),c.select(f))};this.getCarouselDots=function(){return c.dots};this.isCarouselDotSelected=function(f){return c.dots&&c.dots[f]?c.dots[f].classList.contains("a-selected"):!1};this.select=function(f){c.dots&&c.dots[f]&&c.dots[f].classList.add("a-selected")};(this.dots=Array.prototype.slice.call(u["default"].cardRoot.querySelectorAll(".a-dots > li")))&&0<this.dots.length&&this.select(0)}}(),Zc=function(c,f){return p.__awaiter(void 0,
void 0,void 0,function(){var h;return p.__generator(this,function(e){switch(e.label){case 0:return[4,new Promise(function(a,b){Rb(["@m/mash"],function(d){a(ec(d))},b)})];case 1:return h=e.sent().navigate,(null===c||void 0===c?0:c.immersiveVideoDeepLinkUrl)&&h({url:c.immersiveVideoDeepLinkUrl,successCallback:function(){f.reportImmersiveVideoLoaded(c)},failCallback:function(a){f.reportImmersiveVideoFailed(a,c)}}),[2]}})})},$c=function(c){function f(h,e){var a=c.call(this,h,e)||this;a.cardItemsReceived=
[];a.start=function(){return p.__awaiter(a,void 0,void 0,function(){var b,d,g,k,l=this;return p.__generator(this,function(n){switch(n.label){case 0:return b=this.controllerOptions,d=b.viewportConfig,g=b.selectors,this.carouselViewport=u["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0],d&&this.setConfigStyles(d,this.carouselViewport),k=u["default"].cardRoot.querySelectorAll(T.CARD_ITEM),k.forEach(function(r,t){var v=p.__assign(p.__assign({},JSON.parse(r.dataset.videoAdAttributesProps)),
{carouselItemIndex:t}),x=l.carouselItemsPerPage(),C=t<x;C?(l.logImpression(r,t),l.handleCardItemsReceived(0,v)):l.impFired[t]=!1;l.videoPlayersStatus[t]=!1;r.style.visibility="inherit";l.setupEventHandlers(r,v,t,{isItemOnFirstPage:C,selectors:g})&&(C||t<x+1)&&l.updateMediaAssetSources(r,t)}),[4,this.carousel.initialized];case 1:return n.sent(),this.carousel.on("change:pageNumber",function(r){return l.onCarouselPageChange(r)}),[2]}})})};a.handleCardItemsReceived=function(b,d){a.cardItemsReceived[b]||
(a.metricsManager.reportCardItemReceived(b,d),a.cardItemsReceived[b]=!0)};a.onPlaybackCompletedCallback=function(){var b=a.controllerOptions.enableAutoScroll;if(void 0===b?0:b)a.autoScrolled=!0,a.carousel.gotoNextPage()};a.onCarouselPageChange=function(b){var d;if(void 0===b)a.metricsManager.reportCarouselPageChanged(-1,-1);else{var g=b.newPageNumber-1;b=b.oldPageNumber-1;null===(d=a.pagination)||void 0===d?void 0:d.update(g);a.updateCarouselFirstItemMargin(0===g);a.metricsManager.reportCarouselPageChanged(g,
b,a.autoScrolled);a.autoScrolled=!1;d=a.videoManagers[a.currentPlayingIndex].isMuted;var k=S.INHERIT;V.isIOS()&&(d=!0,k=S.WEBKIT_MUTED);a.videoManagers[g].setMuteStatus(d,k);a.onOnePercentViewabilityChange(0,!1,a.currentPlayingIndex);a.currentPlayingIndex=g;a.currentCarouselPage=g;a.prevPlayingIndex=b;d=u["default"].cardRoot.querySelector('[data-index="'+a.currentPlayingIndex+'"]');k=u["default"].cardRoot.querySelector('[data-index="'+(a.currentPlayingIndex+1)+'"]');a.updateMediaAssetSources(k,a.currentPlayingIndex+
1);a.logImpression(d,a.currentPlayingIndex);a.handleCardItemsReceived(a.currentPlayingIndex,a.videoManagers[a.currentPlayingIndex].videoAdAttributes);a.onOnePercentViewabilityChange(1,!0,g);if(a.isVideoPlaying())a.onFiftyPercentViewabilityChange(1,!0,g);a.onFiftyPercentViewabilityChange(0,!1,b)}};a.onFiftyPercentViewabilityChange=function(b,d,g){var k=a.controllerOptions.carouselDisplayStrategy===O.SINGLE_ELEMENT?!(d&&g!==a.currentPlayingIndex):!0;g!==a.currentPlayingIndex&&g!==a.prevPlayingIndex||
!k||(a.isALink?(a.isALink=!1,a.videoManagers[g].onFiftyPercentViewabilityChange(b,d,!0)):(a.videoPlayersStatus[g]=d,a.videoManagers[g].onFiftyPercentViewabilityChange(b,d)))};a.onOnePercentViewabilityChange=function(b,d,g){if(g===a.currentCarouselPage)a.videoManagers[g].onOnePercentViewabilityChange(b,d)};a.getCarouselFirstItemMarginCalculations=function(b,d,g,k){switch(k){case O.SINGLE_ELEMENT:return(b-d)/2+g;default:return(b-d-5)/2}};a.updateCarouselFirstItemMargin=function(b){var d=a.controllerOptions,
g=d.minimumGutterWidth;g=void 0===g?9:g;var k=d.carouselDisplayStrategy;if(d.shouldPeekCarouselItems){d=u["default"].cardRoot.getElementsByClassName("a-carousel")[0];var l=g,n=u["default"].cardRoot.querySelectorAll(T.CARD_ITEM);b?1===n.length&&(l=0):l=a.getCarouselFirstItemMarginCalculations(screen.width,n[0].clientWidth,g,k);d.style.marginLeft=l.toString()+"px"}};a.updateCarouselFirstItemMargin(!0);a.autoScrolled=!1;a.controllerOptions.enablePaginationDots&&(a.pagination=new Yc);a.carouselViewport=
u["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0];return a}p.__extends(f,c);f.prototype.handlePageLoad=function(){var h=this,e=u["default"].cardRoot.querySelectorAll(T.CARD_ITEM);e.length&&e.forEach(function(a,b){a&&b<h.carouselItemsPerPage()&&(a=JSON.parse(e[b].dataset.videoAdAttributesProps),h.logImpression(e[b],b),h.handleCardItemsReceived(b,a))})};f.prototype.onImmersiveVideoCallback=function(h){Zc(h,this.metricsManager)};return f}(Jb),Kb;(function(c){c.Asin="ASIN";c.Video=
"VIDEO";c.Uri="URI"})(Kb||(Kb={}));var ra;(function(c){c.DETAIL="Detail";c.SEARCH="Search"})(ra||(ra={}));var Aa;(Aa||(Aa={})).SEARCH_GRID="searchGrid";var Lb;(Lb||(Lb={})).SponsoredBrandsIngress="sponsoredbrands";var Ba;(function(c){c.AF="AF";c[c.SMALL=500]="SMALL";c[c.LARGE=1E3]="LARGE"})(Ba||(Ba={}));var Mb=function(){return function(c,f){var h,e=this;this.getTreatment=function(l){if(0===e.weblabsMap.size)Fa["default"].log("There are no weblabs information found by ClientWebLapHlper","ERROR",e.attribution);
else{if(e.weblabsMap.has(l))return e.weblabsMap.get(l);Fa["default"].log("Get treatment for unknown weblab","ERROR",e.attribution)}};var a=new Map;c=c.split(",").filter(function(l){return 0<l.length});if(0<c.length)try{for(var b=p.__values(c),d=b.next();!d.done;d=b.next()){var g=d.value.split(":");a.set(g[0].trim(),g[1].trim())}}catch(l){var k={error:l}}finally{try{d&&!d.done&&(h=b.return)&&h.call(b)}finally{if(k)throw k.error;}}this.weblabsMap=a;this.attribution=f}}(),Nb;(function(c){c.DEFAULT="Default";
c.PRODUCT_WITH_TINTED_CTA="ProductWithTintedCta";c.STORE_VERTICAL_VIDEO="StoreVerticalVideo"})(Nb||(Nb={}));var Qa;(function(c){c.DEFAULT="Default";c.PRODUCT_WITH_TINTED_CTA="ProductWithTintedCta"})(Qa||(Qa={}));var Ob;(function(c){c.DEFAULT="Default";c.DEALS="Deals"})(Ob||(Ob={}));var ad=function(c,f,h){y["default"].on("a:truncate:"+c+":updated",function(e){var a,b;e=e.truncateInstance;var d=u["default"].cardRoot.querySelector(f),g=null===d||void 0===d?void 0:d.getAttribute(h);d&&g&&e.getTruncatedText()!==
e.getFullText()&&(null===(b=null===(a=e._$cut)||void 0===a?void 0:a.html)||void 0===b?void 0:b.call(a,g))});ac.refreshAutoTruncate()},ed=function(c){var f=c.cardName,h=c.isDesktop,e=c.viewMetricsOptions;e=void 0===e?{}:e;var a=c.visibilityThreshold;if(u["default"].cardRoot.dataset.props){h&&bd();Ya();var b=JSON.parse(u["default"].cardRoot.dataset.props),d=new Mb(b.weblabs,b.widgetType);f=d.getTreatment(H.ADPT_SBV_956803)===A.T1;var g=new fb({clientId:b.clientId,deviceEnv:hb(),deviceOs:ib(),deviceType:Ka(),
language:b.language,marketplaceId:b.marketplaceId,pageType:b.pageType,stage:Ja.getStage(),weblabs:b.weblabs,widgetGroupId:b.widgetGroupId,widgetIndex:b.widgetIndex,widgetType:b.widgetType,searchQuery:b.searchQuery,experience:b.experience,experienceVariation:b.experienceVariation},gb(b.marketplaceId),p.__assign({shouldLogAdUnitViewMetrics:f},e));b.widgetType===L.SHORT_FORM_VIDEO&&da["default"].visible().then(function(){g.reportWidgetOnScreen()});c.strategy===Aa.SEARCH_GRID&&(Fc.registerStrategy(ha.SEARCH_GRID),
Bc.registerStrategy(O.SEARCH_GRID));var k=cd(g,c,d,f);dd(b,k);a?a===Ba.AF?P.when("af").execute(function(){return Ra(d,b,g,k,c)}):da["default"].visible(a).then(function(){Ra(d,b,g,k,c)}):Ra(d,b,g,k,c)}else B.count(f+"-NoProps")},cd=function(c,f,h,e){var a=f.isDesktop,b=f.shouldDelayMediaLoading,d=f.showDealBadge;f=p.__assign(p.__assign({},f.controllerOptions),{shouldDelayMediaLoading:b,showDealBadge:d,shouldEnableVideoCleanup:Fb(h),shouldEnableReduceMotionEffects:h.getTreatment(H.SBV_842986)===A.T1,
shouldLogAdUnitViewMetrics:e});return a?new Xc(c,f):new $c(c,f)},Ra=function(c,f,h,e,a){return p.__awaiter(void 0,void 0,void 0,function(){var b,d,g,k;return p.__generator(this,function(l){switch(l.label){case 0:b=a.cardName;d=a.minNumberOfVideos;g=void 0===d?2:d;k=u["default"].cardRoot.querySelectorAll(T.CARD_ITEM);if(null===k||void 0===k||!k.length)return B.count(b+"-NoAds"),h.reportNoAdError(),[2];(null===k||void 0===k?void 0:k.length)<g&&(B.count(b+"-NumOfAdsLessThanMin"),h.reportNumOfAdsLessThanMinRequirement());
if(f.pageType===ra.DETAIL){l=u["default"].cardRoot.getElementsByClassName("a-carousel-header-row")[0];var n=u["default"].cardRoot.getElementsByClassName("a-carousel-heading")[0];l&&n&&(n.classList.add("featureHeading"),l.style.visibility="visible")}h.reportResponseReceived(k.length);fd(c,h,a);return[4,e.start()];case 1:return l.sent(),[2]}})})},dd=function(c,f){f.handlePageLoad();c.experience===Qa.PRODUCT_WITH_TINTED_CTA.toString()&&ad("sbvTintedCtaText",'[id="ctaLink"]',"data-alternatectatext")},
fd=function(c,f,h){return p.__awaiter(void 0,void 0,void 0,function(){var e,a,b;return p.__generator(this,function(d){e=c.getTreatment(H.SBV_672322)===A.T1;a=h.cardName;b=h.enableAdFeedback;bb(f,{cardName:a,enableAdFeedback:b,isAdFeedbackForCards:e});return[2]})})},bd=function(){var c=u["default"].cardRoot.getElementsByClassName("a-carousel-left")[0],f=u["default"].cardRoot.getElementsByClassName("a-carousel-right")[0];if(c){var h=c.getElementsByClassName("a-carousel-button")[0];c.style.height="100%";
h.style.top="45%"}f&&(f.style.height="100%",f.getElementsByClassName("a-carousel-button")[0].style.top="45%")},gd=function(){return function(c,f,h,e,a,b){var d=this;void 0===h&&(h=!1);void 0===e&&(e=!1);void 0===a&&(a=!1);void 0===b&&(b=!1);this.isALink=!1;this.videoManagers=[];this.videoPlayersStatus=[];this.impFired=[];this.carouselItemsPerPage=function(){var g=d.carouselViewport.clientWidth,k=u["default"].cardRoot.getElementsByClassName("a-carousel-card")[0].clientWidth;return Math.floor(g/(k+
18))};this.start=function(){return p.__awaiter(d,void 0,void 0,function(){var g,k,l=this;return p.__generator(this,function(n){switch(n.label){case 0:return this.carouselViewport=u["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0],g=u["default"].cardRoot.querySelectorAll('[data-type="mbvItem"]'),g.forEach(function(r,t){var v,x,C,z,E,Z;t<l.carouselItemsPerPage()?l.logImpression(r,t):l.impFired[t]=!1;l.videoPlayersStatus[t]=!1;var K=JSON.parse(r.dataset.videoAdAttributesProps);r.style.visibility=
"inherit";r.querySelectorAll('[data-type="productTitle"]')[0].style.display="-webkit-box";var N=r.querySelector('[data-type="videoContainer"]'),X=r.querySelector('[data-type="productContainer"]'),F=r.querySelector('[data-type="brandContainer"]'),pa=null!==(v=null===F||void 0===F?void 0:F.classList.contains("aok-hidden"))&&void 0!==v?v:!1;(v=r.querySelectorAll("a"))&&v.forEach(function(Q){Q.addEventListener("click",function(){l.isALink=!0})});if(N)if(X)if(null===F)l.metricsManager.reportMissingBrandElement(K);
else{pa&&(pa=null!==(C=null===(x=null===F||void 0===F?void 0:F.querySelector('[class*="nameContainer"] span'))||void 0===x?void 0:x.textContent)&&void 0!==C?C:"",x=null!==(z=null===F||void 0===F?void 0:F.querySelector('a[class*="storeLink"]'))&&void 0!==z?z:null,l.metricsManager.reportMissingBrandElement(K,{storeName:pa,storeUrl:null!==(E=null===x||void 0===x?void 0:x.getAttribute("href"))&&void 0!==E?E:void 0,storeCta:null!==(Z=null===x||void 0===x?void 0:x.text)&&void 0!==Z?Z:void 0}));if(l.shouldLogAdUnitViewMetrics){var qa=
new Hb(r);qa.attach()}z=new kb(l.metricsManager,K,{},qa);K=new mb(N,z,K,!0,l.shouldDelayLoadingVideos,{shouldEnablePlayButton:!0,shouldEnableVideoCleanup:l.shouldEnableVideoCleanup,shouldEnableReduceMotionEffects:l.shouldEnableReduceMotionEffects});l.videoManagers.push(K);ca.registerElement(N,.5,!0,!0,!0,l.onFiftyPercentViewabilityChange,t);ca.registerElement(N,.01,!0,!0,!0,l.onOnePercentViewabilityChange,t);N=new pb(l.metricsManager,K);(new qb({brandElement:F,productElements:[X]},N)).setupWidgetEvents();
(X=r.querySelector('[data-type="playIcon"]'))&&X.addEventListener("click",function(Q){return l.onPlayBtnEventTriggered(Q,t)});l.shouldShowDealBadge&&ob(r)}else l.metricsManager.reportMissingProductElement(K);else l.metricsManager.reportMissingVideoElement(K)}),[4,this.carousel.initialized];case 1:return n.sent(),this.carousel.on("change:pageNumber",this.onCarouselPageChange),k=ka["default"].getCarousel(Ea.unscope(this.carouselViewport)),k.strategies.display.repaint(k),[2]}})})};this.getDynamicMetricAttributes=
function(){var g;return g={},g[m.CAROUSEL_ITEM_INDEX]=d.currentPlayingIndex,g[m.CAROUSEL_PAGE_NUMBER]=d.currentCarouselPage,g};this.logImpression=function(g,k){if(!d.impFired[k]&&(g=g.querySelector('[data-type="ip"]'))){var l=g.getAttribute("data-src");l&&(g.setAttribute("src",l),d.impFired[k]=!0)}};this.updateClientMetricsContext=function(){d.metricsManager.setClientMetricsContext({getDynamicMetricsAttributes:d.getDynamicMetricAttributes})};this.onCarouselPageChange=function(g){if(void 0===g)d.metricsManager.reportCarouselPageChanged(-1,
-1);else{var k=g.newPageNumber-1,l=g.oldPageNumber-1;d.metricsManager.reportCarouselPageChanged(k,l);g=d.carouselItemsPerPage();var n=k*g;l*=g;var r=g*(k+1),t=d.impFired.length;r=r<=t?r:t;for(t=n;t<r;t++){var v=u["default"].cardRoot.querySelector('[data-index="'+t+'"]');d.logImpression(v,t)}d.videoManagers[n].setMuteStatus(d.videoManagers[d.currentPlayingIndex].isMuted,S.INHERIT);d.onFiftyPercentViewabilityChange(0,!1,d.currentPlayingIndex);for(r=l;r<l+g&&r<d.videoManagers.length;r++)d.onOnePercentViewabilityChange(0,
!1,r);d.currentCarouselPage=k;d.isVideoOnCurrentCarouselPage(d.currentPlayingIndex,k)||(d.currentPlayingIndex=n);for(r=n;r<n+g&&r<d.videoManagers.length;r++)if(d.onOnePercentViewabilityChange(1,!0,r),d.isMbvVideoPlaying())d.onFiftyPercentViewabilityChange(1,!0,r)}};this.onPlayBtnEventTriggered=function(g,k){d.metricsManager.reportVideoPlayButtonTriggered(k,d.videoManagers[k].videoAdAttributes);d.pauseVideo(d.currentPlayingIndex);d.videoManagers[k].setMuteStatus(d.videoManagers[d.currentPlayingIndex].isMuted,
S.INHERIT);d.playVideo(k)};this.pauseVideo=function(g){d.videoManagers[g].pause()};this.playVideo=function(g){d.videoManagers[g].play();d.currentPlayingIndex=g};this.isMbvVideoPlaying=function(){return d.videoPlayersStatus.some(function(g){return g})};this.onFiftyPercentViewabilityChange=function(g,k,l){d.isVideoOnCurrentCarouselPage(l,d.currentCarouselPage)&&(d.isALink?(d.isALink=!1,d.videoManagers[d.currentPlayingIndex].onFiftyPercentViewabilityChange(g,k,!0)):(d.videoPlayersStatus[l]=k,d.videoManagers[d.currentPlayingIndex].onFiftyPercentViewabilityChange(g,
k)))};this.onOnePercentViewabilityChange=function(g,k,l){if(d.isVideoOnCurrentCarouselPage(l,d.currentCarouselPage))d.videoManagers[l].onOnePercentViewabilityChange(g,k)};this.isVideoOnCurrentCarouselPage=function(g,k){var l=d.carouselItemsPerPage();k=(k+1)*l;return g>=k-l&&g<k};this.carousel=Va["default"].getCarousel(u["default"].cardRoot.getElementsByClassName("a-carousel-container")[0]);this.metricsManager=c;this.shouldDelayLoadingVideos=f;this.shouldShowDealBadge=h;this.shouldEnableVideoCleanup=
e;this.shouldEnableReduceMotionEffects=a;this.shouldLogAdUnitViewMetrics=b;this.currentCarouselPage=this.currentPlayingIndex=0;this.updateClientMetricsContext()}}(),ja=function(c,f){return c.querySelector("[class*="+f+"]")},hd=function(c,f,h){c=JSON.parse(c);c.adCreativeMetaData=f.adCreativeMetaData;c.feedbackFormContainerId=h;return encodeURI(JSON.stringify(c))},id=function(c,f,h,e){return p.__awaiter(void 0,void 0,void 0,function(){var a,b,d,g,k,l,n,r;return p.__generator(this,function(t){a="adFeedbackModal_"+
c;t=(null===(r=ja(f,"ad-feedback-modal-container"))||void 0===r?void 0:r.className)||"";b="."+f.className+" ."+t.replace(" ",".");g=(d=h().adCreativeMetaData.adCreativeDetails)?d.length:0;k=f.dataset.deviceType||"desktop";t=Math.max(560,125*g+130);var v=g;var x=k;v=e&&"true"===e.toLowerCase()?2>v?605:810:"tablet"==x?2>v?545:775:2>v?430:645;l={a11yOpenMessage:"",width:t,height:v};try{return n=gc["default"].create(a,b,l),[2,n]}catch(C){throw B.count("adfeedback:cards:clientDesktop:modalCreation:failure",
1),Error("Modal Creation Failed : "+C);}})})},ld=function(c,f,h,e,a,b){var d="rtl"===document.getElementsByTagName("html")[0].dir?"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";var g=ja(aa["default"].cardRoot,d);c.on("beforeShow",function(){return p.__awaiter(void 0,void 0,void 0,function(){var k;return p.__generator(this,function(l){switch(l.label){case 0:return k=jd(c,f,h),[4,c.render(function(n){var r="250px",t=h().adCreativeMetaData.adCreativeDetails;t&&2>t.length&&(r="150px");
g.style.marginTop=r;n.innerHTML="";r=n.appendChild;t=document.getElementsByTagName("html")[0].dir;var v=aa["default"].createElement("div"),x=aa["default"].createElement("div");v.innerHTML=a;"rtl"===t?(v.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 28px; margin-right: 0px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 0px; padding-right: 25px; padding-top: 16px; text-align: right; text-rendering: optimizelegibility; visibility: visible;'),
x.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to left, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: right; visibility: visible; z-index: 10;')):
(v.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 0px; margin-right: 28px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 25px; padding-right: 0px; padding-top: 16px; text-align: left; text-rendering: optimizelegibility; visibility: visible;'),x.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to right, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: left; visibility: visible; z-index: 10;'));
x.appendChild(v);r.call(n,x);r=document.getElementsByTagName("html")[0].dir;t=aa["default"].createElement("div");"rtl"===r?t.setAttribute("style","padding-bottom: 16px; padding-right: 50px ; padding-top: 16px; justify-content: center; align-items: center;"):t.setAttribute("style","padding-bottom: 16px; padding-left: 50px ; padding-top: 16px; justify-content: center; align-items: center;");kd(g,t,e,k,b);n.appendChild(t)})];case 1:return l.sent(),[2]}})})})},jd=function(c,f,h){h=h();var e=h.adCreativeMetaData.adCreativeDetails;
null===e||void 0===e?void 0:e.sort(function(a,b){return a.adCreativeIndex<b.adCreativeIndex?-1:1});return hd(f,h,c.id)},kd=function(c,f,h,e,a){f.appendChild(c);"function"==typeof B.uet&&B.uet("bb","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});hc["default"].post("/af/multi-creative/feedback-form",{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===h?"en-US":h}},{pl:e,deviceType:"desktop"}).then(function(b){return p.__awaiter(void 0,
void 0,void 0,function(){var d,g,k;return p.__generator(this,function(l){"function"==typeof B.uet&&B.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});B.count("adfeedback:cards:clientDesktop:fetchFormContent:success",1);d=aa["default"].createElement("div");d.innerHTML=String(b.responseBody);for(g=0;g<d.children.length;++g)k=d.children[g],"SCRIPT"===k.tagName?Sa("script",k,f):"LINK"===k.tagName?Sa("link",k,f):Sa("div",k,f);f.removeChild(c);return[2]})})}).catch(function(){"function"==
typeof B.uet&&B.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});B.count("adfeedback:cards:clientDesktop:fetchFormContent:failure",1);f.innerHTML=a});"function"==typeof B.uex&&B.uex("ld","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1})},Sa=function(c,f,h){var e=aa["default"].createElement(c);e.innerHTML=f.innerHTML;f.getAttributeNames().forEach(function(a){e.setAttribute(a,f.getAttribute(a)||"")});h.appendChild(e)},Pb={},md=function(c,f){return p.__awaiter(void 0,
void 0,void 0,function(){var h,e,a,b,d,g,k,l,n;return p.__generator(this,function(r){h=ja(c,"ad-feedback-primary-link");e=f().adFeedbackLabelId;a=Wa["default"].setup();b="open-modal"+e;d=f().adCreativeMetaData.adCreativeDetails;g=c.dataset;k=g.isDsaEnabled;l=g.weblabTreatment;n=String(k);"undefined"===n&&(n=d&&0<d.length?d[0].selectionSignals?"true":"false":"false");"true"===n&&"T1"!==l&&(n="false");a.attach(b,h);a.define(b,"click",function(){return p.__awaiter(void 0,void 0,void 0,function(){var t;
return p.__generator(this,function(v){switch(v.label){case 0:return(t=Pb[e])?[3,2]:[4,id(e,c,f,n)];case 1:t=v.sent();var x=c.dataset,C=x.formHeaderText,z=x.dsaFormHeaderText;ld(t,x.adFeedbackPayload,f,x.currentLocale,"true"===n?z:C,x.formLoadErrorText);Pb[e]=t;v.label=2;case 2:return t.show(),[2]}})})});return[2]})})},nd=function(c,f){var h=Wa["default"].setup(),e="mouse-enter"+f;f="mouse-leave"+f;var a=ja(c,"ad-feedback-primary-link"),b=ja(c,"ad-feedback-text-desktop"),d=ja(c,"ad-feedback-sprite");
h.attach(e,a);h.define(e,"mouseenter",function(){d.style.backgroundPosition="0px -12px";b.style.color="#111111"});h.attach(f,a);h.define(f,"mouseleave",function(){d.style.backgroundPosition="0px 0px";b.style.color="#555"})},Qb=function(c){return p.__awaiter(void 0,void 0,void 0,function(){var f,h,e,a;return p.__generator(this,function(b){switch(b.label){case 0:return b.trys.push([0,3,,4]),f=c(),h=u["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+f.adFeedbackLabelId)[0],e=h.dataset.isSponsoredLabelActive,
"false"===(e||"false").toLowerCase()?[2]:[4,nd(h,f.adFeedbackLabelId)];case 1:return b.sent(),[4,md(h,c)];case 2:return b.sent(),[3,4];case 3:throw a=b.sent(),B.count("adfeedback:cards:clientDesktop:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for desktop client : "+a);case 4:return[2]}})})},Ta=function(){return p.__awaiter(void 0,void 0,void 0,function(){var c,f,h,e,a,b,d,g,k,l,n;return p.__generator(this,function(r){if(!u["default"].cardRoot.dataset.props)return B.count("sbvMultiBrandVideoNoProps"),
[2];c=JSON.parse(u["default"].cardRoot.dataset.props);f=new Mb(c.weblabs,L.MULTI_BRAND_VIDEO);h=c.pageType;a=(e=h===ra.DETAIL)&&f.getTreatment(H.ADPT_SBV_959560)===A.T1;b=h===ra.SEARCH&&f.getTreatment(H.SBV_620753)===A.T1;d=e&&f.getTreatment(H.SBV_668132)===A.T1;g=f.getTreatment(H.MBV_394048)||"";a||b?(k=Ba.LARGE,l=b&&f.getTreatment(H.SBV_642751)===A.T1,n={shouldLogViewMetrics:!0,shouldBillViewMetrics:!0},ed({cardName:"multi-brand-video-desktop",controllerOptions:{isOptionalNavButton:b,minimumGutterWidth:b?
0:18,shouldHideNavButtonOnPageChange:b,transitionStrategy:b?ba.SEARCH_GRID:void 0,viewportConfig:{height:"380px"}},enableAdFeedback:Qb,isDesktop:!0,shouldDelayMediaLoading:l,visibilityThreshold:k,viewMetricsOptions:n,showDealBadge:d,showEELBadge:f.getTreatment(H.SBV_656845)===A.T1,strategy:b?Aa.SEARCH_GRID:void 0})):(Ya(),od(),g===A.T1||g===A.T5?da["default"].visible(sa.NONE).then(function(){Ca(f,c,g,d)}):g===A.T2||g===A.T6?da["default"].visible(sa.SMALL).then(function(){Ca(f,c,g,d)}):g===A.T3||g===
A.T7?da["default"].visible(sa.LARGE).then(function(){Ca(f,c,g,d)}):Ca(f,c,g,d));return[2]})})},Ca=function(c,f,h,e){void 0===e&&(e=!1);return p.__awaiter(void 0,void 0,void 0,function(){var a,b,d,g,k,l,n,r,t,v,x,C;return p.__generator(this,function(z){switch(z.label){case 0:a=c.getTreatment(H.SBV_672322)===A.T1;b=c.getTreatment(H.ADPT_SBV_956803)===A.T1;d={shouldLogViewMetrics:!0,shouldBillViewMetrics:!0,shouldLogAdUnitViewMetrics:b};g=c.getTreatment(H.ADPT_SBV_880477)===A.T1;k=!g&&(h===A.T4||h===
A.T5||h===A.T6||h===A.T7);l=new fb({clientId:f.clientId,deviceEnv:hb(),deviceOs:ib(),deviceType:Ka(),language:f.language,marketplaceId:f.marketplaceId,pageType:f.pageType,stage:Ja.getStage(),weblabs:f.weblabs,widgetGroupId:f.widgetGroupId,widgetIndex:void 0,widgetType:f.widgetType},gb(f.marketplaceId),d);n=u["default"].cardRoot.querySelectorAll('[data-type="mbvItem"]');if(null===n||void 0===n||!n.length)return B.count("sbvMultiBrandVideoNoAds"),l.reportNoAdError(),[2];2>(null===n||void 0===n?void 0:
n.length)&&(B.count("sbvMultiBrandVideoNumOfAdsLessThanMin"),l.reportNumOfAdsLessThanMinRequirement());r=u["default"].cardRoot.getElementsByClassName("a-carousel-header-row")[0];t=u["default"].cardRoot.getElementsByClassName("a-carousel-heading")[0];t.classList.add("featureHeading");r.style.visibility="visible";Ia();l.reportResponseReceived(n.length);bb(l,{cardName:"sbvMultiBrandVideo",enableAdFeedback:Qb,isAdFeedbackForCards:a});v=Fb(c);x=c.getTreatment(H.SBV_842986)===A.T1;C=new gd(l,k,e,v,x,b);
return[4,C.start()];case 1:return z.sent(),[2]}})})},od=function(){var c=u["default"].cardRoot.getElementsByClassName("a-carousel-left")[0],f=u["default"].cardRoot.getElementsByClassName("a-carousel-right")[0];c.style.height="100%";f.style.height="100%";c=c.getElementsByClassName("a-carousel-button")[0];f=f.getElementsByClassName("a-carousel-button")[0];c.style.top="45%";f.style.top="45%"},sa;(function(c){c[c.NONE=0]="NONE";c[c.SMALL=100]="SMALL";c[c.LARGE=500]="LARGE"})(sa||(sa={}));Da._operationNames=
[];Da.card=function(){return p.__awaiter(void 0,void 0,void 0,function(){return p.__generator(this,function(c){da["default"].pageReady.then(Ta,Ta);return[2]})})};Da.initOnReady=Ta});
