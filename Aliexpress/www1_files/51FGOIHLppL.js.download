(function(y){var B=window.AmazonUIPageJS||window.P,G=B._namespace||B.attributeErrors,c=G?G("DPTwisterPlusDesktopConfiguratorAssets",""):B;c.guardFatal?c.guardFatal(y)(c,window):c.execute(function(){y(c,window)})})(function(y,B,G){y.when("A","desktop-configurator-view","desktop-configurator-widgets-factory","desktop-configurator-slot-manager","twister-dynamic-style","desktop-configurator-logger","desktop-configurator-dimension-handler","desktop-configurator-side-sheet-view","desktop-configurator-popover-factory",
"twister-js-init-dpx-data","twister-plus-desktop-configurator-mark-render").register("desktop-configurator-view-initialiser",function(c,k,n,r,f,m,h,w,t,g){var q=g?g.inlineTwisterData||{}:{};q.inlineTwisterEnabled&&(m=new m,new k(g,n.Row,r,f,m,h,w,t),!q.shouldDelayRegistrationWithTwisterCore&&c.trigger("desktop-configurator-view-initialized"))});"use strict";y.when("A").register("desktop-configurator-dimension-handler",function(c){function k(c){this.numberOfDimensionsExpandedOnLanding=c.numberOfDimensionsExpanded||
0;this.expandAllDimensions=-1===this.numberOfDimensionsExpandedOnLanding;this.dimensionKeyRowMap={};this.expandedDimensionList=[];this.maxNumberOfDimensionsExpanded=c.maxNumberOfDimensionsExpanded||1}k.prototype={registerDimension:function(c,k){this.dimensionKeyRowMap[c]=k;(this.expandAllDimensions||this.expandedDimensionList.length<this.numberOfDimensionsExpandedOnLanding)&&this.expandedDimensionList.push(c)},init:function(){-1===this.maxNumberOfDimensionsExpanded&&(this.maxNumberOfDimensionsExpanded=
Object.keys(this.dimensionKeyRowMap).length)},expandDimension:function(c){-1===this.expandedDimensionList.indexOf(c)&&this.expandedDimensionList.push(c);if(this.maxNumberOfDimensionsExpanded<this.expandedDimensionList.length)for(var k=0;k<this.expandedDimensionList.length&&(this.expandedDimensionList[k]!==c&&this.dimensionKeyRowMap[this.expandedDimensionList[k]].collapse(),this.maxNumberOfDimensionsExpanded!==this.expandedDimensionList.length);k++);},collapseDimension:function(c){c=this.expandedDimensionList.indexOf(c);
-1!==c&&this.expandedDimensionList.splice(c,1)}};return k});"use strict";y.when("A","desktop-configurator-constants","3p-promise","desktop-configurator-price-mismatch-utils").register("desktop-configurator-view",function(c,k,n,r){function f(h,f,t,g,q,A,z,b){function a(){"function"===typeof B.markFeatureInteractive&&B.markFeatureInteractive("twister",{hasComponents:!0,components:[{name:"twister-desktopConfigurator"}]})}function e(){if(!F)return 0===h.unselectedDimCount;var b=p();return!!F.util.getAsinFromSelectionInfo(b)}
function u(b,d,a,e,c,p,u,h,g,v,x,f){return{text:b,image:d||"",popoverImage:a||"",name:e,id:x+"_"+e,selected:c,slotHtm:p,showSlot:u,isVisible:h,unavailable:g,defaultSlotUnavailable:U,isCirclularImageSwatch:l.inlineTwisterData&&"CIRCLE"===l.inlineTwisterData.swatchShape,asin:v,pageUrl:f}}function v(b){V[b]||null===J[b]||(b=l.rows[b],b.toggleSwatch&&b.toggleSwatch.removeMisplacedSwatch())}function d(b,d){var a=O.unselectedDimensionPrompt||"",e=h&&h.variationDisplayLabels?h.variationDisplayLabels[b]:
"",c=h&&h.variationValues?h.variationValues[b][d]:"";return{dimKey:b,titleSelectorPrefix:"inline-twister-dim-title-",titleValueSelector:"inline-twister-dim-title-value",mainText:e,subText:-1!==d?c:a.replace("###dimension",e||"")}}function p(){if(!F){var b=[];c.each(l.dimList,function(d){b.push({dimKey:d,val:h.selectedVariationValues?h.selectedVariationValues[d]:-1})});return b}return F.state()}function x(){return c.map(l.dimList,function(b,d){if(!l.isSingletonMap[b])return new n(function(a){C(l.rows[b],
b,d);a()})})}function C(b,d,a){var p=l.inlineTwisterData.slotsEnabledDimensions,g=!!((l.dimList.length===p.length?p[a]:p[0])&&e(d));a=h.variationValues[d];var v=b.getInitialVisibleSwatchList(),x=[];c.each(a,function(b,a){b=u(b,W[d+"::"+a],X[d+"::"+a],a,l.initSelectionState[d].val===a,v[a]?v[a].slotHtm:"",g,v[a]&&v[a].isVisible,v[a]&&v[a].unavailable,G,d,N[d]?N[d][b]:null);x.push(b)});l.swatches[d]=x}function D(){c.each(l.rows,function(b){l.isSingletonMap[b.dimKey]||(b.createDisplaySwatches(),l.textSwatchMap[b.dimKey]&&
b.toggleSwatch.alignTextSwatches())})}function E(){function g(b,d,a){var e,p,v,x=b.expanderContent.find(".inline-twister-swatch:not(.aok-hidden):not(.swatch-prototype)"),f=h.variationValues[d]||[],k=l.inlineTwisterData.inlineVariationsSize,m=-1,t=k,w=[],q=null;-1===k&&(m=parseInt(b.expanderContent.attr("data-swatchCountPerRow"))||x.length,t=m*P[d]);c.each(x,function(c,l){var h=parseInt(c.getAttribute("data-idxInToggleSwatchList")),g="true"===c.getAttribute("data-initiallySelected"),x="true"===c.getAttribute("data-initiallyUnavailable");
e=c.getAttribute("data-asin");p=h;v=f[h]||"";var C,n,D;C=W[d+"::"+p];n=X[d+"::"+p];D=v;x=u(D,C,n,p,g,"",a,!0,x,e,d,N[d]?N[d][D]:null);b.toggleSwatch&&(C=b.toggleSwatch.createSwatch(x,c),x.isVisible=C.isVisible);w.push(x);g&&l>=t&&(J[d]=h);-1!==k&&-1===m&&(c=c.getBoundingClientRect().top,null===q?q=c:c!==q&&(m=l))});-1!==k&&(-1===m&&(m=x.length),P[d]=Math.ceil(x.length/m));l.inlineVariationsSize[d]=x.length;b.toggleSwatch&&b.toggleSwatch.setNumberOfSwatchesPerRow(m);return w}function x(d,a,p){var h=
!(!d||!e(a)),u=l.rows[a].getInitialVisibleSwatchList();h&&c.each(u,function(e){if(!e.unavailable){var c=b.updateIfCurrentlyActive.bind(b,e.id),c=l.slotManager.get(e.asin,a,l.noOfLoadingIndicator,!1,Z,c,p);e.updateSlotNode({showSlot:d,slotHtm:c},!1,a)}})}function t(b,d,a){b={dimIndex:l.dimIndexMap[b],dimValueIndex:d};d=k.DP_STATE_VIEW_SUBTYPE;var e=l.dimensionsMap,c;c=p();for(var h=k.CHAR_UNDERSCORE,u=[],g=0;g<l.dimensionsMap.length;g++){var x=c[g].val;-1===x&&(x=k.CHAR_ASTERISK);u.push(String(x))}c=
h?u.join(h):u;return{divMetadata:b,eventType:a,subType:d,dimensionsMap:e,currDimCombId:c}}var C=p(),q=0,D={},n=l.inlineTwisterData.slotsEnabledDimensions,E=l.inlineTwisterData.popoverSlotsEnabledDimensions;m.each(C,function(b,d){D[d.dimKey]=d;l.dimIndexMap[d.dimKey]=b;l.dimensionsMap[b]=d.dimKey});l.initSelectionState=D;m.each(l.dimList,function(b,a){var e=D[a].val;b=H(a);var e=d(a,e),c=!(!Q&&(l.dimList.length===n.length?n[q]:n[0])),u=-1!==R.indexOf(a);l.textSwatchMap[a]=b;b=new f("inline-twister-row-",
e,{showSlot:!1,dimKey:a,inlineTwisterData:l.inlineTwisterData},{handleDimensionExpansion:function(b,d,e){a=b.dimKey;if(e){l.dimensionHandler.expandDimension(a);b=G;e={};S[a]?(e=T(l.swatches[a],d,a,p(),!1,!u,c),l.indexTranslationMap[a]=e,b={swatches:l.swatches[a]}):(x(d,a,c),S[a]=!0);var h=l.rows[a];h.setState(b,e,K,null,!1);L(d,h,a);l.logger.logDimensionExpanded(a);u||(J[a]=null)}else l.dimensionHandler.collapseDimension(a),l.logger.logDimensionCollapsed(a)}},l.logger);l.rows[a]=b;r.createLandingPromises(l.logger,
a);q+=1});0===l.inlineTwisterData.numberOfDimensionsExpanded&&(a(),aa=!0);q=0;m.each(l.dimList,function(d,a){function u(d,e,c){if(e){var p=parseInt(e.buttonName,10),h=d[p]&&d[p].id?d[p].id:"";a=e.buttonGroupName;d[p]&&d[p].selected&&l.logger.logSelectedSwatchClick();h&&b.exists(h)&&b.hide(h);K=a;d={dimKey:a,val:p};B.newTwisterInteractionStartTime=new Date;l.twister.metaData(t(a,p,k.viewEvents.CLICK));l.twister.dimensionChanged(d);l.logger.logDimensionValueClick();c&&l.logger.logDimValueClickAfterAutoUpdate()}}
function x(a,d){var c=d.data,h=d.type;d=d.$currentTarget;var u=c.id,g=!!e(a),g=M&&g&&H,g=c.showImageInPopOver||g,v=!H,f=[];if(c){if(h===k.viewEvents.MOUSE_ENTER){var m=parseInt(c.name,10);f.push({dimKey:a,val:m});g&&b.show(u,d,c,v)}else g&&b.hide(u),f=p();F&&(l.twister.metaData(t(a,m,h)),l.twister.dimensionPeek(f));K=a}}function f(a,d){var b=parseInt(a.buttonName,10),e=l.swatches[d];(e?e[b]:G)?(I.setUserInteracting(!0),c.delay(function(){u(e,a)},350),l.logger.logSecViewSwatchClick()):y.log("Selected swatch not found on side sheet toggle button click. Value clicked: "+
b+" ; Swatch length: "+l.swatches[d].length,ba.ERROR,ba.ATTRIBUTION)}function w(a,d){l.isSideSheetOpen=d;l.isWindowResizedAfterSideSheetOpen&&!d&&m.each(l.dimList,function(d,a){l.textSwatchMap[a]&&(D(a),(d=l.rows[a])&&d.toggleSwatch&&(d.toggleSwatch.alignTextSwatches(),d.toggleSwatch.alignTextSwatchNodesInLastRow()))});l.isWindowResizedAfterSideSheetOpen=!1}function C(d,a,e){var h=O.desktopConfiguratorAllOptionsString||"",u=l.swatches[d].length,g={dimensionDisplayText:e.mainText,displayValueText:e.subText,
dimKey:d,getSwatchInfo:I.getSwatch.bind(I),destroyPopover:b.destroy,optionsText:h,totalValueCount:u,isTextSwatch:r};l.sideSheet.open(g);var x={swatches:l.swatches[d]};c.delay(function(){var b=T(l.swatches[d],a,d,p(),!0,!1,z);Y&&v(d);I.setState(x,b,K,null,!0,!0);l.sideSheet.update(g);V[d]=!0;c.delay(function(){r&&L(a,I,d,!0);r&&I.toggleSwatch&&u<k.TEXT_ALIGNMENT_LIMIT&&I.toggleSwatch.alignTextSwatches(!1,!0)})},1E3);l.isSideSheetOpen=!0;l.isWindowResizedAfterSideSheetOpen=!1;l.logger.logSeeAllLinkClick("Dimension"+
(l.dimIndexMap[d]+1))}function D(d){F&&(l.isWindowResizedAfterSideSheetOpen=!0,l.isSideSheetOpen||L(l.showSlotMap[d],l.rows[d],d,!1))}var r=l.textSwatchMap[a];d=[];var A=!Q&&(l.dimList.length===n.length?n[q]:n[0]),H=l.dimList.length===E.length?E[q]:E[0],z=!A,M=A||H,Y=-1!==R.indexOf(a),I=l.rows[a];l.showSlotMap[a]=M;P[a]=l.inlineTwisterData.numOfRowsPerDimension;A=-1!==h.singletonDimensionKeys.indexOf(a);l.isSingletonMap[a]=A;q+=1;!A&&I&&(A=!(!M||!e(a)),J[a]=null,d={name:a,swatches:d,isTextSwatch:r,
onChange:u,onHover:x,hideSlotsFromMainView:z,totalSwatchCount:(h.variationValues[a]||[]).length,preserveNaturalSwatchOrder:Y},l.sideSheet.registerToggleButtonGroup(a,f,w),I.initializeComponents(d,M,{showSideSheet:C,handleWindowResize:D}),l.dimensionHandler.registerDimension(a,I),d=g(I,a,A),l.swatches[a]=d)});aa||a()}function H(d){var a=!0;(l.inlineTwisterData.disableImageSwatch===G?0:l.inlineTwisterData.disableImageSwatch)||(a=!l.inlineTwisterData.imageDimensionKeysMap[d]);return a}function T(d,a,
p,u,h,g,x,f){var k=!(!a||!e(p));a=F.util.getDimAvailability(p,u);var w=-1!==R.indexOf(p),t=c.state("filteredAvailability");if(t!==G&&!0===t.filterApplicable&&1===u.length){for(var C={},q=0;q<t.asins.length;++q)C[t.asins[q]]=1;for(var t=[],D=[],q=0;q<a.available.length;++q){var n=a.available[q];n.asin in C?t.push(n):D.push(n)}a.available=t;a.unavailable=D}var r={},E=0,A=b.updateIfCurrentlyActive,H=-1,z=-1;m.each(u,function(d,a){a.dimKey===p&&(H=a.val,z=d)});-1!==H&&(g&&(r[H]=E),E++);var y=l.rows[p];
c.each(a.available,function(a){d[a.index]=d[a.index]||{};var e=d[a.index];e.unavailable=!1;e.selected&&(H=a.index,e.isVisible||(null!==J[p]&&d[J[p]]&&(d[J[p]].isVisible=!1,w&&v(p)),J[p]=a.index),e.isVisible=!0);g&&(e.isVisible=E<l.inlineVariationsSize[p]||e.selected);var u=e.isVisible||h,m=h?e.id+"_sec":e.id;k&&u?e.slotHtm=l.slotManager.get(a.asin,p,l.noOfLoadingIndicator,h,Z,A.bind(b,m),x,f):(e.slotHtm=e.slotHtm||"",A(m,e.slotHtm));h&&y&&y.toggleSwatch&&(u=y.toggleSwatch.getSwatch(a.index),c.objectIsEmpty(u)&&
(r[a.index]=E));g&&H!==a.index&&(r[a.index]=E);e.showSlot=k;e.selected||E++});c.each(a.unavailable,function(a){d[a.index]=d[a.index]||{};var b=d[a.index];b.unavailable=!0;g&&(b.isVisible=E<l.inlineVariationsSize[p]);var e=c.state("filteredAvailability"),u=U;e!==G&&!0===e.filterApplicable&&(a.index in e.variations[z]||(u='\x3cspan class\x3d"a-size-small default-slot-unavailable"\x3e'+ca+"\x3c/span\x3e"),b.defaultSlotUnavailable=u);b.slotHtm=k?u:"";g&&(r[a.index]=E);b.showSlot=k;E++});S[p]=!0;w&&(r=
{});return r}function L(a,d,b,e,p){var c=l.textSwatchMap[b];!a||!c&&!p||e&&!l.isSideSheetOpen||(l.slotManager.resetMinSlotHeight(b),a=d.toggleSwatch.getSlotNodes(e),da(a,b,e),l.slotManager.updateSlotHeight(b,e))}function da(a,d,b){l.slotManager.resetSlotHeight(d,b);c.each(a,function(a,b){c.each(a,function(a){l.slotManager.setState(a,d,b)})})}function Z(a,d){d&&!l.isSideSheetOpen||L(!0,l.rows[a],a,d)}var l=this,F=G;this.isWindowResizedAfterSideSheetOpen=!1;this.data=h;this.noOfLoadingIndicator=1;this.dimList=
h.reorderedDimensionListKeys||[];this.dimensionsMap=[];this.logger=q;this.inlineTwisterData=h?h.inlineTwisterData||{}:{};this.swatches={};this.sideSheet=new z;var J={},O=this.inlineTwisterData&&this.inlineTwisterData.stringTranslationMap?this.inlineTwisterData.stringTranslationMap:{},U='\x3cspan class\x3d"a-size-small default-slot-unavailable"\x3e'+(O.defaultSlotUnavailableString||"")+"\x3c/span\x3e",W=h.imageHashMap||{},X=h.desktopConfiguratorPopoverImageMap||{},N=h.dimensionPageLoadUrls||{},ca=
"pwASINs"in h&&h.pwASINs instanceof Array&&0<h.pwASINs.length?h.pwUnavailableMessage:"",P={},Q=!!h.isAssemblyVariationsEnabled;this.rows={};this.dimensionHandler=new A(l.inlineTwisterData);this.isSingletonMap={};this.indexTranslationMap={};this.textSwatchMap={};var K,ba=k.loggingConstants;this.initSelectionState={};b.setVisibleSlotConfig(this.inlineTwisterData&&this.inlineTwisterData.desktopConfiguratorSlotsInPopover?this.inlineTwisterData.desktopConfiguratorSlotsInPopover:[]);this.inlineVariationsSize=
{};this.dimIndexMap={};this.isSideSheetOpen=!1;this.showSlotMap={};var R=l.inlineTwisterData.dimsWithSwatchReorderingDisabled||[],V={},S={},aa=!1;(function(){var a=l.logger.createFunctionTimerInstance("desktopConfiguratorInitTime");a.start();E();a.stop()})();c.on("register-desktop-configurator-with-twisterCore",function(a,b){F=a;l.logger.registerTwisterCore(F);l.sideSheet.init(l.logger);a=p();var e=l.inlineTwisterData.slotsEnabledDimensions,u=l.inlineTwisterData.popoverSlotsEnabledDimensions,h={};
m.each(a,function(a,d){h[d.dimKey]=d});F.slotsDimSum.addDefaultQueryParameter("showFancyPrice",l.inlineTwisterData.showFancyPrice);F.slotsDimSum.addDefaultQueryParameter("twisterFlavor",k.DESKTOP_CONFIGURATOR_FLAVOR);l.slotManager=new t(F,g,l.logger,l.inlineTwisterData);l.dimensionHandler.init();var v=0;c.each(l.rows,function(a){function b(e){var u,h={},v;u=e.selected().selectionInfo();m.each(u,function(a,d){h[d.dimKey]=d});v=h[p].val;var f=l.swatches[p];f[v]=f[v]||{};f[g]=f[g]||{};f[g].selected=
!1;f[v].selected=!0;var k=d(p,g);g===v||x||a.setThumbnailImage(f[v].image);g=v;T(f,w,p,u,!1,!1,t,w);u=d(p,v);v={swatches:f};var C=c.filter(f,function(a){return a.isVisible});f.length===C.length&&(a.hideSideSheetLink(),l.inlineVariationsSize[p]=f.length);a.setExpanderHeaderAriaLabel(k,u);a.setState(v,{},K,u,!1);r.createTwisterUpdatePromises(w,q,e,F,p);L(w,a,p,G,!0)}if(!l.isSingletonMap[a.dimKey]){a.postInitialize();var p=a.dimKey,g=h[p].val,x=H(p),f=l.dimList.length===u.length?u[v]:u[0],k=!Q&&(l.dimList.length===
e.length?e[v]:e[0]),t=!k,w=k||f,f={viewAttribution:"DetailPage",viewName:"DesktopConfiguratorRowView_"+p};c.on("update-desktop-configurator-view",function(a){b(a)});l.twister=F.registerActive(f,{updateView:function(e,u){var h={};"VARIATION_CHANGE"===e?c.delay(function(){b(u)}):"VARIATION_PEEK"===e&&(e=u.peek().selectionInfo(),m.each(e,function(a,d){h[d.dimKey]=d}),e=h[p].val,e=d(p,e),K===p&&a.title.setState(e),l.sideSheet.activeDimKey===p&&l.sideSheet.updateDimVal(e))}})}v++});c.trigger("desktop-configurator-twisterCore-initialized",
l);n.all(x()).then(function(){D()});b.then(function(){c.each(l.rows,function(a){a.activatePageRefresh()})})})}var m=c.$;f.prototype={updateView:function(h){c.trigger("update-desktop-configurator-view",h.tsm.currentState())}};return f});"use strict";y.when("A").register("desktop-configurator-constants",function(c){return{AJAX_CALL_TIMEOUT:2E4,DIMENSION_VALUE:"DimensionValue###",DISPLAY_VALUE:"DisplayValue###",SWATCH_DATA:"SwatchData###",DESKTOP_CONFIGURATOR_FLAVOR:"twisterPlusDesktopConfigurator",
MAX_DIMENSION_FLAVOUR_CAP:3,POPOVER_DELAY:500,MAX_INLINE_ROWS:7,SIDE_SHEET_ANIMATION_SPEED:300,SIDE_SHEET_PADDING:32,TEXT_SWATCH_MARGIN_RIGHT:6,CONFIGURED_SLOTS:["price","ms3","twisterPrimeWardrobe","twisterAvailability","deliveryPromise"],DP_STATE_VIEW_SUBTYPE:"DETAILPAGE_STATE_VIEW_METADATA",CHAR_UNDERSCORE:"_",CHAR_ASTERISK:"*",DEFAULT_SCROLLER_WIDTH:20,BORDER_WIDTH:2,TEXT_ALIGNMENT_LIMIT:400,DEFAULT_TEXT_SWATCH_SPACING:16,DEFAULT_IMAGE_SWATCH_SPACING:8,REDUCED_IMAGE_SWATCH_SPACING:4,viewEvents:{MOUSE_ENTER:"mouseenter",
MOUSE_LEAVE:"mouseleave",CLICK:"click"},sideSheetSelectors:{EXPANDER_CONTENT_PREFIX:"#inline-twister-expander-content-",SEC_VIEW_DIMENSION_VALUE_LIST:" #tp-inline-twister-dim-values-container",DIMENSION_VALUES_LIST:" .dimension-values-list",DIMENSION_VALUES_LIST_ODD_CHILD:" .dimension-values-list \x3e :nth-child(odd)",DIMENSION_VALUES_LIST_EVEN_CHILD:" .dimension-values-list \x3e :nth-child(even)",LIST_ITEM_CIRCULAR_IMAGE:".dimension-value-list-item-circular-image",CIRCULAR_IMAGE_SWATCH_BUTTON:".circle-image-swatch-button",
LIST_ITEM_SQUARE_IMAGE:".dimension-value-list-item-square-image",SQUARE_IMAGE_SWATCH_BUTTON:".image-swatch-button",TEXT_LIST_ITEM:".swatch-list-item-text",TEXT_SWATCH_BUTTON:".text-swatch-button",TEXT_SWATCH_BUTTON_WITH_SLOTS:".text-swatch-button-with-slots",IMAGE_SELECTOR:".swatch-image",SEC_VIEW_TOGGLE_BUTTON_PREFIX:"sec_",DELAY:200},widgetSelectors:{EXPANDER_CONTENT_PREFIX:"#inline-twister-expander-content-",EXPANDER_HEADER_PREFIX:"#inline-twister-expander-header-",DIMENSION_EXPANDER_ICON_PREFIX:"#dimension-expander-icon-",
DIMENSION_EXPANDER_ICON_WRAPPER:".dimension-expander-icon-wrapper",EXPANDED_DIMENSION_TEXT_PREFIX:"#inline-twister-expanded-dimension-text-",COLLAPSED_DIMENSION_TEXT_PREFIX:"#inline-twister-collapsed-dimension-text-",AUTO_NOTIFICATION_EXPANDED:"#inline-twister-auto-notification-expanded",AUTO_NOTIFICATION_COLLAPSED:"#inline-twister-auto-notification-collapsed",IMAGE_THUMBNAIL:".dimension-collapsed-image-thumbnail",SWATCH_NODE_SELECTOR:".inline-twister-swatch",SLOT_NODE_SELECTOR:".dimension-slot-info",
TOGGLE_BUTTON_SELECTOR:".a-button-toggle",IMAGE_SELECTOR:".swatch-image",DIMENSION_VALUES_LIST:".dimension-values-list"},classes:{A_COLOR_ATTAINABLE:"a-color-attainable",AOK_HIDDEN:"aok-hidden",DIMENSION_EXPANDER_CONTENT_EXPAND:"dimension-expander-content-expand",ROTATE:"rotate",A_BUTTON_UNAVAILABLE:"a-button-unavailable",A_BUTTON_SELECTED:"a-button-selected",A_BUTTON_FOCUS:"a-button-focus",ROW_IDENTIFIER_PREFIX:"desktop-configurator-dim-row-"},cssConstants:{BG_COLOR:"background-color",GREEN_BG_COLOR:"#D9EED9",
WHITE_BG_COLOR:"white"},loggingConstants:{ATTRIBUTION:"TwisterPlusDesktopConfigurator",ERROR:"ERROR"}}});"use strict";y.when("A").register("desktop-configurator-logger",function(c){function k(){if(!(this instanceof k))return new k;f||(f=this);return f}function n(c){if("undefined"!==typeof B.csa){var f=B.csa("Events",{producerId:"dp-rpcx"}),k=m.count(c)||0;f("log",{schemaId:"dpRpcx.CSALoggingSchema.5",eventName:c,valueToLog:k},{ent:"all"})}}var r=c.$,f,m=B.ue;k.prototype={registerTwisterCore:function(c){this.twisterCore=
c},logCSMDataOnLanding:function(){var c=0,f=0,k=0,g=this.twisterCore.util,q=g.tvm.dimensionInfo,A=this.twisterCore.state().length,z=Object.keys(g.tvm.dimCombinations).length;r.each(q,function(b,a){b=a.dimKey;g.isRequiredDim(b)&&k++;g.isSingletonDim(b)?f++:c++});m&&m.count&&(m.count("dpMobileTwisterDropdownPresent",c),n("dpMobileTwisterDropdownPresent"),m.count("dpMbileTwisterSingletonDim",f),n("dpMbileTwisterSingletonDim"),m.count("dpMobileTwisterRequiredDim",k),n("dpMobileTwisterRequiredDim"),m.count("dpMobileTwisterDimSize",
A),n("dpMobileTwisterDimSize"),m.count("dpMobileTwisterFamilySize",z),n("dpMobileTwisterFamilySize"),m.count("twisterPlus.inlineTwisterGV",1),n("twisterPlus.inlineTwisterGV"))},logCSMTagsOnLanding:function(h){function f(a,b,e){var u=[];if(b===e)u.push(""),a=a[b],c.$.isArray(a)?c.each(a,function(a,d){u.push(a)}):u.push(a);else{var h=Math.floor((b+e)/2);b=f.call(this,a,b,h);var g=f.call(this,a,h+1,e);c.each(b,function(a,d){c.each(g,function(d,b){u.push(""===a?d:""===d?a:a+":"+d)})})}return u}function k(a){a&&
m.push(a)}var g=this,m=[],n=!0,r=!0,b=[0,3,8,25,50,100,1E3,5E3],a=Object.keys(this.twisterCore.util.tvm.dimCombinations).length,e,u;h.dimensionList&&(e="variation_dimension:"+h.dimensionList.length,c.each(h.dimensionList,function(a,b){g.addCSMTag(a)}));for(var v=1;v<b.length;v++)if(a<=b[v]){u="family_size_bucket:"+b[v-1]+"-"+b[v];break}else v===b.length-1&&(u="family_size_bucket:gt"+b[v]);h.dimensionInfo&&c.each(h.dimensionInfo,function(a,b){a.isSingleton||(n=!1)});b=n?"SingletonFamily":"DesktopConfigurator";
h.initDimCombination&&c.each(h.initDimCombination,function(a,b){-1===a.val&&(r=!1)});k(e);k(u);k(b);r&&k("defaultSelection");h=f.call(this,m,0,m.length-1);(function(a){var b=this;c.each(a,function(a,d){a&&b.addCSMTag(a)})}).call(this,h)},createFunctionTimerInstance:function(c){var f=this;return{eventType:c,start:function(){this.startTime=Date.now()},stop:function(){this.startTime&&f.logCounter(this.eventType,Date.now()-this.startTime)}}},addCSMTag:function(c){B.ue&&B.ue.tag&&B.ue.tag(c)},logCounter:function(c,
f){m&&m.count&&(f===G?m.count(c,(m.count(c)||0)+1):m.count(c,f),n(c))},logBottomSheetPageUpdate:function(c){this.logCounter("twisterPlus.inlineTwisterPageUpdate")},logSelectedSwatchClick:function(){this.logCounter("twisterPlus.inlineTwister.selectedSwatchClick")},logDimensionValueClick:function(){this.logCounter("dpmobiletwisterclickOndimval")},logSecViewTotalCount:function(c){this.logCounter("twisterPlus.inlineTwister.secondaryViewCount."+c)},logSecViewGV:function(c){this.logCounter("twisterPlus.inlineTwister.secondaryViewGV."+
c)},logSecViewClosed:function(c){this.logCounter("twisterPlus.inlineTwister.secondaryViewClosed."+c)},logDimensionCollapsed:function(c){this.logCounter("twisterPlus.inlineTwister.dimCollapse."+c)},logDimensionExpanded:function(c){this.logCounter("twisterPlus.inlineTwister.dimExpand."+c)},logSecViewSwatchClick:function(){this.logCounter("twisterPlus.inlineTwister.secViewSwatchClick")},logDimExpansionAfterAutoUpdate:function(){this.logCounter("twisterPlus.inlineTwister.dimExpansionAfterAutoUpdate")},
logDimValueClickAfterAutoUpdate:function(){this.logCounter("twisterPlus.inlineTwister.dimValueClickAfterAutoUpdate")},logAvailabilitySlotRender:function(){this.logCounter("twisterPlus.inlineTwister.availabilitySlotRender")},logPPUSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.ppuSlotRender")},logPrimeSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.primeSlotRender")},logPriceSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.priceSlotRender")},logDeliverySlotRender:function(){this.logCounter("twisterPlus.inlineTwister.deliverySlotRender")},
logReviewsSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.reviewsSlotRender")},logSeeAllLinkClick:function(c){this.logCounter("twisterPlus.inlineTwister.seeAllLinkClick."+c)}};return k});"use strict";y.when("A").register("twister-dynamic-style",function(c){function k(c,k){this.name=c;this.styleNode;this.rules=k||[];this.pendingRefresh}var n=c.$,r={};k.prototype={refresh:function(){var c=n("\x3cdiv /\x3e",{html:"\x26shy;\x3cstyle\x3e"+this.rules.join(" ")+"\x3c/style\x3e"});this.styleNode?
(this.styleNode.replaceWith(c),delete this.styleNode,this.styleNode=c):(this.styleNode=c,this.styleNode.appendTo("body"))}};return{addCSSRules:function(c,m){r[c]?r[c].rules=m||[]:r[c]=new k(c,m);r[c].refresh()}}});"use strict";y.when("A","desktop-configurator-constants","desktop-configurator-twister-register","desktop-configurator-price-mismatch-utils").register("desktop-configurator-slot-manager",function(c,k,n,r){function f(b,a,e,c){this.twisterCore=b;this.batch={};this.currentBatch;this.maxSlotHeight=
{};this.minSlotHeight={};this.dynamicStyle=a;this.slotIdentifierMap={};this.logger=e;this.auiPriceSize=c&&c.auiPriceSize?c.auiPriceSize:"m";this.currentlyUnavailableMessage=c&&c.stringTranslationMap?c.stringTranslationMap.currentlyUnavailableMessage:"";this.desktopConfiguratorSlotsInMainView=c&&c.desktopConfiguratorSlotsInMainView?c.desktopConfiguratorSlotsInMainView:[]}function m(b,a,e,u,g){var d=this.batch,p=this;d[b]=d[b]||[];d[b].push(e);clearTimeout(this.currentBatch);this.currentBatch=setTimeout(function(){var d=
c.map(p.batch,function(a,d){return d});p.twisterCore.slotsDimSum.get(d,function(d){var b=p.batch[d.ASIN];b&&(A.each(b,function(a,b){b(d)}),delete p.batch[d.ASIN]);q(p.batch)&&(b=Object.keys(p.maxSlotHeight),c.each(b,function(d){u(d,g&&d===a)}))})},0)}function h(b,a,e,c){e[a]=e[a]||{};e[a].uniqueCount=e[a].uniqueCount||0;var g="inline-twister-dimsum-loading-"+a+"-"+e[a].uniqueCount;e[a].uniqueCount+=1;return{loadingHtm:'\x3cdiv class\x3d"'+g+(b?" loading-indicator-1":"")+(c?" aok-hidden":"")+'"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e',
promise:function(a,b){var e=A("."+g+":not(.loading-indicator-in-popover)").parent();e.length&&(e.html(a),b(e))}}}function w(b){return b.replace(/\n/g,"").replace(/[\t ]+\</g,"\x3c").replace(/\>[\t ]+\</g,"\x3e\x3c").replace(/\>[\t ]+$/g,"\x3e")}function t(b,a,e,c){return w(z.default.call(this,b.content.twisterSlotDiv,a,e,c))}function g(b,a){if(!b||0===b.length)return a;if(0<b.find(".loading-indicator-1").length)return b[0].scrollHeight;if(0===b.find(".defaultSlotUnavailable").length)return a;b=b[0].scrollHeight;
a<b&&(a=b);return a}function q(b){for(var a in b)if(b.hasOwnProperty(a))return!1;return!0}var A=c.$,z={default:function(b,a,e,c){b=A("\x3cdiv\x3e"+b+"\x3c/div\x3e");var g=b.find(".price_slot_ppu"),d=b.find("#ms3slot"),p=b.find("#twisterAvailability"),h=b.find("#deliveryPromisePrefix"),f=b.find(".variationReviewsSection"),k=e?[]:this.desktopConfiguratorSlotsInMainView,m=b.find(".twister_swatch_price");p.length&&((m.length||e)&&-1===k.indexOf("twisterAvailability")&&p.parent().addClass("aok-hidden"),
p.parent().append("\x3cdiv class\x3d'js-dummy-twister-availability'\x3e\x3c/div\x3e"),p.parent().find(".a-size-medium").removeClass("a-size-medium").addClass("a-size-small"),p.parent().find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-small"),p.parent().find(".a-size-large").removeClass("a-size-large").addClass("a-size-small"),a&&this.logger.logAvailabilitySlotRender());0<m.length?(-1===k.indexOf("price")&&m.addClass("aok-hidden"),m.addClass("inline-twister-swatch-price"),e=b.find(".a-price"),
0<e.length?e[0].dataset&&(e[0].dataset.aSize=this.auiPriceSize):(m.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base").addClass("a-color-base"),m.find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-base").addClass("a-color-base"),m.find(".a-size-large").removeClass("a-size-large").addClass("a-size-base").addClass("a-color-base")),e="a-size-small",m.find(".olpWrapper").removeClass("a-size-mini a-size-micro a-size-medium a-size-large a-size-base a-color-base").addClass(e),
g.length&&(e="twister-plus-inline-twister-ppu a-size-micro",g.removeClass("a-size-mini a-size-small a-size-medium a-size-large a-size-base a-color-base").addClass(e),a&&this.logger.logPPUSlotRender()),a&&this.logger.logPriceSlotRender()):(m=b.find("#sndbox-mobile-twister-price"),0<m.length&&a&&this.logger.logPriceSlotRender());d.length&&(d.find(".a-icon-mini").removeClass("a-icon-mini").addClass("a-icon-small"),-1===k.indexOf("ms3")&&d.addClass("aok-hidden"),a&&this.logger.logPrimeSlotRender());0<
h.length&&(h.removeClass("a-size-small a-color-secondary").addClass("a-color-base"),-1===k.indexOf("deliveryPromise")&&h.parent().addClass("aok-hidden"),h.find("br").remove(),g=h.find("b"),0===g.length&&(g=h.find("span")),g.length&&(d=" "+w(g.text()),g.addClass("aok-hidden"),h.append('\x3cspan style\x3d"font-weight: bold;"\x3e'+d+"\x3c/span\x3e")),a&&this.logger.logDeliverySlotRender());0<f.length&&(f.removeClass("a-spacing-micro a-spacing-top-micro").addClass("a-spacing-none a-spacing-top-none"),
-1===k.indexOf("variationReviews")&&f.addClass("aok-hidden"),a&&this.logger.logReviewsSlotRender());n.executeModifiers(b);return r.updateSlotHtm(b.html(),c)}};f.prototype={get:function(b,a,e,c,g,d,p){var f=this,k=this.twisterCore.slotsDimSum.get([b]);if(k[b])return t.call(f,k[b].Value,!1,p);var q=h(e,a,f.slotIdentifierMap,p);m.call(this,b,a,function(a){q.promise(t.call(f,a.Value,!0,p),d)},g,c);return q.loadingHtm},setState:function(b,a,e){r.handleDimensionSlotPromise(b);this.minSlotHeight[a]||(this.minSlotHeight[a]=
[]);this.maxSlotHeight[a]||(this.maxSlotHeight[a]=[]);this.minSlotHeight[a][e]=this.minSlotHeight[a][e]||0;this.minSlotHeight[a][e]=g(b,this.minSlotHeight[a][e]);this.maxSlotHeight[a][e]=this.maxSlotHeight[a][e]||0;var c=this.maxSlotHeight[a];var h=this.maxSlotHeight[a][e];!b||0===b.length||0<b.find(".loading-indicator-1").length||(b=b[0].scrollHeight,h<b&&(h=b));c[e]=h;this.maxSlotHeight[a][e]=this.maxSlotHeight[a][e]>this.minSlotHeight[a][e]?this.maxSlotHeight[a][e]:this.minSlotHeight[a][e]},updateSlotHeight:function(b,
a){var e=[],g;c.each(this.maxSlotHeight[b],function(c,d){a?(e.push("#desktop-configurator-side-sheet #"+b+"dim_list .desktop-configurator-dim-row-"+d+" .dimension-slot-info {height: "+c+"px;}"),g="twister-plus-desktop-configurator-side-sheet-slot-height-"):(e.push("#inline-twister-expander-content-"+b+" .desktop-configurator-dim-row-"+d+" .dimension-slot-info {height: "+c+"px;}"),g="twister-plus-desktop-configurator-slot-height-")});this.dynamicStyle.addCSSRules(g+b,e)},resetMinSlotHeight:function(b){this.minSlotHeight[b]||
(this.minSlotHeight[b]=[]);this.minSlotHeight[b]=c.map(this.minSlotHeight[b],function(){return 0})},resetSlotHeight:function(b,a){this.maxSlotHeight[b]||(this.maxSlotHeight[b]=[]);this.dynamicStyle.addCSSRules((a?"twister-plus-desktop-configurator-side-sheet-slot-height-":"twister-plus-desktop-configurator-slot-height-")+b,[]);this.maxSlotHeight[b]=c.map(this.maxSlotHeight[b],function(){return 0})}};return f});"use strict";y.when("A","desktop-configurator-constants","detail-page-side-sheet").register("desktop-configurator-side-sheet-view",
function(c,k,n){function r(){this.sideSheetData=this.activeDimKey=null;this.swatchList=[];this.mainViewDimContainer=this.keyDownEventHandler=this.dimValContainer=null;this.updateSideSheetStatus={}}function f(){this.sideSheetData=this.activeDimKey=null;this.swatchList=[];this.mainViewDimContainer=this.keyDownEventHandler=this.dimValContainer=null}function m(b,a){c.each(b,function(b){var g="desktop-configurator-swatch-hover:"+a+"_sec";try{c.declarative.remove(b,g),c.declarative.create(b,g,{})}catch(h){y.log("Hover event subscribe failed with error: "+
this.name,z.ERROR,z.ATTRIBUTION)}})}function h(b){b=Array.prototype.slice.call(b);var a=q(b[0]).find("input");b=q(b[b.length-1]).find("input");this.keyDownEventHandler=t.bind(this,a,b);document&&document.addEventListener("keydown",this.keyDownEventHandler);c.delay(function(){a&&a.focus()})}function w(){if(this.mainViewDimContainer){var b=this.mainViewDimContainer.parent().find(".tp-side-sheet-link-container a")[0];document&&document.removeEventListener("keydown",this.keyDownEventHandler);b&&b.focus()}}
function t(b,a,e){e.code&&"tab"===e.code.toLowerCase()&&(e.shiftKey?document&&document.activeElement===b[0]&&(e.preventDefault(),a.focus()):document&&document.activeElement===a[0]&&(e.preventDefault(),b.focus()))}function g(b){var a=q("#desktop-configurator-side-sheet-content-header").clone();a.removeClass("aok-hidden");a.find(".dim-name").text(b.dimensionDisplayText+":");a.find(".dim-value").text(b.displayValueText);var e=b.optionsText;e&&a.find(".dim-options").text(e.replace("###options",b.totalValueCount));
return a}var q=c.$,A=k.sideSheetSelectors,z=k.loggingConstants;r.prototype={init:function(b){var a=this,e=q("#twister-plus-inline-twister-container");0!==e.length&&(e=e[0].getBoundingClientRect().width,this.scrollbarWidth=this.getScrollbarWidth(),this.sideSheet=new n({id:"desktop-configurator-side-sheet",shouldRenderHTMLString:!0,animationDuration:k.SIDE_SHEET_ANIMATION_SPEED,width:e+k.SIDE_SHEET_PADDING+a.scrollbarWidth,onAfterHide:function(){b.logSecViewClosed(a.activeDimKey);c.each(a.swatchList,
function(b){var e=parseInt(b.getAttribute("data-idxInToggleSwatchList"),10),e=a.sideSheetData.getSwatchInfo(e);c.declarative.remove(b,"desktop-configurator-swatch-hover:"+a.activeDimKey+"_sec");a.sideSheetData.destroyPopover(e.id+"_sec")});w.call(a);a.updateSideSheetStatus[a.activeDimKey]&&a.updateSideSheetStatus[a.activeDimKey](a.activeDimKey,!1);f.call(a)}}))},open:function(b){this.activeDimKey=b.dimKey;this.sideSheetData=b;var a=q("#inline-twister-row-"+b.dimKey+" #tp-inline-twister-dim-values-container").find(".desktop-configurator-dim-row-0"),
e=q("#side-sheet-loader-container").clone().removeClass("aok-hidden"),u=e.find(".loader-container"),h=e.find("#side-sheet-loader").clone().removeClass("aok-hidden"),d,p,f=k.DEFAULT_TEXT_SWATCH_SPACING;b.isTextSwatch?(d=a.width()-k.BORDER_WIDTH,p=a.height()-k.BORDER_WIDTH):(p=a.find(".swatch-image-container"),f=0<p.closest(".reduced-image-swatch-margin").length,d=p.outerWidth(),p=p.outerHeight(),f=f?k.REDUCED_IMAGE_SWATCH_SPACING:k.DEFAULT_IMAGE_SWATCH_SPACING,h.css({marginLeft:f/2+"px",marginRight:f/
2+"px"}));h.width(d);h.height(p);c.each(a,function(){u.append(h.clone().addClass("side-sheet-loader-1"))});d=u.clone();d.find(".side-sheet-loader-1").removeClass("side-sheet-loader-1").addClass("side-sheet-loader-2");e.append(d);b=g(b);e.prepend(b);e=e[0].outerHTML;this.sideSheet.updateWidth(this.getWidth(a,f));this.sideSheet.open(e)},update:function(b){this.mainViewDimContainer=q("#inline-twister-row-"+b.dimKey+" #tp-inline-twister-dim-values-container");var a=this.mainViewDimContainer.clone(),e=
a.find(A.DIMENSION_VALUES_LIST);e.attr("id",b.dimKey+"dim_list");var c=g(b);a.prepend(c);e.children().slice(1).removeClass("aok-hidden");e.attr("data-a-button-group",'{"name":"sec_'+b.dimKey+'"}');this.sideSheet.updateContent(a[0].outerHTML);b=this.sideSheet.container;this.swatchList=b.find(A.DIMENSION_VALUES_LIST).children().slice(1);m(this.swatchList,this.activeDimKey);this.dimValContainer=b.find(".desktop-configurator-side-sheet-content-header .dim-value");h.call(this,this.swatchList)},close:function(){this.sideSheet.close()},
registerToggleButtonGroup:function(b,a,e){var g=A.SEC_VIEW_TOGGLE_BUTTON_PREFIX+b,h=this;this.updateSideSheetStatus[b]=e;c.on("a:button-group:"+g+":toggle",function(d){h.sideSheet.close();d.selectedButton.buttonGroupName=b;a(d.selectedButton,b)})},updateDimVal:function(b){this.dimValContainer&&this.dimValContainer.length&&this.dimValContainer.text(b.subText)},getScrollbarWidth:function(){if(this.scrollbarWidth)return this.scrollbarWidth;var b=document.body?B.innerWidth-document.body.clientWidth:-1;
0>b&&(b=k.DEFAULT_SCROLLER_WIDTH);return b},getWidth:function(b,a){var e=0;c.each(b,function(b){e+=b.getBoundingClientRect().width+a});return e+k.SIDE_SHEET_PADDING+this.scrollbarWidth}};return r});"use strict";y.when("A","a-popover","desktop-configurator-constants").register("desktop-configurator-popover-factory",function(c,k,n){function r(a){var b=t("\x3cdiv /\x3e"),e=t("\x3cspan /\x3e"),c=a.title,g=a.showImageInPopOver,h=!a.hideSlots;b.addClass("desktop-configurator-popover-content");e.addClass("desktop-configurator-title-block a-size-base a-color-base a-text-bold");
e.text(c);b.append(e);g&&(e=t("\x3cdiv /\x3e"),g=t("\x3cimg /\x3e"),g.attr("src",a.image),g.attr("data-a-image-source",a.image),g.attr("alt",c),e.append(g),b.addClass("visual-dimension"),e.addClass("desktop-configurator-image-block"),b.prepend(e));h&&f(b,a.slotNode);return b}function f(a,b){b="string"===typeof b?b:b.clone();var e=t("\x3cdiv /\x3e");a.find(".desktop-configurator-slot-block").remove();e.addClass("desktop-configurator-slot-block");e.html(b);m(e);a.append(e)}function m(a){var b=a.find(".price_slot_ppu"),
g=a.find("#ms3slot"),h=a.find(".twister_swatch_price"),f=a.find("#twisterAvailability"),k=a.find("#deliveryPromisePrefix"),m=a.find(".variationReviewsSection"),q=a.find(".default-slot-unavailable"),t=a.find(".loading-indicator-1");a=a.find(".twisterPrimeWardrobe");var w={variationReviews:m,price:h,ms3:g,twisterAvailability:f.parent(),deliveryPromise:k.parent(),ppu:b,twisterPrimeWardrobe:a};t.length&&(t.addClass("loading-indicator-in-popover"),0===e.length?t.addClass("aok-hidden"):t.removeClass("aok-hidden"));
c.each(u,function(a){w[a]&&(-1===e.indexOf(a)?w[a].addClass("aok-hidden"):(w[a].removeClass("aok-hidden"),a=v[a+"_styleSlot"],"function"===typeof a&&a.call(this,w)))});q.length&&q.removeClass("a-size-small").addClass("a-size-base")}function h(a,b,e,h){e=r({slotNode:e.slotNode,title:e.title,showImageInPopOver:e.showImageInPopOver,image:e.image,hideSlots:h});b=k.create(b,{name:a,inlineContent:e,closeButton:!1,padding:"none",activate:"none",restoreFocusOnHide:!1});g[a]=b;q[a]||(c.on("a:popover:afterShow:"+
a,function(a){c.delay(function(){t(z.DIMENSION_VALUES_LIST).removeClass("stop-scrolling-dc")})}),q[a]=!0);return b}function w(a,b,e){if(a=g[a])b=r({slotNode:b.slotNode,title:b.title,showImageInPopOver:b.showImageInPopOver,image:b.image,hideSlots:e}),a.update({content:b});return a}var t=c.$,g={},q={},A=n.POPOVER_DELAY,z=n.sideSheetSelectors,b=null,a=null,e=[],u=n.CONFIGURED_SLOTS,v={price_styleSlot:function(a){var b=a.ppu;a=a.price;a.length&&(a.find(".a-size-base").removeClass("a-size-base").addClass("a-size-large"),
b.length&&b.removeClass("a-size-micro").addClass("a-size-small"))},ms3_styleSlot:function(a){a=a.ms3;a.length&&a.find(".a-icon-mini").removeClass("a-icon-mini").addClass("a-icon-small")},twisterAvailability_styleSlot:function(a){var b=a.twisterAvailability;b.length&&(a=a.ms3,b.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base"),a.length&&a.after(b))},deliveryPromise_styleSlot:function(a){a=a.deliveryPromise;a.length&&a.addClass("a-size-base")}};return{show:function(e,g,f,u){b=
this.exists(e)?w.call(this,e,f,u):h.call(this,e,g,f,u);clearTimeout(a);var k=this;a=c.delay(function(){t(z.DIMENSION_VALUES_LIST).addClass("stop-scrolling-dc");b&&b.show();k.updateIfCurrentlyActive(e,f.slotNode)},A)},exists:function(a){return!!g[a]},hide:function(e){(e=g[e])&&e.hide();b=null;clearTimeout(a)},updateIfCurrentlyActive:function(a,e){b&&b.$container&&b.attributes.name===a&&(a=b.$container.find(".desktop-configurator-popover-content"),f(a,e))},destroy:function(b){g[b]&&k.remove(b);delete g[b];
clearTimeout(a)},setVisibleSlotConfig:function(a){e=a}}});"use strict";y.when("A").register("desktop-configurator-twister-register",function(){var c=[];return{registerModifier:function(k){c.push(k)},executeModifiers:function(k){c.forEach(function(c){c.modify&&"function"===typeof c.modify&&c.modify(k)})}}});y.when("3p-promise").register("desktop-configurator-price-mismatch-promise-handler",function(c){function k(h){f.hasOwnProperty(h)&&(f[h].reject(),delete f[h]);f[h]={};return new c(function(c,k){f[h].resolve=
c;f[h].reject=k})}function n(c){for(var k=Object.keys(f).filter(function(g){return g.startsWith(c)}),m=0;m<k.length;m++){var g=k[m];f.hasOwnProperty(g)&&(f[g].resolve(),delete f[g])}}function r(c){for(var k=Object.keys(f).filter(function(g){return g.startsWith(c)}),m=0;m<k.length;m++){var g=k[m];f.hasOwnProperty(g)&&(f[g].reject(),delete f[g])}}var f={},m;return{getPromises:function(c,f){var t=[];t.push(k("TwisterUpdate_"+f));t.push(k("DimensionSlots_"+f));m=c;return t},resolveDimensionSlotPromise:function(){n("DimensionSlots")},
resolveTwisterUpdatePromise:function(c){m===c?n("TwisterUpdate"):r("TwisterUpdate")},getLandingPromise:function(c){var f=[];f.push(k("DimensionSlots_"+c));return f},rejectDimensionSlotPromise:function(){r("DimensionSlots")}}});y.when("A","desktop-configurator-price-mismatch-promise-handler","3p-promise").register("desktop-configurator-price-mismatch-utils",function(c,k,n){function r(c){return c.replace(/\n/g,"").replace(/[\t ]+\</g,"\x3c").replace(/\>[\t ]+\</g,"\x3e\x3c").replace(/\>[\t ]+$/g,"\x3e")}
function f(f,k){var g=m("#desktop_configurator_price_mismatch_div .twister_swatch_price.unified-price");g.addClass("inline-twister-swatch-price");var q=g.find(".price_slot_ppu"),n=g.find(".a-price"),z=k.find(".a-price");0<n.length&&0<z.length?z[0].dataset&&(n[0].dataset.aSize=z[0].dataset.aSize):(g.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base").addClass("a-color-base"),g.find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-base").addClass("a-color-base"),g.find(".a-size-large").removeClass("a-size-large").addClass("a-size-base").addClass("a-color-base"));
n="a-size-small";g.find(".olpWrapper").removeClass("a-size-mini a-size-micro a-size-medium a-size-large a-size-base a-color-base").addClass(n);q.length&&(n="twister-plus-inline-twister-ppu a-size-micro",q.removeClass("a-size-mini a-size-small a-size-medium a-size-large a-size-base a-color-base").addClass(n));k=k.find(".twister_swatch_price.unified-price");if(k.length&&g.length){var q=k.clone(),n=g.clone(),z=q.find(".price_slot_ppu"),b=n.find(".price_slot_ppu");z.length&&z.html(c.trim(z.html()));b.length&&
b.html(c.trim(b.html()));c.trim(r(q.html()))!==c.trim(r(n.html()))&&(f.logCounter("desktopConfiguratorPriceMismatchCounter"),k.html(g.html()),(f=m("#desktop_configurator_price_mismatch_div #asinInfo").attr("data-asin"))&&(h[f]=g.html()))}}var m=c.$,h={};c.on("DesktopConfiguratorPriceMismatchDataUpdated",k.resolveTwisterUpdatePromise);return{createLandingPromises:function(c,h){var g=m("#inline-twister-row-"+h+" .a-button-selected");g&&(h=k.getLandingPromise(h),n.all(h).then(function(){f(c,g)},function(){}))},
createTwisterUpdatePromises:function(c,h,g,q,r){if(c){var z=m("#inline-twister-row-"+r+" .a-button-selected");c=g.selected().selectionInfo();g=q.util.isFullySelected(c);q=q.util.getAsinFromSelectionInfo(c,g);r=k.getPromises(q,r);n.all(r).then(function(){f(h,z)},function(){})}},handleDimensionSlotPromise:function(c){var f=m(c).closest(".a-button-selected");c=0<m(c).find(".loading-indicator-1").length;f.length&&!c&&f.closest(".inline-twister-row").length&&(m(".inline-twister-row .a-button-selected .twister_swatch_price.unified-price").length?
k.resolveDimensionSlotPromise():k.rejectDimensionSlotPromise())},updateSlotHtm:function(c,f){var g;f&&h[f]&&(g=h[f]);if(f=g)c=m("\x3cdiv\x3e"+c+"\x3c/div\x3e"),c.find(".twister_swatch_price.unified-price").html(f),c=c.html();return c}}});"use strict";y.when("A","desktop-configurator-constants").register("desktop-configurator-widgets-factory",function(c,k){var n=c.$,r=k.widgetSelectors,f=k.classes,m=k.cssConstants,h=k.loggingConstants;k=function(){function g(){var b=n(r.IMAGE_THUMBNAIL).attr("src");
return b&&b.length&&(b=b.split("."),2<b.length)?b[b.length-2]:!1}function f(b,a,e,c){c=c&&0<c.length?c:b.find(".a-button");a&&!e?(c.addClass("text-swatch-button-with-slots").removeClass("text-swatch-button"),b.find("hr").show(),b.find("hr").removeClass("aok-hidden")):(c.removeClass("text-swatch-button-with-slots").addClass("text-swatch-button"),b.find("hr").hide(),b.find("hr").addClass("aok-hidden"))}return{alignTextSwatches:function(b,a,e){var g=0,f,d;c.each(b,function(b){b.domNode&&(b.isVisible||
a||e)&&(f=b.domNode.attr("data-idxInToggleSwatchList"),d=e?n("#desktop-configurator-side-sheet").find("[data-idxInToggleSwatchList\x3d"+f+"]"):b.domNode,b=d.find(".swatch-title-text-display"),b.length&&b[0].style.removeProperty("height"),b=b?b.height():0,g<b&&(g=b))});c.each(b,function(b){b.domNode&&(b.isVisible||a||e)&&(f=b.domNode.attr("data-idxInToggleSwatchList"),d=e?n("#desktop-configurator-side-sheet").find("[data-idxInToggleSwatchList\x3d"+f+"]"):b.domNode,d.find(".swatch-title-text-display").height(g))})},
createSwatch:function(b,a,e,c,g,d,h){var k=!a.unavailable,m=a.isVisible,q=a.selected,n=a.showSlot,r=a.slotHtm;e="#"+e;if(d.length)return d=d.clone(),d.removeClass("swatch-prototype"),g&&d.addClass("slots-hidden"),d.attr("data-idxInToggleSwatchList",c),c=d.find(e).attr("id",a.id),d.find(e+"-announce").attr("id",a.id+"-announce"),d.find("input").attr({name:a.name,"aria-labelledby":a.id+"-announce"}),d.find("text"===b?".swatch-title-text-display":"square_image"===b?".swatch-title-text":".swatch-text").text(a.text),
k||c.addClass("a-button-unavailable"),q&&c.addClass("a-button-selected"),"text"!==b&&(q=d.find(".swatch-image"),q.addClass("inline-twister-manual-load"),q.attr({"data-a-image-source":a.image||"",id:"inline-twister-image-"+a.name,alt:a.text})),q=d.find(".dimension-slot-info"),q.length&&(q.attr("id","dimension-slot-info-"+a.name),n?k?0<r.length&&q.html(r):q.html(a.defaultSlotUnavailable):d.find("text"===b?".slots-padding":".dimension-slot-info").addClass("aok-hidden"),"text"===b&&f(d,n,g,c)),h.append(d),
m||d.addClass("aok-hidden"),d},getThumbnailImageUrlForPhysicalId:function(b){return b&&b.length&&(b=b.split("."),2<b.length)?(b.splice(-2,1,g()),b.join(".")):!1},updateSlotSectionInTextSwatch:f}}();var w=function(g){function k(b,a,e,c,f,d,h,m){this.id=b.id;this.unavailable=!!b.unavailable;this.selected=!!b.selected;this.showSlot=b.showSlot;this.slotHtm=b.slotHtm;this.isImageSwatch=!a;this.asin=b.asin;this.pageUrl=b.pageUrl;this.hideSlotsFromMainView=f;var q=a?"text":b.isCirclularImageSwatch?"circular_image":
"square_image";this.domNode=m?n(m):g.createSwatch(q,b,e,c,f,d,h);this.isVisible=b.isVisible;this.imageUrl=b.image;this.popoverImage=b.popoverImage;this.isSlotVisible=!0;this.slotNodeIdentifier=a?".slots-padding":".dimension-slot-info";this.title=b.text;this.name=b.name;this.subscribeToHoverEvent(e)}k.prototype={setState:function(b,a,e,c){this.selected=!!b.selected;this.updateAvailablity(b);this.updateSlotNode(b,a,e);this.updateVisibility(b);this.updateSwatchIndexInDomNode(c);return this},getSlotNode:function(b){this.slotNode||
(this.slotNode=this.domNode.find(r.SLOT_NODE_SELECTOR));if(!b)return this.slotNode;b=this.slotNode?this.slotNode.attr("id"):"";return n("#desktop-configurator-side-sheet").find("#"+b)},updateSlotNode:function(b,a,e){this.slotNode||(this.slotNode=this.domNode.find(r.SLOT_NODE_SELECTOR));this.showSlot!==b.showSlot&&((this.showSlot=b.showSlot)?this.domNode.find(this.slotNodeIdentifier).removeClass("aok-hidden"):this.domNode.find(this.slotNodeIdentifier).addClass("aok-hidden"),this.isImageSwatch||g.updateSlotSectionInTextSwatch(this.domNode,
this.showSlot,this.hideSlotsFromMainView));this.slotHtm!==b.slotHtm&&(a&&n("#tp-inline-twister-sec-view-"+e+" #"+this.slotNode.attr("id")).html(b.slotHtm),this.slotNode.html(b.slotHtm),this.slotHtm=b.slotHtm)},updateAvailablity:function(b){this.toggleButton||(this.toggleButton=this.domNode.find(r.TOGGLE_BUTTON_SELECTOR));(this.unavailable=b.unavailable)?this.toggleButton.addClass(f.A_BUTTON_UNAVAILABLE):this.toggleButton.removeClass(f.A_BUTTON_UNAVAILABLE)},updateSelection:function(){this.toggleButton||
(this.toggleButton=this.domNode.find(r.TOGGLE_BUTTON_SELECTOR));this.selected?(this.toggleButton.addClass(f.A_BUTTON_SELECTED),this.toggleButton.removeClass(f.A_BUTTON_UNAVAILABLE)):(this.toggleButton.removeClass(f.A_BUTTON_SELECTED),this.toggleButton.removeClass(f.A_BUTTON_FOCUS))},updateVisibility:function(b){b.isVisible?this.domNode.removeClass(f.AOK_HIDDEN):this.domNode.addClass(f.AOK_HIDDEN);this.isVisible=b.isVisible},subscribeToHoverEvent:function(b){b="desktop-configurator-swatch-hover:"+
b;try{c.declarative.remove(this.domNode,b),c.declarative.create(this.domNode,b,{})}catch(a){y.log("Hover event subscribe failed with error: "+this.name,h.ERROR,h.ATTRIBUTION)}},updateSwatchIndexInDomNode:function(b){this.domNode&&this.domNode.attr("data-idxInToggleSwatchList",b)},getTopPosition:function(){var b=this.domNode.position();return this.topPosition=b?b.top:0}};return k}(k),t=function(g,k){function b(a,b,g,f){var d=this;this.isTextSwatch=a.isTextSwatch;this.name=a.name;this.domNode=n(r.EXPANDER_CONTENT_PREFIX+
a.name);this.title=f;this.selectedSwatch=null;this.swatches={};this.orderedSwatchList=[];this.initialVisibleSwatchList={};this.swatchIdxOrder=[];this.isPageRefreshActive=!1;this.totalSwatchCount=a.totalSwatchCount||0;this.onChange=a.onChange;this.hoverHandler=a.onHover;this.isUserInteracting=!1;this.autoNotificationCallback=b.autoNotificationCallback;this.rowContainer=g;this.swatchListContainer=this.domNode.find(r.DIMENSION_VALUES_LIST);this.markAutoUpdated=!1;this.hideSlotsFromMainView=a.hideSlotsFromMainView;
this.windowResizeCallback=b.windowResizeCallback;this.preserveNaturalSwatchOrder=a.preserveNaturalSwatchOrder;this.displaySwatches=[];this.numberOfSwatchesPerRow=0;this.swatchPrototypeNode=n("#"+a.name).closest(r.SWATCH_NODE_SELECTOR);this.swatchPrototypeNodeParent=this.swatchPrototypeNode.parent();c.on("a:button-group:"+this.name+":toggle",function(a){var b=parseInt(a.selectedButton.buttonName,10),e=d.swatches[b];e?d.isPageRefreshActive?(d.isUserInteracting=!0,b=e.unavailable,e.updateSelection(),
d.autoNotificationCallback&&d.autoNotificationCallback(b,!0),d.onChange&&d.onChange(d.swatches,a.selectedButton,d.markAutoUpdated),d.setAutoUpdated(!1)):e.pageUrl&&(B.location.href=e.pageUrl):(a="Selected swatch not found on toggle button click. Value clicked: "+b+" ; Swatch length: "+Object.keys(d.swatches).length,y.log(a,h.ERROR,h.ATTRIBUTION))});this.registerHoverDeclarative("desktop-configurator-swatch-hover:"+a.name);this.registerHoverDeclarative("desktop-configurator-swatch-hover:"+a.name+"_sec",
!0);if(this.isTextSwatch)c.on("resize",function(){0<d.displaySwatches.length&&(d.repopulateDisplaySwatches(),d.alignTextSwatches(),d.alignTextSwatchNodesInLastRow(),"function"===typeof d.windowResizeCallback&&d.windowResizeCallback(d.name))})}b.prototype={setState:function(a,b,g,f){var d=this,h,m=[],q=[],n=[];c.objectIsEmpty(b)||(c.each(b,function(b,e){if(!d.swatches[e]&&(a.swatches[e].isVisible||g)){var c=new k(a.swatches[e],d.isTextSwatch,d.name,e,d.hideSlotsFromMainView,d.swatchPrototypeNode,d.swatchPrototypeNodeParent);
c.subscribeToHoverEvent(d.name);d.swatches[e]=c;!d.isTextSwatch&&d.swatches[e]&&d.swatches[e].domNode&&n.push(d.swatches[e].domNode.find(".inline-twister-manual-load")[0])}q[b]=e}),this.swatchIdxOrder=q,f||(this.resetToggleSwatchContainer(),this.displaySwatches=[]),c.each(this.swatchIdxOrder,function(a,b){if(a=d.swatches[a])a&&d.swatchListContainer.append(a.domNode),a&&a.subscribeToHoverEvent(d.name),d.addToDisplaySwatches(a,d.displaySwatches)}));c.each(a.swatches,function(a,b){if(d.swatches[b])h=
a.selected?d.swatches[b]:h,d.swatches[b].selected=!!a.selected,m.push({index:b,data:a});else{if(a.isVisible||g)d.swatches[b]=new k(a,d.isTextSwatch,d.name,b,d.hideSlotsFromMainView,d.swatchPrototypeNode,d.swatchPrototypeNodeParent),d.swatches[b].subscribeToHoverEvent(d.name),d.addToDisplaySwatches(d.swatches[b],d.displaySwatches),!d.isTextSwatch&&d.swatches[b]&&d.swatches[b].domNode&&n.push(d.swatches[b].domNode.find(".inline-twister-manual-load")[0]);a.selected&&(h=d.swatches[b])}});this.selectedSwatch&&
this.selectedSwatch.updateSelection();h&&h.updateSelection();c.each(m,function(a,b){d.swatches[a.index].setState(a.data,g,d.name,a.index)});this.isTextSwatch&&(c.objectIsEmpty(b)?this.alignTextSwatchNodesInLastRow():this.alignTextSwatches());d.selectedSwatch&&h&&d.selectedSwatch!==h&&!d.isUserInteracting&&d.autoNotificationCallback(!0);d.selectedSwatch=h;d.isUserInteracting=!1;n.length&&c.loadImageManually(n);return this},getSlotNodes:function(a){return c.map(this.displaySwatches,function(b){return c.map(b,
function(b){return b.getSlotNode(a)})})},setUserInteracting:function(a){this.isUserInteracting=a},alignTextSwatches:function(a,b){c.each(this.displaySwatches,function(c){g.alignTextSwatches(c,a,b)})},alignTextSwatchNodesInLastRow:function(){var a=this.domNode.find(".inline-twister-swatch:not(.aok-hidden):not(.swatch-prototype)");if(1<a.length){var b=a[a.length-1],f=a[a.length-2];b&&f&&b.getBoundingClientRect().top===f.getBoundingClientRect().top&&(a=c.map(a.slice(a.length-(a.length%this.numberOfSwatchesPerRow||
this.numberOfSwatchesPerRow),a.length),function(a){return this.swatches[a.getAttribute("data-idxInToggleSwatchList")]},this),g.alignTextSwatches(a))}},resetToggleSwatchContainer:function(){var a=n(this.domNode.find(".a-button-list").children()[0]);this.swatchListContainer.html("");this.swatchListContainer.append(a)},getVisibleSwatchesSize:function(){var a=0;c.each(this.swatches,function(b,c){b.isVisible&&(a+=1)});return a},setAutoUpdated:function(a){this.markAutoUpdated=a},getInitialVisibleSwatchList:function(){return this.initialVisibleSwatchList},
getNumberOfSwatchesPerRow:function(){return this.numberOfSwatchesPerRow},setNumberOfSwatchesPerRow:function(a){a&&(this.numberOfSwatchesPerRow=a)},createSwatch:function(a,b){b=new k(a,this.isTextSwatch,this.name,a.name,this.hideSlotsFromMainView,this.swatchPrototypeNode,this.swatchPrototypeNodeParent,b);this.swatches[a.name]=b;this.initialVisibleSwatchList[a.name]=b;this.selectedSwatch=a.selected?b:this.selectedSwatch;this.orderedSwatchList.push(b);return b},activatePageRefresh:function(){this.isPageRefreshActive=
!0;this.domNode.find(".page-load-link").remove()},getSwatch:function(a){return this.swatches[a]?this.swatches[a]:{}},registerHoverDeclarative:function(a,b){var g=this;c.declarative(a,"mouseenter mouseleave",function(a){var c=a.$currentTarget[0].getAttribute("data-idxInToggleSwatchList"),c=g.getSwatch(c);a.data={slotNode:a.$currentTarget.find(c.slotNodeIdentifier),showImageInPopOver:c.isImageSwatch&&!!c.popoverImage,unavailable:c.unavailable,showSlot:c.showSlot,selected:c.selected,title:c.title,name:c.name,
id:b?c.id+"_sec":c.id,image:c.popoverImage};g.hoverHandler(g.name,a)})},addToDisplaySwatches:function(a,b){var c=f.ROW_IDENTIFIER_PREFIX;if(0===b.length)b.push([a]);else{var g=b[b.length-1];g&&g.length===this.numberOfSwatchesPerRow?b.push([a]):g.push(a)}this.removeSwatchRowIdentifier(a);a.domNode&&a.domNode.addClass(c+(b.length-1).toString())},repopulateDisplaySwatches:function(){if(0!==this.displaySwatches.length){var a=[],b=0,g,h=this;c.each(this.displaySwatches,function(d,k){c.each(d,function(c,
d){0===a.length?a.push([c]):0===b?(g=a[0][a[0].length-1],c.getTopPosition()!==g.getTopPosition()?(b=a[0].length,h.numberOfSwatchesPerRow=b,h.addToDisplaySwatches(c,a)):(a[0].push(c),h.removeSwatchRowIdentifier(c),c.domNode&&c.domNode.addClass(f.ROW_IDENTIFIER_PREFIX+(0).toString()))):h.addToDisplaySwatches(c,a)})});0===b&&(this.numberOfSwatchesPerRow=b=a[0].length);this.displaySwatches=a}},removeSwatchRowIdentifier:function(a){a.domNode&&a.domNode.removeClass(function(a,b){return(b.match(/(^|\s)desktop-configurator-dim-row-\S+/g)||
[]).join(" ")})},createDisplaySwatches:function(){var a=this;c.each(this.orderedSwatchList,function(b){a.addToDisplaySwatches(b,a.displaySwatches)})},removeMisplacedSwatch:function(){var a=this.displaySwatches[this.displaySwatches.length-1],b=a[a.length-1],c=b.name;b.domNode&&b.domNode.remove();delete this.swatches[c];this.selectedSwatch&&this.selectedSwatch.name===c&&(this.selectedSwatch=null);1<a.length?a.pop():this.displaySwatches.pop()},removeInitiallyHiddenSwatches:function(){for(var a=this.domNode.find(".inline-twister-swatch.aok-hidden:not(.swatch-prototype)"),
b=a.length-1;0<=b;b--){var c=a[b];c.parentNode.removeChild(c)}}};return b}(k,w),g=function(g){function f(b){this.mainText=b.mainText;this.subText=b.subText;this.dimKey=b.dimKey;this.titleSelectorPrefix=b.titleSelectorPrefix;this.titleValueSelector=b.titleValueSelector;this.domNode=n("#"+this.titleSelectorPrefix+this.dimKey)}f.prototype={refresh:function(){this.domNode.find("."+this.titleValueSelector).text(this.subText);this.domNode.removeClass("twister-plus-inline-twister-dim-required twister-plus-inline-twister-dim-required-delay")},
setState:function(b){return c.equals(b,n.extend({},this))?this:(n.extend(this,b),this.refresh())},getData:function(){return{mainText:this.mainText,subText:this.subText}}};return f}(k),q=function(g,h,b){function a(a,b,g,d,k){function q(){w=w||t.domNode.find(".dimension-heading");w.css(m.BG_COLOR,m.GREEN_BG_COLOR);c.delay(function(){c.animate(w,{"background-color":m.WHITE_BG_COLOR},200)},1E3)}var t=this;this.disableCollapseFunctionality=g.inlineTwisterData?g.inlineTwisterData.disableCollapseFunctionality:
!1;this.stringTranslationMap=g.inlineTwisterData?g.inlineTwisterData.stringTranslationMap:{};this.title=b?new h(b):null;this.dimKey=g.dimKey;this.domNode=n("#"+a+this.dimKey);this.showSlot=g.showSlot;this.logger=k;this.isTwisterCoreInitialized=this.markAutoUpdated=!1;this.expanderContent=t.domNode.find(r.EXPANDER_CONTENT_PREFIX+this.dimKey);this.expanderHeader=t.domNode.find(r.EXPANDER_HEADER_PREFIX+this.dimKey);this.icon=t.domNode.find(r.DIMENSION_EXPANDER_ICON_PREFIX+this.dimKey);this.expandedText=
t.domNode.find(r.EXPANDED_DIMENSION_TEXT_PREFIX+this.dimKey);this.collapsedText=t.domNode.find(r.COLLAPSED_DIMENSION_TEXT_PREFIX+this.dimKey);this.rowCallbacks=d;this.autoNotificationExpanded=t.domNode.find(r.AUTO_NOTIFICATION_EXPANDED);this.autoNotificationExpandedText=t.autoNotificationExpanded.text();this.imageThumbnail=t.domNode.find(r.IMAGE_THUMBNAIL);this.sideSheetLink=this.domNode.find(".tp-side-sheet-link-container");this.isExpanded=this.expanderContent.hasClass("dimension-expander-content-expand");
var w;this.autoNotificationCallback=function(a,b){var c=t.autoNotificationExpandedText;a?t.isExpanded&&b?(t.autoNotificationExpanded.find("."+f.A_COLOR_ATTAINABLE).html(c),t.autoNotificationExpanded.removeClass(f.AOK_HIDDEN)):(q(),t.setAutoUpdated(!0)):t.hideAutoNotification()};this.disableCollapseFunctionality||c.declarative("toggle-dimension-expander-"+this.dimKey,"click",function(a){t.isExpanded?t.collapse():t.expand();t.hideAutoNotification()})}a.prototype={setState:function(a,b,c,d,g,h){this.toggleSwatch&&
c!==this.dimKey&&this.autoNotificationExpanded.addClass(f.AOK_HIDDEN);a&&this.toggleSwatch&&this.toggleSwatch.setState(a,b,g,h);g||d&&this.title&&this.title.setState(d)},expand:function(){this.expanderContent&&this.expanderContent.css("visibility","");this.expanderContent&&this.expanderContent.addClass(f.DIMENSION_EXPANDER_CONTENT_EXPAND);this.icon&&this.icon.addClass(f.ROTATE);this.expandedText&&this.expandedText.removeClass(f.AOK_HIDDEN);this.collapsedText&&this.collapsedText.addClass(f.AOK_HIDDEN);
this.imageThumbnail.addClass(f.AOK_HIDDEN);this.isExpanded=!0;var a={dimKey:this.dimKey};"function"===typeof this.rowCallbacks.handleDimensionExpansion&&this.isTwisterCoreInitialized&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!0);if(this.expanderHeader){var a=this.stringTranslationMap?this.stringTranslationMap.expanderHeaderAriaLabel:"",b=this.title.getData(),a=a.replace("###dimension",b.mainText).replace("###value",b.subText),a=a+" "+(this.stringTranslationMap?this.stringTranslationMap.tapToCollapse:
"");this.expanderHeader.attr("aria-label",a);this.expanderHeader.find(r.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)}this.markAutoUpdated&&(this.logger.logDimExpansionAfterAutoUpdate(),this.markAutoUpdated=!1)},collapse:function(){this.expanderContent&&this.expanderContent.removeClass(f.DIMENSION_EXPANDER_CONTENT_EXPAND);this.expanderContent&&this.expanderContent.css("visibility","hidden");this.icon&&this.icon.removeClass(f.ROTATE);this.expandedText&&this.expandedText.addClass(f.AOK_HIDDEN);
this.collapsedText&&this.collapsedText.removeClass(f.AOK_HIDDEN);this.imageThumbnail.removeClass(f.AOK_HIDDEN);this.isExpanded=!1;var a={dimKey:this.dimKey};"function"===typeof this.rowCallbacks.handleDimensionExpansion&&this.isTwisterCoreInitialized&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!1);this.autoNotificationExpanded.addClass(f.AOK_HIDDEN);if(this.expanderHeader){var a=this.stringTranslationMap?this.stringTranslationMap.expanderHeaderAriaLabel:"",b=this.title.getData(),a=
a.replace("###dimension",b.mainText).replace("###value",b.subText),a=a+" "+(this.stringTranslationMap?this.stringTranslationMap.tapToExpand:"");this.expanderHeader.attr("aria-label",a);this.expanderHeader.find(r.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)}},setUserInteracting:function(a){this.toggleSwatch&&this.toggleSwatch.setUserInteracting(a)},setExpanderHeaderAriaLabel:function(a,b){a=this.expanderHeader.attr("aria-label").replace(a.subText,b.subText);this.expanderHeader.attr("aria-label",
a);this.expanderHeader.find(r.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)},setThumbnailImage:function(a){(a=g.getThumbnailImageUrlForPhysicalId(a))&&this.imageThumbnail.attr("src",a)},setAutoUpdated:function(a){this.markAutoUpdated=a;this.toggleSwatch&&this.toggleSwatch.setAutoUpdated(a)},getInitialVisibleSwatchList:function(){return this.toggleSwatch?this.toggleSwatch.getInitialVisibleSwatchList():{}},getSwatch:function(a){return this.toggleSwatch?this.toggleSwatch.getSwatch(a):{}},activatePageRefresh:function(){this.toggleSwatch&&
this.toggleSwatch.activatePageRefresh()},showSideSheetLink:function(){this.sideSheetLink.removeClass("aok-hidden")},hideSideSheetLink:function(){this.sideSheetLink.addClass("aok-hidden")},setMaxHeight:function(a){this.expanderContent.css("max-height",a)},triggerExpandOrCollapseAnimation:function(a,b,c){var d=this;this.expanderContent.animate({"max-height":a+"px"},b,function(){d.setMaxHeight("");c&&c()})},getDisplaySwatches:function(){return this.toggleSwatch?this.toggleSwatch.displaySwatches:[]},
createDisplaySwatches:function(){this.toggleSwatch&&this.toggleSwatch.createDisplaySwatches()},hideAutoNotification:function(){this.autoNotificationExpanded.addClass(f.AOK_HIDDEN)},initializeComponents:function(a,g,f){if(!this.toggleSwatch&&a){var d=this.title.getData();this.toggleSwatch=new b(a,{windowResizeCallback:f.handleWindowResize,autoNotificationCallback:this.autoNotificationCallback},this.domNode,d.mainText)}this.isTextSwatch=a?a.isTextSwatch:!0;this.rowCallbacks=c.extend(this.rowCallbacks,
f);this.totalSwatchCount=a?a.totalSwatchCount:0;this.showSlot=g;var h=this;c.declarative("open-desktop-configurator-side-sheet:"+this.dimKey,"click",function(){"function"===typeof h.rowCallbacks.showSideSheet&&h.isTwisterCoreInitialized&&(h.rowCallbacks.showSideSheet(h.dimKey,h.showSlot,h.title.getData()),h.hideAutoNotification())})},postInitialize:function(){this.isTwisterCoreInitialized=!0;var a={dimKey:this.dimKey};this.toggleSwatch&&this.toggleSwatch.removeInitiallyHiddenSwatches();this.isExpanded&&
this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!0)}};return a}(k,g,t);return{Swatch:w,ToggleSwatch:t,Title:g,Row:q,utils:k}});"use strict";y.when("A","detail-page-side-sheet-handlers").register("detail-page-side-sheet",function(c,k){function n(c){var m=c.id&&"string"===typeof c.id,n=1===w("#"+c.id).length;if(m&&n)this.id=c.id,this.shouldRenderHTMLString=!!c.shouldRenderHTMLString,this.animationDuration=c.animationDuration||300,this.container=k.getContainer(c.id),this.onBeforeShow=c.onBeforeShow,
this.onAfterHide=c.onAfterHide,m=c.width||580,(n=this.container)&&n.width(m),h(c.id,m),f.call(this);else throw c="Side sheet initialisation failed: "+(m?"Side sheet not present in DOM, or multiple instances of side sheet ID "+c.id+" exist":"Invalid Side sheet ID"),y.log(c,"ERROR","DetailPageSideSheet"),c;}function r(c){var f=this.container;c=this.shouldRenderHTMLString?w(c):w(c).clone();f.html(c);c.css("display","block");f.removeClass("aok-hidden")}function f(){var g=this;c.declarative("close-detail-page-side-sheet:"+
this.id,"click",function(){g.close()});c.declarative("open-detail-page-side-sheet:"+this.id,"click",function(c){g.open(c&&c.data?c.data.content:null)})}function m(c){c.code&&"escape"===c.code.toLowerCase()&&(this.close(),document&&document.removeEventListener("keydown",t))}function h(c,f){c=w("#"+c+"-background .close-button");c.length&&(c[0].style.marginRight=f+10+"px")}var w=c.$,t=null;n.prototype={open:function(c){if(c&&"string"===typeof c){r.call(this,c);if(this.onBeforeShow)this.onBeforeShow();
k.showSideSheet(this.id,this.animationDuration);t=m.bind(this);document&&document.addEventListener("keydown",t)}else y.log("Invalid side sheet content. Side sheet ID: "+this.id,"ERROR","DetailPageSideSheet")},close:function(){k.closeSideSheet(this.id,this.animationDuration);k.resetSideSheetContainer(this.container);if(this.onAfterHide)this.onAfterHide()},updateWidth:function(c){var f=this.container;f&&f.width(c);h(this.id,c)},updateContent:function(c){c&&"string"===typeof c?r.call(this,c):y.log("Invalid side sheet content. Side sheet ID: "+
this.id,"ERROR","DetailPageSideSheet")}};return n});"use strict";y.when("A").register("detail-page-side-sheet-handlers",function(c){function k(c,h){f("#"+c+" .detail-page-side-sheet-content").show(function(){r({right:"0px"},c,h)})}function n(c,h){f("#"+c+" .detail-page-side-sheet-content").show(function(){r({right:"-600px"},c,h)})}function r(k,h,n){c.animate(f("#"+h+" .detail-page-side-sheet-content"),k,n)}var f=c.$;return{showSideSheet:function(c,h){f("body").css("overflow","hidden");f(".detail-page-side-sheet-darken-bg").removeClass("aok-hidden");
f("#"+c).removeClass("aok-hidden");k(c,h)},closeSideSheet:function(c,h){n(c,h);f(".detail-page-side-sheet-darken-bg").addClass("aok-hidden");f("#"+c).addClass("aok-hidden");f("body").css("overflow","scroll")},getContainer:function(c){return f("#"+c).find(".detail-page-side-sheet-content")},resetSideSheetContainer:function(c){c.html("")}}})});